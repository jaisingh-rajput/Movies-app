(self.webpackChunkmovies_app=self.webpackChunkmovies_app||[]).push([[179],{2011:(nt,Ee,F)=>{"use strict";F.d(Ee,{hO:()=>Ve,xv:()=>le,Dh:()=>se,GT:()=>fe,cc:()=>Ie,on:()=>$,pX:()=>re});var f=F(5e3),Q=F(127),k=F(5813);nt=F.hmd(nt);const ue=["ngOnDestroy"],re=(K,ae,Ce,ge={})=>new Proxy(K,{get:($e,xe)=>Ce.runOutsideAngular(()=>{var He;if(K[xe])return(null===(He=null==ge?void 0:ge.spy)||void 0===He?void 0:He.get)&&ge.spy.get(xe,K[xe]),K[xe];if(ue.indexOf(xe)>-1)return()=>{};const qe=ae.toPromise().then(ut=>{const ee=ut&&ut[xe];return"function"==typeof ee?ee.bind(ut):ee&&ee.then?ee.then(ce=>Ce.run(()=>ce)):Ce.run(()=>ee)});return new Proxy(()=>{},{get:(ut,ee)=>qe[ee],apply:(ut,ee,ce)=>qe.then(_e=>{var we;const Oe=_e&&_e(...ce);return(null===(we=null==ge?void 0:ge.spy)||void 0===we?void 0:we.apply)&&ge.spy.apply(xe,ce,Oe),Oe})})})}),fe=(K,ae)=>{ae.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(ge=>{Object.defineProperty(K.prototype,ge,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,ge))})})};class ie{constructor(ae){return ae}}const se=new f.OlP("angularfire2.app.options"),le=new f.OlP("angularfire2.app.name");function $(K,ae,Ce){const $e="object"==typeof Ce&&Ce||{};$e.name=$e.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const He=Q.Z.apps.filter(qe=>qe&&qe.name===$e.name)[0]||ae.runOutsideAngular(()=>Q.Z.initializeApp(K,$e));try{JSON.stringify(K)!==JSON.stringify(He.options)&&H("error",`${He.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(qe){}return new ie(He)}const H=(K,...ae)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[K](...ae)},X={provide:ie,useFactory:$,deps:[se,f.R0b,[new f.FiY,le]]};let Ve=(()=>{class K{constructor(Ce){Q.Z.registerVersion("angularfire",k.q4.full,"core"),Q.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Q.Z.registerVersion("angular",f.q4F.full,Ce.toString())}static initializeApp(Ce,ge){return{ngModule:K,providers:[{provide:se,useValue:Ce},{provide:le,useValue:ge}]}}}return K.\u0275fac=function(Ce){return new(Ce||K)(f.LFG(f.Lbi))},K.\u0275mod=f.oAB({type:K}),K.\u0275inj=f.cJS({providers:[X]}),K})();function Ie(K,ae,Ce,ge,$e){const[,xe,He]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===K)||[];if(xe)return function(K,ae){try{return K.toString()===ae.toString()}catch(Ce){return K===ae}}($e,He)||(oe("error",`${ae} was already initialized on the ${Ce} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),oe("warn",{is:$e,was:He})),xe;{const qe=ge();return globalThis.\u0275AngularfireInstanceCache.push([K,qe,$e]),qe}}const Le=!!nt.hot,oe=(K,...ae)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[K](...ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Ee,F)=>{"use strict";F.d(Ee,{q4:()=>tf,iC:()=>Ir,HU:()=>rf,vb:()=>_d,JM:()=>Xu});var f=F(5e3),Q=F(5867),k=F(5861),ue=F(9681),re=F(2090),fe=F(4859),ie=F(1877),se=F(2940);const le="@firebase/installations",$="0.5.4",X=`w:${$}`,Ve="FIS_v2",ae=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function ge({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function $e(b){return{token:b.token,requestStatus:2,expiresIn:_e(b.expiresIn),creationTime:Date.now()}}function xe(b,D){return He.apply(this,arguments)}function He(){return(He=(0,k.Z)(function*(b,D){const U=(yield D.json()).error;return ae.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function qe({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ut(b,{refreshToken:D}){const N=qe(b);return N.append("Authorization",function(b){return`${Ve} ${b}`}(D)),N}function ee(b){return ce.apply(this,arguments)}function ce(){return(ce=(0,k.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function _e(b){return Number(b.replace("s","000"))}function Oe(b,D){return de.apply(this,arguments)}function de(){return(de=(0,k.Z)(function*(b,{fid:D}){const N=ge(b),ne={method:"POST",headers:qe(b),body:JSON.stringify({fid:D,authVersion:Ve,appId:b.appId,sdkVersion:X})},Ae=yield ee(()=>fetch(N,ne));if(Ae.ok){const Ke=yield Ae.json();return{fid:Ke.fid||D,registrationStatus:2,refreshToken:Ke.refreshToken,authToken:$e(Ke.authToken)}}throw yield xe("Create Installation",Ae)})).apply(this,arguments)}function Et(b){return new Promise(D=>{setTimeout(D,b)})}const Un=/^[cdef][\w-]{21}$/;function gt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const N=function(b){return function(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Un.test(N)?N:""}catch(b){return""}}function ln(b){return`${b.appName}!${b.appId}`}const _r=new Map;function Ar(b,D){const N=ln(b);An(N,D),function(b,D){const N=(!$t&&"BroadcastChannel"in self&&($t=new BroadcastChannel("[Firebase] FID Change"),$t.onmessage=b=>{An(b.data.key,b.data.fid)}),$t);N&&N.postMessage({key:b,fid:D}),0===_r.size&&$t&&($t.close(),$t=null)}(N,D)}function An(b,D){const N=_r.get(b);if(N)for(const U of N)U(D)}let $t=null;const Te="firebase-installations-store";let tr=null;function Bn(){return tr||(tr=(0,se.openDb)("firebase-installations-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Te)})),tr}function ht(b,D){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,k.Z)(function*(b,D){const N=ln(b),Z=(yield Bn()).transaction(Te,"readwrite"),ne=Z.objectStore(Te),Ae=yield ne.get(N);return yield ne.put(D,N),yield Z.complete,(!Ae||Ae.fid!==D.fid)&&Ar(b,D.fid),D})).apply(this,arguments)}function pi(b){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,k.Z)(function*(b){const D=ln(b),U=(yield Bn()).transaction(Te,"readwrite");yield U.objectStore(Te).delete(D),yield U.complete})).apply(this,arguments)}function it(b,D){return ft.apply(this,arguments)}function ft(){return(ft=(0,k.Z)(function*(b,D){const N=ln(b),Z=(yield Bn()).transaction(Te,"readwrite"),ne=Z.objectStore(Te),Ae=yield ne.get(N),Ke=D(Ae);return void 0===Ke?yield ne.delete(N):yield ne.put(Ke,N),yield Z.complete,Ke&&(!Ae||Ae.fid!==Ke.fid)&&Ar(b,Ke.fid),Ke})).apply(this,arguments)}function xt(b){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,k.Z)(function*(b){let D;const N=yield it(b,U=>{const Z=xr(U),ne=qt(b,Z);return D=ne.registrationPromise,ne.installationEntry});return""===N.fid?{installationEntry:yield D}:{installationEntry:N,registrationPromise:D}})).apply(this,arguments)}function xr(b){return mt(b||{fid:gt(),registrationStatus:0})}function qt(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ae.create("app-offline"))};const N={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function(b,D){return st.apply(this,arguments)}(b,N);return{installationEntry:N,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Il(b)}:{installationEntry:D}}function st(){return(st=(0,k.Z)(function*(b,D){try{return ht(b,yield Oe(b,D))}catch(N){throw Ce(N)&&409===N.customData.serverCode?yield pi(b):yield ht(b,{fid:D.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Il(b){return ks.apply(this,arguments)}function ks(){return(ks=(0,k.Z)(function*(b){let D=yield Kt(b);for(;1===D.registrationStatus;)yield Et(100),D=yield Kt(b);if(0===D.registrationStatus){const{installationEntry:N,registrationPromise:U}=yield xt(b);return U||N}return D})).apply(this,arguments)}function Kt(b){return it(b,D=>{if(!D)throw ae.create("installation-not-found");return mt(D)})}function mt(b){return function(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function bl(b,D){return W.apply(this,arguments)}function W(){return(W=(0,k.Z)(function*({appConfig:b,platformLoggerProvider:D},N){const U=B(b,N),Z=ut(b,N),ne=D.getImmediate({optional:!0});ne&&Z.append("x-firebase-client",ne.getPlatformInfoString());const Ke={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:X}})},We=yield ee(()=>fetch(U,Ke));if(We.ok)return $e(yield We.json());throw yield xe("Generate Auth Token",We)})).apply(this,arguments)}function B(b,{fid:D}){return`${ge(b)}/${D}/authTokens:generate`}function q(b){return ye.apply(this,arguments)}function ye(){return(ye=(0,k.Z)(function*(b,D=!1){let N;const U=yield it(b.appConfig,ne=>{if(!Dn(ne))throw ae.create("not-registered");const Ae=ne.authToken;if(!D&&Gr(Ae))return ne;if(1===Ae.requestStatus)return N=te(b,D),ne;{if(!navigator.onLine)throw ae.create("app-offline");const Ke=ar(ne);return N=Yt(b,Ke),Ke}});return N?yield N:U.authToken})).apply(this,arguments)}function te(b,D){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,k.Z)(function*(b,D){let N=yield lt(b.appConfig);for(;1===N.authToken.requestStatus;)yield Et(100),N=yield lt(b.appConfig);const U=N.authToken;return 0===U.requestStatus?q(b,D):U})).apply(this,arguments)}function lt(b){return it(b,D=>{if(!Dn(D))throw ae.create("not-registered");return function(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Yt(b,D){return or.apply(this,arguments)}function or(){return(or=(0,k.Z)(function*(b,D){try{const N=yield bl(b,D),U=Object.assign(Object.assign({},D),{authToken:N});return yield ht(b.appConfig,U),N}catch(N){if(!Ce(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ht(b.appConfig,U)}else yield pi(b.appConfig);throw N}})).apply(this,arguments)}function Dn(b){return void 0!==b&&2===b.registrationStatus}function Gr(b){return 2===b.requestStatus&&!function(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function ar(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function jo(){return(jo=(0,k.Z)(function*(b){const D=b,{installationEntry:N,registrationPromise:U}=yield xt(D.appConfig);return U?U.catch(console.error):q(D).catch(console.error),N.fid})).apply(this,arguments)}function go(){return(go=(0,k.Z)(function*(b,D=!1){const N=b;return yield Dl(N.appConfig),(yield q(N,D)).token})).apply(this,arguments)}function Dl(b){return dn.apply(this,arguments)}function dn(){return(dn=(0,k.Z)(function*(b){const{registrationPromise:D}=yield xt(b);D&&(yield D)})).apply(this,arguments)}function Mn(b){return ae.create("missing-app-config-values",{valueName:b})}const Kc="installations";(0,ue._registerComponent)(new fe.wA(Kc,b=>{const D=b.getProvider("app").getImmediate(),N=function(b){if(!b||!b.options)throw Mn("App Configuration");if(!b.name)throw Mn("App Name");const D=["projectId","apiKey","appId"];for(const N of D)if(!b.options[N])throw Mn(N);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:N,platformLoggerProvider:(0,ue._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ue._registerComponent)(new fe.wA("installations-internal",b=>{const D=b.getProvider("app").getImmediate(),N=(0,ue._getProvider)(D,Kc).getImmediate();return{getId:()=>function(b){return jo.apply(this,arguments)}(N),getToken:Z=>function(b){return go.apply(this,arguments)}(N,Z)}},"PRIVATE")),(0,ue.registerVersion)(le,$),(0,ue.registerVersion)(le,$,"esm2017");const Sn="@firebase/remote-config",jn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $h{constructor(D,N,U,Z){this.client=D,this.storage=N,this.storageCache=U,this.logger=Z}isCachedDataFresh(D,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-N,Z=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var N=this;return(0,k.Z)(function*(){const[U,Z]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Z&&N.isCachedDataFresh(D.cacheMaxAgeMillis,U))return Z;D.eTag=Z&&Z.eTag;const ne=yield N.client.fetch(D),Ae=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&Ae.push(N.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(Ae),ne})()}}function vg(b=navigator){return b.languages&&b.languages[0]||b.language}class _i{constructor(D,N,U,Z,ne,Ae){this.firebaseInstallations=D,this.sdkVersion=N,this.namespace=U,this.projectId=Z,this.apiKey=ne,this.appId=Ae}fetch(D){var N=this;return(0,k.Z)(function*(){const[U,Z]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},We={sdk_version:N.sdkVersion,app_instance_id:U,app_instance_id_token:Z,app_id:N.appId,language_code:vg()},Ot={method:"POST",headers:Ke,body:JSON.stringify(We)},tn=fetch(Ae,Ot),qr=new Promise((ni,Ci)=>{D.signal.addEventListener(()=>{const au=new Error("The operation was aborted.");au.name="AbortError",Ci(au)})});let br;try{yield Promise.race([tn,qr]),br=yield tn}catch(ni){let Ci="fetch-client-network";throw"AbortError"===ni.name&&(Ci="fetch-timeout"),jn.create(Ci,{originalErrorMessage:ni.message})}let Rn=br.status;const Dr=br.headers.get("ETag")||void 0;let ms,Ki;if(200===br.status){let ni;try{ni=yield br.json()}catch(Ci){throw jn.create("fetch-client-parse",{originalErrorMessage:Ci.message})}ms=ni.entries,Ki=ni.state}if("INSTANCE_STATE_UNSPECIFIED"===Ki?Rn=500:"NO_CHANGE"===Ki?Rn=304:("NO_TEMPLATE"===Ki||"EMPTY_CONFIG"===Ki)&&(ms={}),304!==Rn&&200!==Rn)throw jn.create("fetch-status",{httpStatus:Rn});return{status:Rn,eTag:Dr,config:ms}})()}}class Qc{constructor(D,N){this.client=D,this.storage=N}fetch(D){var N=this;return(0,k.Z)(function*(){const U=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:N,backoffCount:U}){var Z=this;return(0,k.Z)(function*(){yield function(b,D){return new Promise((N,U)=>{const Z=Math.max(D-Date.now(),0),ne=setTimeout(N,Z);b.addEventListener(()=>{clearTimeout(ne),U(jn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,N);try{const ne=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const Ae={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(Ae),Z.attemptFetch(D,Ae)}})()}}class wg{constructor(D,N,U,Z,ne){this.app=D,this._client=N,this._storageCache=U,this._storage=Z,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ma(b,D){const N=b.target.error||void 0;return jn.create(D,{originalErrorMessage:N&&N.message})}const Wo="app_namespace_store";class Eg{constructor(D,N,U,Z=function(){return new Promise((b,D)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=U=>{D(Ma(U,"storage-open"))},N.onsuccess=U=>{b(U.target.result)},N.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Wo,{keyPath:"compositeKey"})}}catch(N){D(jn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=D,this.appName=N,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var N=this;return(0,k.Z)(function*(){const U=yield N.openDbPromise;return new Promise((Z,ne)=>{const Ke=U.transaction([Wo],"readonly").objectStore(Wo),We=N.createCompositeKey(D);try{const Ot=Ke.get(We);Ot.onerror=tn=>{ne(Ma(tn,"storage-get"))},Ot.onsuccess=tn=>{const qr=tn.target.result;Z(qr?qr.value:void 0)}}catch(Ot){ne(jn.create("storage-get",{originalErrorMessage:Ot&&Ot.message}))}})})()}set(D,N){var U=this;return(0,k.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((ne,Ae)=>{const We=Z.transaction([Wo],"readwrite").objectStore(Wo),Ot=U.createCompositeKey(D);try{const tn=We.put({compositeKey:Ot,value:N});tn.onerror=qr=>{Ae(Ma(qr,"storage-set"))},tn.onsuccess=()=>{ne()}}catch(tn){Ae(jn.create("storage-set",{originalErrorMessage:tn&&tn.message}))}})})()}delete(D){var N=this;return(0,k.Z)(function*(){const U=yield N.openDbPromise;return new Promise((Z,ne)=>{const Ke=U.transaction([Wo],"readwrite").objectStore(Wo),We=N.createCompositeKey(D);try{const Ot=Ke.delete(We);Ot.onerror=tn=>{ne(Ma(tn,"storage-delete"))},Ot.onsuccess=()=>{Z()}}catch(Ot){ne(jn.create("storage-delete",{originalErrorMessage:Ot&&Ot.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class td{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const N=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),ne=yield N;ne&&(D.lastFetchStatus=ne);const Ae=yield U;Ae&&(D.lastSuccessfulFetchTimestampMillis=Ae);const Ke=yield Z;Ke&&(D.activeConfig=Ke)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Na(){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}(0,ue._registerComponent)(new fe.wA("remote-config",function(D,{instanceIdentifier:N}){const U=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw jn.create("registration-window");if(!(0,re.hl)())throw jn.create("indexed-db-unavailable");const{projectId:ne,apiKey:Ae,appId:Ke}=U.options;if(!ne)throw jn.create("registration-project-id");if(!Ae)throw jn.create("registration-api-key");if(!Ke)throw jn.create("registration-app-id");const We=new Eg(Ke,U.name,N=N||"firebase"),Ot=new td(We),tn=new ie.Yd(Sn);tn.logLevel=ie.in.ERROR;const qr=new _i(Z,ue.SDK_VERSION,N,ne,Ae,Ke),br=new Qc(qr,We),Rn=new $h(br,We,Ot,tn),Dr=new wg(U,Rn,Ot,We,tn);return function(b){const D=(0,re.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Dr),Dr},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Sn,"0.3.3"),(0,ue.registerVersion)(Sn,"0.3.3","esm2017");const xl="/firebase-messaging-sw.js",Ig="/firebase-cloud-messaging-push-scope",$i="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vs="google.c.a.c_id",qo="google.c.a.c_l",Us="google.c.a.ts",Nu="google.c.a.e";var lr=(()=>{return(b=lr||(lr={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",lr;var b})();function cs(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Pa(b){const N=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(N),Z=new Uint8Array(U.length);for(let ne=0;ne<U.length;++ne)Z[ne]=U.charCodeAt(ne);return Z}const rd="fcm_token_details_db",id="fcm_token_object_Store";function Ml(b){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(rd))return null;let D=null;return(yield(0,se.openDb)(rd,5,function(){var U=(0,k.Z)(function*(Z){var ne;if(Z.oldVersion<2||!Z.objectStoreNames.contains(id))return;const Ae=Z.transaction.objectStore(id),Ke=yield Ae.index("fcmSenderId").get(b);if(yield Ae.clear(),Ke)if(2===Z.oldVersion){const We=Ke;if(!We.auth||!We.p256dh||!We.endpoint)return;D={token:We.fcmToken,createTime:null!==(ne=We.createTime)&&void 0!==ne?ne:Date.now(),subscriptionOptions:{auth:We.auth,p256dh:We.p256dh,endpoint:We.endpoint,swScope:We.swScope,vapidKey:"string"==typeof We.vapidKey?We.vapidKey:cs(We.vapidKey)}}}else if(3===Z.oldVersion){const We=Ke;D={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:cs(We.auth),p256dh:cs(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:cs(We.vapidKey)}}}else if(4===Z.oldVersion){const We=Ke;D={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:cs(We.auth),p256dh:cs(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:cs(We.vapidKey)}}}});return function(Z){return U.apply(this,arguments)}}())).close(),yield(0,se.deleteDb)(rd),yield(0,se.deleteDb)("fcm_vapid_details_db"),yield(0,se.deleteDb)("undefined"),zh(D)?D:null}),Pu.apply(this,arguments)}function zh(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const en="firebase-messaging-store";let Nl=null;function Bs(){return Nl||(Nl=(0,se.openDb)("firebase-messaging-database",1,b=>{0===b.oldVersion&&b.createObjectStore(en)})),Nl}function Nn(b){return vo.apply(this,arguments)}function vo(){return(vo=(0,k.Z)(function*(b){const D=wo(b),U=yield(yield Bs()).transaction(en).objectStore(en).get(D);if(U)return U;{const Z=yield Ml(b.appConfig.senderId);if(Z)return yield Mr(b,Z),Z}})).apply(this,arguments)}function Mr(b,D){return yi.apply(this,arguments)}function yi(){return(yi=(0,k.Z)(function*(b,D){const N=wo(b),Z=(yield Bs()).transaction(en,"readwrite");return yield Z.objectStore(en).put(D,N),yield Z.complete,D})).apply(this,arguments)}function Pn(b){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,k.Z)(function*(b){const D=wo(b),U=(yield Bs()).transaction(en,"readwrite");yield U.objectStore(en).delete(D),yield U.complete})).apply(this,arguments)}function wo({appConfig:b}){return b.appId}const Qt=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ds(b,D){return ka.apply(this,arguments)}function ka(){return(ka=(0,k.Z)(function*(b,D){const N=yield ku(b),U=zo(D),Z={method:"POST",headers:N,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(Ye(b.appConfig),Z)).json()}catch(Ae){throw Qt.create("token-subscribe-failed",{errorInfo:Ae})}if(ne.error)throw Qt.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw Qt.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Co(b,D){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,k.Z)(function*(b,D){const N=yield ku(b),U=zo(D.subscriptionOptions),Z={method:"PATCH",headers:N,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(`${Ye(b.appConfig)}/${D.token}`,Z)).json()}catch(Ae){throw Qt.create("token-update-failed",{errorInfo:Ae})}if(ne.error)throw Qt.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw Qt.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Fa(b,D){return js.apply(this,arguments)}function js(){return(js=(0,k.Z)(function*(b,D){const U={method:"DELETE",headers:yield ku(b)};try{const ne=yield(yield fetch(`${Ye(b.appConfig)}/${D}`,U)).json();if(ne.error)throw Qt.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Z){throw Qt.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function Ye({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function ku(b){return La.apply(this,arguments)}function La(){return(La=(0,k.Z)(function*({appConfig:b,installations:D}){const N=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function zo({p256dh:b,auth:D,endpoint:N,vapidKey:U}){const Z={web:{endpoint:N,auth:D,p256dh:b}};return U!==$i&&(Z.web.applicationPubKey=U),Z}const Va=6048e5;function Fu(b){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,k.Z)(function*(b){const D=yield Hs(b.swRegistration,b.vapidKey),N={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:cs(D.getKey("auth")),p256dh:cs(D.getKey("p256dh"))},U=yield Nn(b.firebaseDependencies);if(U){if(Vu(U.subscriptionOptions,N))return Date.now()>=U.createTime+Va?Pt(b,{token:U.token,createTime:Date.now(),subscriptionOptions:N}):U.token;try{yield Fa(b.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return _n(b.firebaseDependencies,N)}return _n(b.firebaseDependencies,N)})).apply(this,arguments)}function sd(b){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(b){const D=yield Nn(b.firebaseDependencies);D&&(yield Fa(b.firebaseDependencies,D.token),yield Pn(b.firebaseDependencies));const N=yield b.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Pt(b,D){return hs.apply(this,arguments)}function hs(){return(hs=(0,k.Z)(function*(b,D){try{const N=yield Co(b.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:N,createTime:Date.now()});return yield Mr(b.firebaseDependencies,U),N}catch(N){throw yield sd(b),N}})).apply(this,arguments)}function _n(b,D){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,k.Z)(function*(b,D){const U={token:yield ds(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Mr(b,U),U.token})).apply(this,arguments)}function Hs(b,D){return cr.apply(this,arguments)}function cr(){return(cr=(0,k.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Pa(D)})})).apply(this,arguments)}function Vu(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function Io(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcm_message_id};return function(b,D){if(!D.notification)return;b.notification={};const N=D.notification.title;N&&(b.notification.title=N);const U=D.notification.body;U&&(b.notification.body=U);const Z=D.notification.image;Z&&(b.notification.image=Z)}(D,b),function(b,D){!D.data||(b.data=D.data)}(D,b),function(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const N=D.fcmOptions.link;N&&(b.fcmOptions.link=N);const U=D.fcmOptions.analytics_label;U&&(b.fcmOptions.analyticsLabel=U)}(D,b),D}function bo(b){return"object"==typeof b&&!!b&&Vs in b}function rr(b,D){const N=[];for(let U=0;U<b.length;U++)N.push(b.charAt(U)),U<D.length&&N.push(D.charAt(U));return N.join("")}function ja(b){return Qt.create("missing-app-config-values",{valueName:b})}rr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $s{constructor(D,N,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function(b){if(!b||!b.options)throw ja("App Configuration Object");if(!b.name)throw ja("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:N}=b;for(const U of D)if(!N[U])throw ja(U);return{appName:b.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:N,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Gi(b){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,k.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(xl,{scope:Ig}),b.swRegistration.update().catch(()=>{})}catch(D){throw Qt.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function $a(b,D){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,k.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield Gi(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Qt.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function Uu(b,D){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,k.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=$i)})).apply(this,arguments)}function Bu(){return(Bu=(0,k.Z)(function*(b,D){if(!navigator)throw Qt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qt.create("permission-blocked");return yield Uu(b,null==D?void 0:D.vapidKey),yield $a(b,null==D?void 0:D.serviceWorkerRegistration),Fu(b)})).apply(this,arguments)}function qa(b,D,N){return od.apply(this,arguments)}function od(){return(od=(0,k.Z)(function*(b,D,N){const U=ju(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:N[Vs],message_name:N[qo],message_time:N[Us],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ju(b){switch(b){case lr.NOTIFICATION_CLICKED:return"notification_open";case lr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function za(){return(za=(0,k.Z)(function*(b,D){const N=D.data;if(!N.isFirebaseMessaging)return;b.onMessageHandler&&N.messageType===lr.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Io(N)):b.onMessageHandler.next(Io(N)));const U=N.data;bo(U)&&"1"===U[Nu]&&(yield qa(b,N.messageType,U))})).apply(this,arguments)}const kl="@firebase/messaging";function Fl(){return hn.apply(this,arguments)}function hn(){return(hn=(0,k.Z)(function*(){return"undefined"!=typeof window&&(0,re.hl)()&&(yield(0,re.eu)())&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ue._registerComponent)(new fe.wA("messaging",b=>{const D=new $s(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function(b,D){return za.apply(this,arguments)}(D,N)),D},"PUBLIC")),(0,ue._registerComponent)(new fe.wA("messaging-internal",b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:U=>function(b,D){return Bu.apply(this,arguments)}(D,U)}},"PRIVATE")),(0,ue.registerVersion)(kl,"0.9.4"),(0,ue.registerVersion)(kl,"0.9.4","esm2017");const Ws="analytics",$u="firebase_id",Ll="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cd="https://www.googletagmanager.com/gtag/js",pn=new ie.Yd("@firebase/analytics");function Ja(b){return Promise.all(b.map(D=>D.catch(N=>N)))}function Tg(b,D){const N=document.createElement("script");N.src=`${cd}?l=${b}&id=${D}`,N.async=!0,document.head.appendChild(N)}function Ko(b,D,N,U,Z,ne){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,k.Z)(function*(b,D,N,U,Z,ne){const Ae=U[Z];try{if(Ae)yield D[Ae];else{const We=(yield Ja(N)).find(Ot=>Ot.measurementId===Z);We&&(yield D[We.appId])}}catch(Ke){pn.error(Ke)}b("config",Z,ne)})).apply(this,arguments)}function Xa(b,D,N,U,Z){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,k.Z)(function*(b,D,N,U,Z){try{let ne=[];if(Z&&Z.send_to){let Ae=Z.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ke=yield Ja(N);for(const We of Ae){const Ot=Ke.find(qr=>qr.measurementId===We),tn=Ot&&D[Ot.appId];if(!tn){ne=[];break}ne.push(tn)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),b("event",U,Z||{})}catch(ne){pn.error(ne)}})).apply(this,arguments)}function Wu(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(cd))return D;return null}const wr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Yo=new class{constructor(D={},N=1e3){this.throttleMetadata=D,this.intervalMillis=N}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,N){this.throttleMetadata[D]=N}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Sg(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function eu(b){return qu.apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*(b){var D;const{appId:N,apiKey:U}=b,Z={method:"GET",headers:Sg(U)},ne=Ll.replace("{app-id}",N),Ae=yield fetch(ne,Z);if(200!==Ae.status&&304!==Ae.status){let Ke="";try{const We=yield Ae.json();(null===(D=We.error)||void 0===D?void 0:D.message)&&(Ke=We.error.message)}catch(We){}throw wr.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ke})}return Ae.json()})).apply(this,arguments)}function Wi(b){return qs.apply(this,arguments)}function qs(){return(qs=(0,k.Z)(function*(b,D=Yo,N){const{appId:U,apiKey:Z,measurementId:ne}=b.options;if(!U)throw wr.create("no-app-id");if(!Z){if(ne)return{measurementId:ne,appId:U};throw wr.create("no-api-key")}const Ae=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Zu;return setTimeout((0,k.Z)(function*(){Ke.abort()}),void 0!==N?N:6e4),tu({appId:U,apiKey:Z,measurementId:ne},Ae,Ke,D)})).apply(this,arguments)}function tu(b,D,N){return zu.apply(this,arguments)}function zu(){return(zu=(0,k.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:N},U,Z=Yo){const{appId:ne,measurementId:Ae}=b;try{yield hd(U,D)}catch(Ke){if(Ae)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ne,measurementId:Ae};throw Ke}try{const Ke=yield eu(b);return Z.deleteThrottleMetadata(ne),Ke}catch(Ke){if(!xg(Ke)){if(Z.deleteThrottleMetadata(ne),Ae)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ne,measurementId:Ae};throw Ke}const We=503===Number(Ke.customData.httpStatus)?(0,re.$s)(N,Z.intervalMillis,30):(0,re.$s)(N,Z.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+We,backoffCount:N+1};return Z.setThrottleMetadata(ne,Ot),pn.debug(`Calling attemptFetch again in ${We} millis`),tu(b,Ot,U,Z)}})).apply(this,arguments)}function hd(b,D){return new Promise((N,U)=>{const Z=Math.max(D-Date.now(),0),ne=setTimeout(N,Z);b.addEventListener(()=>{clearTimeout(ne),U(wr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function xg(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Zu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function dr(){return xn.apply(this,arguments)}function xn(){return(xn=(0,k.Z)(function*(){if(!(0,re.hl)())return pn.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return pn.warn(wr.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function qi(){return(qi=(0,k.Z)(function*(b,D,N,U,Z,ne,Ae){var Ke;const We=Wi(b);We.then(Rn=>{N[Rn.measurementId]=Rn.appId,b.options.measurementId&&Rn.measurementId!==b.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rn=>pn.error(Rn)),D.push(We);const Ot=dr().then(Rn=>{if(Rn)return U.getId()}),[tn,qr]=yield Promise.all([We,Ot]);Wu()||Tg(ne,tn.measurementId),Z("js",new Date);const br=null!==(Ke=null==Ae?void 0:Ae.config)&&void 0!==Ke?Ke:{};return br.origin="firebase",br.update=!0,null!=qr&&(br[$u]=qr),Z("config",tn.measurementId,br),tn.measurementId})).apply(this,arguments)}class Jo{constructor(D){this.app=D}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},Bl=[];const fd={};let Tn,Qe,nu="dataLayer",On=!1;function To(b,D,N){!function(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),N=wr.create("invalid-analytics-context",{errorInfo:D});pn.warn(N.message)}}();const U=b.options.appId;if(!U)throw wr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw wr.create("no-api-key");pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[U])throw wr.create("already-exists",{id:U});if(!On){!function(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(nu);const{wrappedGtag:ne,gtagCore:Ae}=function(b,D,N,U,Z){let ne=function(...Ae){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ne=window[Z]),window[Z]=function(b,D,N,U){function ne(){return(ne=(0,k.Z)(function*(Ae,Ke,We){try{"event"===Ae?yield Xa(b,D,N,Ke,We):"config"===Ae?yield Ko(b,D,N,U,Ke,We):b("set",Ke)}catch(Ot){pn.error(Ot)}})).apply(this,arguments)}return function(Ae,Ke,We){return ne.apply(this,arguments)}}(ne,b,D,N),{gtagCore:ne,wrappedGtag:window[Z]}}(Pr,Bl,fd,nu,"gtag");Qe=ne,Tn=Ae,On=!0}return Pr[U]=function(b,D,N,U,Z,ne,Ae){return qi.apply(this,arguments)}(b,Bl,fd,D,Tn,nu,N),new Jo(b)}function kn(){return(kn=(0,k.Z)(function*(b,D,N,U,Z){if(Z&&Z.global)b("event",N,U);else{const ne=yield D;b("event",N,Object.assign(Object.assign({},U),{send_to:ne}))}})).apply(this,arguments)}function fn(){return zi.apply(this,arguments)}function zi(){return(zi=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}const $l="@firebase/analytics";(0,ue._registerComponent)(new fe.wA(Ws,(D,{options:N})=>To(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ue._registerComponent)(new fe.wA("analytics-internal",function(D){try{const N=D.getProvider(Ws).getImmediate();return{logEvent:(U,Z,ne)=>function(b,D,N,U){b=(0,re.m9)(b),function(b,D,N,U,Z){return kn.apply(this,arguments)}(Qe,Pr[b.app.options.appId],D,N,U).catch(Z=>pn.error(Z))}(N,U,Z,ne)}}catch(N){throw wr.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ue.registerVersion)($l,"0.7.4"),(0,ue.registerVersion)($l,"0.7.4","esm2017");var Rt=F(4408),Ao=F(7565);const gd=new class extends Ao.v{}(class extends Rt.o{constructor(D,N){super(D,N),this.scheduler=D,this.work=N}schedule(D,N=0){return N>0?super.schedule(D,N):(this.delay=N,this.state=D,this.scheduler.flush(this),this)}execute(D,N){return N>0||this.closed?super.execute(D,N):this._execute(D,N)}requestAsyncId(D,N,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,N,U):D.flush(this)}});var ti=F(4986),Yu=F(8505),ta=F(9468),iu=F(5363);const tf=new f.GfV("7.2.0"),md="__angularfire_symbol__analyticsIsSupported",nf="__angularfire_symbol__remoteConfigIsSupported",Fr="__angularfire_symbol__messagingIsSupported";function Xu(b,D,N){if(D){if(1===D.length)return D[0];const ne=D.filter(Ae=>Ae.app===N);if(1===ne.length)return ne[0]}return N.container.getProvider(b).getImmediate({optional:!0})}globalThis[md]||(globalThis[md]=fn().then(b=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=b)),globalThis[Fr]||(globalThis[Fr]=Fl().then(b=>globalThis.__angularfire_symbol__messagingIsSupportedValue=b)),globalThis[nf]||(globalThis[nf]=Na().then(b=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=b));const _d=(b,D)=>{const N=D?[D]:(0,Q.C6)(),U=[];return N.forEach(Z=>{Z.container.getProvider(b).instances.forEach(Ae=>{U.includes(Ae)||U.push(Ae)})}),U};function na(){}class el{constructor(D,N=gd){this.zone=D,this.delegate=N}now(){return this.delegate.now()}schedule(D,N,U){const Z=this.zone;return this.delegate.schedule(function(Ae){Z.runGuarded(()=>{D.apply(this,[Ae])})},N,U)}}class ql{constructor(D){this.zone=D,this.task=null}call(D,N){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",na,{},na,na)),N.pipe((0,Yu.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let rf=(()=>{class b{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new el(Zone.current)),this.insideAngular=N.run(()=>new el(Zone.current,ti.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(N){return new(N||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Zi(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Ir(b){return Zi(),function(b){return function(N){return(N=N.lift(new ql(b.ngZone))).pipe((0,ta.R)(b.outsideAngular),(0,iu.Q)(b.insideAngular))}}(Zi())(b)}},2090:(nt,Ee,F)=>{"use strict";F.d(Ee,{BH:()=>Ve,LL:()=>de,ZR:()=>Oe,gQ:()=>Te,zI:()=>ce,hu:()=>Q,g5:()=>k,US:()=>fe,tV:()=>le,h$:()=>ie,$s:()=>Kt,r3:()=>cn,Sg:()=>Ie,ne:()=>tr,p$:()=>$,vZ:()=>$t,ZB:()=>H,gK:()=>it,pd:()=>Ui,m9:()=>bl,z$:()=>Ue,GJ:()=>Ar,jU:()=>K,ru:()=>ae,d:()=>ge,xb:()=>An,w1:()=>$e,hl:()=>ut,uI:()=>Le,UG:()=>oe,Yr:()=>He,b$:()=>Ce,G6:()=>qe,Mn:()=>xe,w9:()=>_r,cI:()=>Un,UI:()=>Yr,xO:()=>Bo,zd:()=>fi,DV:()=>Uo,ug:()=>qt,dS:()=>xr,Pz:()=>wt,Dv:()=>Sr,Wj:()=>xt,lb:()=>Nt,eu:()=>ee});const Q=function(W,B){if(!W)throw k(B)},k=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ue=function(W){const B=[];let q=0;for(let ye=0;ye<W.length;ye++){let te=W.charCodeAt(ye);te<128?B[q++]=te:te<2048?(B[q++]=te>>6|192,B[q++]=63&te|128):55296==(64512&te)&&ye+1<W.length&&56320==(64512&W.charCodeAt(ye+1))?(te=65536+((1023&te)<<10)+(1023&W.charCodeAt(++ye)),B[q++]=te>>18|240,B[q++]=te>>12&63|128,B[q++]=te>>6&63|128,B[q++]=63&te|128):(B[q++]=te>>12|224,B[q++]=te>>6&63|128,B[q++]=63&te|128)}return B},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,B){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let te=0;te<W.length;te+=3){const Ze=W[te],lt=te+1<W.length,Yt=lt?W[te+1]:0,or=te+2<W.length,Dn=or?W[te+2]:0;let ar=(15&Yt)<<2|Dn>>6,po=63&Dn;or||(po=64,lt||(ar=64)),ye.push(q[Ze>>2],q[(3&Ze)<<4|Yt>>4],q[ar],q[po])}return ye.join("")},encodeString(W,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(W):this.encodeByteArray(ue(W),B)},decodeString(W,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(W):function(W){const B=[];let q=0,ye=0;for(;q<W.length;){const te=W[q++];if(te<128)B[ye++]=String.fromCharCode(te);else if(te>191&&te<224){const Ze=W[q++];B[ye++]=String.fromCharCode((31&te)<<6|63&Ze)}else if(te>239&&te<365){const or=((7&te)<<18|(63&W[q++])<<12|(63&W[q++])<<6|63&W[q++])-65536;B[ye++]=String.fromCharCode(55296+(or>>10)),B[ye++]=String.fromCharCode(56320+(1023&or))}else{const Ze=W[q++],lt=W[q++];B[ye++]=String.fromCharCode((15&te)<<12|(63&Ze)<<6|63&lt)}}return B.join("")}(this.decodeStringToByteArray(W,B))},decodeStringToByteArray(W,B){this.init_();const q=B?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let te=0;te<W.length;){const Ze=q[W.charAt(te++)],Yt=te<W.length?q[W.charAt(te)]:0;++te;const Dn=te<W.length?q[W.charAt(te)]:64;++te;const Vt=te<W.length?q[W.charAt(te)]:64;if(++te,null==Ze||null==Yt||null==Dn||null==Vt)throw Error();ye.push(Ze<<2|Yt>>4),64!==Dn&&(ye.push(Yt<<4&240|Dn>>2),64!==Vt&&ye.push(Dn<<6&192|Vt))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},ie=function(W){const B=ue(W);return fe.encodeByteArray(B,!0)},se=function(W){return ie(W).replace(/\./g,"")},le=function(W){try{return fe.decodeString(W,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function $(W){return H(void 0,W)}function H(W,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return B}for(const q in B)!B.hasOwnProperty(q)||!X(q)||(W[q]=H(W[q],B[q]));return W}function X(W){return"__proto__"!==W}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,q)=>{this.resolve=B,this.reject=q})}wrapCallback(B){return(q,ye)=>{q?this.reject(q):this.resolve(ye),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(q):B(q,ye))}}}function Ie(W,B){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=B||"demo-project",te=W.iat||0,Ze=W.sub||W.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:te,exp:te+3600,auth_time:te,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},W);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(lt)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function K(){return"object"==typeof self&&self.self===self}function ae(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ge(){return Ue().indexOf("Electron/")>=0}function $e(){const W=Ue();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function xe(){return Ue().indexOf("MSAppHost/")>=0}function He(){return!1}function qe(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ut(){return"object"==typeof indexedDB}function ee(){return new Promise((W,B)=>{try{let q=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(ye);te.onsuccess=()=>{te.result.close(),q||self.indexedDB.deleteDatabase(ye),W(!0)},te.onupgradeneeded=()=>{q=!1},te.onerror=()=>{var Ze;B((null===(Ze=te.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(q){B(q)}})}function ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(B,q,ye){super(q),this.code=B,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(B,q,ye){this.service=B,this.serviceName=q,this.errors=ye}create(B,...q){const ye=q[0]||{},te=`${this.service}/${B}`,Ze=this.errors[B],lt=Ze?function(W,B){return W.replace(Wt,(q,ye)=>{const te=B[ye];return null!=te?String(te):`<${ye}?>`})}(Ze,ye):"Error";return new Oe(te,`${this.serviceName}: ${lt} (${te}).`,ye)}}const Wt=/\{\$([^}]+)}/g;function Un(W){return JSON.parse(W)}function wt(W){return JSON.stringify(W)}const gt=function(W){let B={},q={},ye={},te="";try{const Ze=W.split(".");B=Un(le(Ze[0])||""),q=Un(le(Ze[1])||""),te=Ze[2],ye=q.d||{},delete q.d}catch(Ze){}return{header:B,claims:q,data:ye,signature:te}},_r=function(W){const q=gt(W).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},Ar=function(W){const B=gt(W).claims;return"object"==typeof B&&!0===B.admin};function cn(W,B){return Object.prototype.hasOwnProperty.call(W,B)}function Uo(W,B){if(Object.prototype.hasOwnProperty.call(W,B))return W[B]}function An(W){for(const B in W)if(Object.prototype.hasOwnProperty.call(W,B))return!1;return!0}function Yr(W,B,q){const ye={};for(const te in W)Object.prototype.hasOwnProperty.call(W,te)&&(ye[te]=B.call(q,W[te],te,W));return ye}function $t(W,B){if(W===B)return!0;const q=Object.keys(W),ye=Object.keys(B);for(const te of q){if(!ye.includes(te))return!1;const Ze=W[te],lt=B[te];if(bn(Ze)&&bn(lt)){if(!$t(Ze,lt))return!1}else if(Ze!==lt)return!1}for(const te of ye)if(!q.includes(te))return!1;return!0}function bn(W){return null!==W&&"object"==typeof W}function Bo(W){const B=[];for(const[q,ye]of Object.entries(W))Array.isArray(ye)?ye.forEach(te=>{B.push(encodeURIComponent(q)+"="+encodeURIComponent(te))}):B.push(encodeURIComponent(q)+"="+encodeURIComponent(ye));return B.length?"&"+B.join("&"):""}function fi(W){const B={};return W.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[te,Ze]=ye.split("=");B[decodeURIComponent(te)]=decodeURIComponent(Ze)}}),B}function Ui(W){const B=W.indexOf("?");if(!B)return"";const q=W.indexOf("#",B);return W.substring(B,q>0?q:void 0)}class Te{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,q){q||(q=0);const ye=this.W_;if("string"==typeof B)for(let Vt=0;Vt<16;Vt++)ye[Vt]=B.charCodeAt(q)<<24|B.charCodeAt(q+1)<<16|B.charCodeAt(q+2)<<8|B.charCodeAt(q+3),q+=4;else for(let Vt=0;Vt<16;Vt++)ye[Vt]=B[q]<<24|B[q+1]<<16|B[q+2]<<8|B[q+3],q+=4;for(let Vt=16;Vt<80;Vt++){const ar=ye[Vt-3]^ye[Vt-8]^ye[Vt-14]^ye[Vt-16];ye[Vt]=4294967295&(ar<<1|ar>>>31)}let Dn,Gr,te=this.chain_[0],Ze=this.chain_[1],lt=this.chain_[2],Yt=this.chain_[3],or=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(Dn=Yt^Ze&(lt^Yt),Gr=1518500249):(Dn=Ze^lt^Yt,Gr=1859775393):Vt<60?(Dn=Ze&lt|Yt&(Ze|lt),Gr=2400959708):(Dn=Ze^lt^Yt,Gr=3395469782);const ar=(te<<5|te>>>27)+Dn+or+Gr+ye[Vt]&4294967295;or=Yt,Yt=lt,lt=4294967295&(Ze<<30|Ze>>>2),Ze=te,te=ar}this.chain_[0]=this.chain_[0]+te&4294967295,this.chain_[1]=this.chain_[1]+Ze&4294967295,this.chain_[2]=this.chain_[2]+lt&4294967295,this.chain_[3]=this.chain_[3]+Yt&4294967295,this.chain_[4]=this.chain_[4]+or&4294967295}update(B,q){if(null==B)return;void 0===q&&(q=B.length);const ye=q-this.blockSize;let te=0;const Ze=this.buf_;let lt=this.inbuf_;for(;te<q;){if(0===lt)for(;te<=ye;)this.compress_(B,te),te+=this.blockSize;if("string"==typeof B){for(;te<q;)if(Ze[lt]=B.charCodeAt(te),++lt,++te,lt===this.blockSize){this.compress_(Ze),lt=0;break}}else for(;te<q;)if(Ze[lt]=B[te],++lt,++te,lt===this.blockSize){this.compress_(Ze),lt=0;break}}this.inbuf_=lt,this.total_+=q}digest(){const B=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let te=this.blockSize-1;te>=56;te--)this.buf_[te]=255&q,q/=256;this.compress_(this.buf_);let ye=0;for(let te=0;te<5;te++)for(let Ze=24;Ze>=0;Ze-=8)B[ye]=this.chain_[te]>>Ze&255,++ye;return B}}function tr(W,B){const q=new Bn(W,B);return q.subscribe.bind(q)}class Bn{constructor(B,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{B(this)}).catch(ye=>{this.error(ye)})}next(B){this.forEachObserver(q=>{q.next(B)})}error(B){this.forEachObserver(q=>{q.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,q,ye){let te;if(void 0===B&&void 0===q&&void 0===ye)throw new Error("Missing Observer.");te=function(W,B){if("object"!=typeof W||null===W)return!1;for(const q of["next","error","complete"])if(q in W&&"function"==typeof W[q])return!0;return!1}(B)?B:{next:B,error:q,complete:ye},void 0===te.next&&(te.next=pi),void 0===te.error&&(te.error=pi),void 0===te.complete&&(te.complete=pi);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?te.error(this.finalError):te.complete()}catch(lt){}}),this.observers.push(te),Ze}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,B)}sendOne(B,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{q(this.observers[B])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pi(){}const Sr=function(W,B,q,ye){let te;if(ye<B?te="at least "+B:ye>q&&(te=0===q?"none":"no more than "+q),te)throw new Error(W+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+te+".")};function it(W,B){return`${W} failed: ${B} argument `}function xt(W,B,q,ye){if((!ye||q)&&"function"!=typeof q)throw new Error(it(W,B)+"must be a valid function.")}function Nt(W,B,q,ye){if((!ye||q)&&("object"!=typeof q||null===q))throw new Error(it(W,B)+"must be a valid context object.")}const xr=function(W){const B=[];let q=0;for(let ye=0;ye<W.length;ye++){let te=W.charCodeAt(ye);if(te>=55296&&te<=56319){const Ze=te-55296;ye++,Q(ye<W.length,"Surrogate pair missing trail surrogate."),te=65536+(Ze<<10)+(W.charCodeAt(ye)-56320)}te<128?B[q++]=te:te<2048?(B[q++]=te>>6|192,B[q++]=63&te|128):te<65536?(B[q++]=te>>12|224,B[q++]=te>>6&63|128,B[q++]=63&te|128):(B[q++]=te>>18|240,B[q++]=te>>12&63|128,B[q++]=te>>6&63|128,B[q++]=63&te|128)}return B},qt=function(W){let B=0;for(let q=0;q<W.length;q++){const ye=W.charCodeAt(q);ye<128?B++:ye<2048?B+=2:ye>=55296&&ye<=56319?(B+=4,q++):B+=3}return B};function Kt(W,B=1e3,q=2){const ye=B*Math.pow(q,W),te=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+te)}function bl(W){return W&&W._delegate?W._delegate:W}},4556:(nt,Ee,F)=>{"use strict";var f=F(5e3);let Q=null;function k(){return Q}const ie=new f.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.LFG)(H)},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let H=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:function(){return new H((0,f.LFG)(ie))},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ie(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ue(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function(n){const e=(0,f.LFG)(ie).location;return new Ce((0,f.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const ae=new f.OlP("appBaseHref");let Ce=(()=>{class n extends oe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ie(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(ae,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ge=(()=>{class n extends oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ie(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(ae,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ue(qe(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ie,n.stripTrailingSlash=Ue,n.\u0275fac=function(t){return new(t||n)(f.LFG(oe),f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return new $e((0,f.LFG)(oe),(0,f.LFG)(se))},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}var ee=(()=>((ee=ee||{})[ee.Decimal=0]="Decimal",ee[ee.Percent=1]="Percent",ee[ee.Currency=2]="Currency",ee[ee.Scientific=3]="Scientific",ee))(),ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function An(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(void 0===r){if(e===de.CurrencyDecimal)return t[f.wAp.NumberSymbols][de.Decimal];if(e===de.CurrencyGroup)return t[f.wAp.NumberSymbols][de.Group]}return r}const Ui=f.kL8,dn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function mn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class nr{}let jn=(()=>{class n extends nr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ui(r||this.locale)(t)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function yt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class _o{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new _o(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),yr(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{yr(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function yr(n,e){n.context.$implicit=e.item}let Bi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){an("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){an("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mi{constructor(){this.$implicit=null,this.ngIf=null}}function an(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let xl=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function(n,e,t){return function(n,e,t,r,i,u,c=!1){let p="",y=!1;if(isFinite(n)){let C=function(n){let r,i,u,c,p,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(i<0&&(i=u),i+=+e.slice(u+1),e=e.substring(0,u)):i<0&&(i=e.length),u=0;"0"===e.charAt(u);u++);if(u===(p=e.length))r=[0],i=1;else{for(p--;"0"===e.charAt(p);)p--;for(i-=u,r=[],c=0;u<=p;u++,c++)r[c]=Number(e.charAt(u))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(C=function(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(C));let A=e.minInt,x=e.minFrac,P=e.maxFrac;if(u){const It=u.match(dn);if(null===It)throw new Error(`${u} is not a valid digit info`);const Xt=It[1],St=It[3],qn=It[5];null!=Xt&&(A=mn(Xt)),null!=St&&(x=mn(St)),null!=qn?P=mn(qn):null!=St&&x>P&&(P=x)}!function(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const u=Math.min(Math.max(e,i),t);let c=u+n.integerLen,p=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let x=c;x<r.length;x++)r[x]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=u+1),r[0]=0;for(let x=1;x<c;x++)r[x]=0}if(p>=5)if(c-1<0){for(let x=0;x>c;x--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,u);i++)r.push(0);let y=0!==u;const C=e+n.integerLen,A=r.reduceRight(function(x,P,V,z){return z[V]=(P+=x)<10?P:P-10,y&&(0===z[V]&&V>=C?z.pop():y=!1),P>=10?1:0},0);A&&(r.unshift(A),n.integerLen++)}(C,x,P);let V=C.digits,z=C.integerLen;const ve=C.exponent;let ke=[];for(y=V.every(It=>!It);z<A;z++)V.unshift(0);for(;z<0;z++)V.unshift(0);z>0?ke=V.splice(z,V.length):(ke=V,V=[0]);const rt=[];for(V.length>=e.lgSize&&rt.unshift(V.splice(-e.lgSize,V.length).join(""));V.length>e.gSize;)rt.unshift(V.splice(-e.gSize,V.length).join(""));V.length&&rt.unshift(V.join("")),p=rt.join(An(t,r)),ke.length&&(p+=An(t,i)+ke.join("")),ve&&(p+=An(t,de.Exponential)+"+"+ve)}else p=An(t,de.Infinity);return p=n<0&&!y?e.negPre+p+e.negSuf:e.posPre+p+e.posSuf,p}(n,function(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],u=r[1],c=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],p=c[0],y=c[1]||"";t.posPre=p.substr(0,p.indexOf("#"));for(let A=0;A<y.length;A++){const x=y.charAt(A);"0"===x?t.minFrac=t.maxFrac=A+1:"#"===x?t.maxFrac=A+1:t.posSuf+=x}const C=p.split(",");if(t.gSize=C[1]?C[1].length:0,t.lgSize=C[2]||C[1]?(C[2]||C[1]).length:0,u){const A=i.length-t.posPre.length-t.posSuf.length,x=u.indexOf("#");t.negPre=u.substr(0,x).replace(/'/g,""),t.negSuf=u.substr(x+A).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function(n,e){return(0,f.cg1)(n)[f.wAp.NumberFormats][e]}(e,ee.Decimal),An(e,de.MinusSign)),e,de.Group,de.Decimal,t)}(function(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(u){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,f.AaK)(n)}'`)}(n,u.message)}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16))},n.\u0275pipe=f.Yjl({name:"number",type:n,pure:!0}),n})();let Nu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:nr,useClass:jn}]}),n})();function vr(n){return"server"===n}let zh=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Oa((0,f.LFG)(ie),window)}),n})();class Oa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yo(this.window.history)||yo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function yo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Bs{}class vo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new vo,Q||(Q=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Mr=Mr||document.querySelector("base"),Mr?Mr.getAttribute("href"):null);return null==t?null:function(n){Pn=Pn||document.createElement("a"),Pn.setAttribute("href",n);const e=Pn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Mr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yt(document.cookie,e)}}let Pn,Mr=null;const wo=new f.OlP("TRANSITION_ID"),Qt=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[wo,ie,f.zs3],multi:!0}];class ds{static init(){(0,f.VLi)(new ds)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ka=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Co=new f.OlP("EventManagerPlugins");let Nr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Co),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Fa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let js=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ye=(()=>{class n extends js{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ku),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ku))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ku(n){k().remove(n)}const La={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},zo=/%COMP%/g;function hs(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?hs(n,i,t):(i=i.replace(zo,n),t.push(i))}return t}function _n(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Hs=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new cr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Pl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Ol(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=hs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nr),f.LFG(Ye),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class cr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(La[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=La[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=La[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_n(r)):this.eventManager.addEventListener(e,t,_n(r))}}class Pl extends cr{constructor(e,t,r,i){super(e),this.component=r;const u=hs(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(zo,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(zo,i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ol extends cr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=hs(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ba=(()=>{class n extends Fa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const bo=["alt","control","meta","shift"],vi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ja={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},$s={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Gi=(()=>{class n extends Fa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(bo.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ja.hasOwnProperty(e)&&(e=ja[e]))}return vi[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bo.forEach(u=>{u!=i&&$s[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Zo=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){vo.makeCurrent(),ds.init()},multi:!0},{provide:ie,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),Bu=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:Co,useClass:Ba,multi:!0,deps:[ie,f.R0b,f.Lbi]},{provide:Co,useClass:Gi,multi:!0,deps:[ie]},{provide:Hs,useClass:Hs,deps:[Nr,Ye,f.AFp]},{provide:f.FYo,useExisting:Hs},{provide:js,useExisting:Ye},{provide:Ye,useClass:Ye,deps:[ie]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Nr,useClass:Nr,deps:[Co,f.R0b]},{provide:Bs,useClass:ka,deps:[]}];let qa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:wo,useExisting:f.AFp},Qt]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Bu,imports:[Nu,f.hGG]}),n})();function Wu(n,e){if(1&n){var t=f.EpF();f.TgZ(0,"a",11),f.NdJ("keyup.enter",function(){return f.CHM(t),f.oxw(3),f.MAs(1).previous()})("click",function(){return f.CHM(t),f.oxw(3),f.MAs(1).previous()}),f._uU(1),f.TgZ(2,"span",12),f._uU(3),f.qZA(),f.qZA()}if(2&n){var r=f.oxw(3);f.uIk("aria-label",r.previousLabel+" "+r.screenReaderPageLabel),f.xp6(1),f.hij(" ",r.previousLabel," "),f.xp6(2),f.Oqu(r.screenReaderPageLabel)}}function dd(n,e){if(1&n&&(f.TgZ(0,"span"),f._uU(1),f.TgZ(2,"span",12),f._uU(3),f.qZA(),f.qZA()),2&n){var t=f.oxw(3);f.xp6(1),f.hij(" ",t.previousLabel," "),f.xp6(2),f.Oqu(t.screenReaderPageLabel)}}function wr(n,e){if(1&n&&(f.TgZ(0,"li",8),f.YNc(1,Wu,4,3,"a",9),f.YNc(2,dd,4,2,"span",10),f.qZA()),2&n){f.oxw(2);var t=f.MAs(1);f.ekj("disabled",t.isFirstPage()),f.xp6(1),f.Q6J("ngIf",1<t.getCurrent()),f.xp6(1),f.Q6J("ngIf",t.isFirstPage())}}function Ul(n,e){if(1&n){var t=f.EpF();f.TgZ(0,"a",11),f.NdJ("keyup.enter",function(){f.CHM(t);var c=f.oxw().$implicit;return f.oxw(2),f.MAs(1).setCurrent(c.value)})("click",function(){f.CHM(t);var c=f.oxw().$implicit;return f.oxw(2),f.MAs(1).setCurrent(c.value)}),f.TgZ(1,"span",12),f._uU(2),f.qZA(),f.TgZ(3,"span"),f._uU(4),f.ALo(5,"number"),f.qZA(),f.qZA()}if(2&n){var r=f.oxw().$implicit,i=f.oxw(2);f.xp6(2),f.hij("",i.screenReaderPageLabel," "),f.xp6(2),f.Oqu("..."===r.label?r.label:f.xi3(5,2,r.label,""))}}function Jh(n,e){if(1&n&&(f.ynx(0),f.TgZ(1,"span",12),f._uU(2),f.qZA(),f.TgZ(3,"span"),f._uU(4),f.ALo(5,"number"),f.qZA(),f.BQk()),2&n){var t=f.oxw().$implicit,r=f.oxw(2);f.xp6(2),f.hij("",r.screenReaderCurrentLabel," "),f.xp6(2),f.Oqu("..."===t.label?t.label:f.xi3(5,2,t.label,""))}}function Xh(n,e){if(1&n&&(f.TgZ(0,"li"),f.YNc(1,Ul,6,5,"a",9),f.YNc(2,Jh,6,5,"ng-container",10),f.qZA()),2&n){var t=e.$implicit;f.oxw(2);var r=f.MAs(1);f.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),f.xp6(1),f.Q6J("ngIf",r.getCurrent()!==t.value),f.xp6(1),f.Q6J("ngIf",r.getCurrent()===t.value)}}function Yo(n,e){if(1&n){var t=f.EpF();f.TgZ(0,"a",11),f.NdJ("keyup.enter",function(){return f.CHM(t),f.oxw(3),f.MAs(1).next()})("click",function(){return f.CHM(t),f.oxw(3),f.MAs(1).next()}),f._uU(1),f.TgZ(2,"span",12),f._uU(3),f.qZA(),f.qZA()}if(2&n){var r=f.oxw(3);f.uIk("aria-label",r.nextLabel+" "+r.screenReaderPageLabel),f.xp6(1),f.hij(" ",r.nextLabel," "),f.xp6(2),f.Oqu(r.screenReaderPageLabel)}}function Sg(n,e){if(1&n&&(f.TgZ(0,"span"),f._uU(1),f.TgZ(2,"span",12),f._uU(3),f.qZA(),f.qZA()),2&n){var t=f.oxw(3);f.xp6(1),f.hij(" ",t.nextLabel," "),f.xp6(2),f.Oqu(t.screenReaderPageLabel)}}function eu(n,e){if(1&n&&(f.TgZ(0,"li",13),f.YNc(1,Yo,4,3,"a",9),f.YNc(2,Sg,4,2,"span",10),f.qZA()),2&n){f.oxw(2);var t=f.MAs(1);f.ekj("disabled",t.isLastPage()),f.xp6(1),f.Q6J("ngIf",!t.isLastPage()),f.xp6(1),f.Q6J("ngIf",t.isLastPage())}}function qu(n,e){if(1&n&&(f.TgZ(0,"ul",3),f.YNc(1,wr,3,4,"li",4),f.TgZ(2,"li",5),f._uU(3),f.qZA(),f.YNc(4,Xh,3,6,"li",6),f.YNc(5,eu,3,4,"li",7),f.qZA()),2&n){var t=f.oxw(),r=f.MAs(1);f.ekj("responsive",t.responsive),f.uIk("aria-label",t.screenReaderPaginationLabel),f.xp6(1),f.Q6J("ngIf",t.directionLinks),f.xp6(2),f.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),f.xp6(1),f.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),f.xp6(1),f.Q6J("ngIf",t.directionLinks)}}"undefined"!=typeof window&&window;var Wi=function(){function n(){this.change=new f.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}return n.prototype.defaultId=function(){return this.DEFAULT_ID},n.prototype.register=function(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)},n.prototype.updateInstance=function(e){var t=!1;for(var r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t},n.prototype.getCurrentPage=function(e){if(this.instances[e])return this.instances[e].currentPage},n.prototype.setCurrentPage=function(e,t){if(this.instances[e]){var r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}},n.prototype.setTotalItems=function(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))},n.prototype.setItemsPerPage=function(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))},n.prototype.getInstance=function(e){return void 0===e&&(e=this.DEFAULT_ID),this.instances[e]?this.clone(this.instances[e]):{}},n.prototype.clone=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return n.\u0275fac(e)}}),n}(),tu=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},zu=Number.MAX_SAFE_INTEGER,hd=function(){function n(e){this.service=e,this.state={}}return n.prototype.transform=function(e,t){if(!(e instanceof Array)){var r=t.id||this.service.defaultId();return this.state[r]?this.state[r].slice:e}var p,y,i=t.totalItems&&t.totalItems!==e.length,u=this.createInstance(e,t),c=u.id,C=u.itemsPerPage,A=this.service.register(u);if(!i&&e instanceof Array){if(this.stateIsIdentical(c,e,p=(u.currentPage-1)*(C=+C||zu),y=p+C))return this.state[c].slice;var P=e.slice(p,y);return this.saveState(c,e,P,p,y),this.service.change.emit(c),P}return A&&this.service.change.emit(c),this.saveState(c,e,e,p,y),e},n.prototype.createInstance=function(e,t){return this.checkConfig(t),{id:null!=t.id?t.id:this.service.defaultId(),itemsPerPage:+t.itemsPerPage||0,currentPage:+t.currentPage||1,totalItems:+t.totalItems||e.length}},n.prototype.checkConfig=function(e){var r=["itemsPerPage","currentPage"].filter(function(i){return!(i in e)});if(0<r.length)throw new Error("PaginatePipe: Argument is missing the following required properties: "+r.join(", "))},n.prototype.saveState=function(e,t,r,i,u){this.state[e]={collection:t,size:t.length,slice:r,start:i,end:u}},n.prototype.stateIsIdentical=function(e,t,r,i){var u=this.state[e];return!!u&&!(u.size!==t.length||u.start!==r||u.end!==i)&&u.slice.every(function(p,y){return p===t[r+y]})},n=function(n,e,t,r){var c,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,e,t,r);else for(var p=n.length-1;p>=0;p--)(c=n[p])&&(u=(i<3?c(u):i>3?c(e,t,u):c(e,t))||u);return i>3&&u&&Object.defineProperty(e,t,u),u}([tu("design:paramtypes",[Wi])],n),n.\u0275fac=function(t){return new(t||n)(f.Y36(Wi,16))},n.\u0275pipe=f.Yjl({name:"paginate",type:n,pure:!1}),n}(),dr=function(n,e,t,r){var c,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,e,t,r);else for(var p=n.length-1;p>=0;p--)(c=n[p])&&(u=(i<3?c(u):i>3?c(e,t,u):c(e,t))||u);return i>3&&u&&Object.defineProperty(e,t,u),u},xn=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};function Qo(n){return!!n&&"false"!==n}var qi=function(){function n(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new f.vpe,this.pageBoundsCorrection=new f.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}return Object.defineProperty(n.prototype,"directionLinks",{get:function(){return this._directionLinks},set:function(e){this._directionLinks=Qo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoHide",{get:function(){return this._autoHide},set:function(e){this._autoHide=Qo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"responsive",{get:function(){return this._responsive},set:function(e){this._responsive=Qo(e)},enumerable:!0,configurable:!0}),n.prototype.trackByIndex=function(e){return e},dr([(0,f.IIB)(),xn("design:type",String)],n.prototype,"id",void 0),dr([(0,f.IIB)(),xn("design:type",Number)],n.prototype,"maxSize",void 0),dr([(0,f.IIB)(),xn("design:type",Boolean),xn("design:paramtypes",[Boolean])],n.prototype,"directionLinks",null),dr([(0,f.IIB)(),xn("design:type",Boolean),xn("design:paramtypes",[Boolean])],n.prototype,"autoHide",null),dr([(0,f.IIB)(),xn("design:type",Boolean),xn("design:paramtypes",[Boolean])],n.prototype,"responsive",null),dr([(0,f.IIB)(),xn("design:type",String)],n.prototype,"previousLabel",void 0),dr([(0,f.IIB)(),xn("design:type",String)],n.prototype,"nextLabel",void 0),dr([(0,f.IIB)(),xn("design:type",String)],n.prototype,"screenReaderPaginationLabel",void 0),dr([(0,f.IIB)(),xn("design:type",String)],n.prototype,"screenReaderPageLabel",void 0),dr([(0,f.IIB)(),xn("design:type",String)],n.prototype,"screenReaderCurrentLabel",void 0),dr([(0,f.r_U)(),xn("design:type",f.vpe)],n.prototype,"pageChange",void 0),dr([(0,f.r_U)(),xn("design:type",f.vpe)],n.prototype,"pageBoundsCorrection",void 0),n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{maxSize:"maxSize",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:3,vars:3,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],[4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(f.TgZ(0,"pagination-template",0,1),f.NdJ("pageChange",function(c){return r.pageChange.emit(c)})("pageBoundsCorrection",function(c){return r.pageBoundsCorrection.emit(c)}),f.YNc(2,qu,6,9,"ul",2),f.qZA()),2&t){var i=f.MAs(1);f.Q6J("id",r.id)("maxSize",r.maxSize),f.xp6(2),f.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},directives:function(){return[Bl,Bi,Xr]},pipes:function(){return[xl]},styles:["\n.ngx-pagination {\n  margin-left: 0;\n  margin-bottom: 1rem; }\n  .ngx-pagination::before, .ngx-pagination::after {\n    content: ' ';\n    display: table; }\n  .ngx-pagination::after {\n    clear: both; }\n  .ngx-pagination li {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    margin-right: 0.0625rem;\n    border-radius: 0; }\n  .ngx-pagination li {\n    display: inline-block; }\n  .ngx-pagination a,\n  .ngx-pagination button {\n    color: #0a0a0a; \n    display: block;\n    padding: 0.1875rem 0.625rem;\n    border-radius: 0; }\n    .ngx-pagination a:hover,\n    .ngx-pagination button:hover {\n      background: #e6e6e6; }\n  .ngx-pagination .current {\n    padding: 0.1875rem 0.625rem;\n    background: #2199e8;\n    color: #fefefe;\n    cursor: default; }\n  .ngx-pagination .disabled {\n    padding: 0.1875rem 0.625rem;\n    color: #cacaca;\n    cursor: default; } \n    .ngx-pagination .disabled:hover {\n      background: transparent; }\n  .ngx-pagination a, .ngx-pagination button {\n    cursor: pointer; }\n\n.ngx-pagination .pagination-previous a::before,\n.ngx-pagination .pagination-previous.disabled::before { \n  content: '\xab';\n  display: inline-block;\n  margin-right: 0.5rem; }\n\n.ngx-pagination .pagination-next a::after,\n.ngx-pagination .pagination-next.disabled::after {\n  content: '\xbb';\n  display: inline-block;\n  margin-left: 0.5rem; }\n\n.ngx-pagination .show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0); }\n.ngx-pagination .small-screen {\n  display: none; }\n@media screen and (max-width: 601px) {\n  .ngx-pagination.responsive .small-screen {\n    display: inline-block; } \n  .ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next) {\n    display: none; }\n}\n  "],encapsulation:2,changeDetection:0}),n}(),Jo=function(n,e,t,r){var c,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,e,t,r);else for(var p=n.length-1;p>=0;p--)(c=n[p])&&(u=(i<3?c(u):i>3?c(e,t,u):c(e,t))||u);return i>3&&u&&Object.defineProperty(e,t,u),u},Pr=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},Bl=function(){function n(e,t){var r=this;this.service=e,this.changeDetectorRef=t,this.maxSize=7,this.pageChange=new f.vpe,this.pageBoundsCorrection=new f.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(function(i){r.id===i&&(r.updatePageLinks(),r.changeDetectorRef.markForCheck(),r.changeDetectorRef.detectChanges())})}return n.prototype.ngOnInit=function(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()},n.prototype.ngOnChanges=function(e){this.updatePageLinks()},n.prototype.ngOnDestroy=function(){this.changeSub.unsubscribe()},n.prototype.previous=function(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)},n.prototype.next=function(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)},n.prototype.isFirstPage=function(){return 1===this.getCurrent()},n.prototype.isLastPage=function(){return this.getLastPage()===this.getCurrent()},n.prototype.setCurrent=function(e){this.pageChange.emit(e)},n.prototype.getCurrent=function(){return this.service.getCurrentPage(this.id)},n.prototype.getLastPage=function(){var e=this.service.getInstance(this.id);return e.totalItems<1?1:Math.ceil(e.totalItems/e.itemsPerPage)},n.prototype.getTotalItems=function(){return this.service.getInstance(this.id).totalItems},n.prototype.checkValidId=function(){null==this.service.getInstance(this.id).id&&console.warn('PaginationControlsDirective: the specified id "'+this.id+'" does not match any registered PaginationInstance')},n.prototype.updatePageLinks=function(){var e=this,t=this.service.getInstance(this.id),r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(function(){e.pageBoundsCorrection.emit(r),e.pages=e.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,e.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)},n.prototype.outOfBoundCorrection=function(e){var t=Math.ceil(e.totalItems/e.itemsPerPage);return t<e.currentPage&&0<t?t:e.currentPage<1?1:e.currentPage},n.prototype.createPageArray=function(e,t,r,i){i=+i;for(var u=[],c=Math.max(Math.ceil(r/t),1),p=Math.ceil(i/2),y=e<=p,C=c-p<e,A=!y&&!C,x=i<c,P=1;P<=c&&P<=i;){var z=this.calculatePageNumber(P,e,i,c);u.push({label:x&&(2===P&&(A||C)||P===i-1&&(A||y))?"...":z,value:z}),P++}return u},n.prototype.calculatePageNumber=function(e,t,r,i){var u=Math.ceil(r/2);return e===r?i:1===e?e:r<i?i-u<t?i-r+e:u<t?t-u+e:e:e},Jo([(0,f.IIB)(),Pr("design:type",String)],n.prototype,"id",void 0),Jo([(0,f.IIB)(),Pr("design:type",Number)],n.prototype,"maxSize",void 0),Jo([(0,f.r_U)(),Pr("design:type",f.vpe)],n.prototype,"pageChange",void 0),Jo([(0,f.r_U)(),Pr("design:type",f.vpe)],n.prototype,"pageBoundsCorrection",void 0),(n=Jo([Pr("design:paramtypes",[Wi,f.sBO])],n)).\u0275fac=function(t){return new(t||n)(f.Y36(Wi),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{maxSize:"maxSize",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[f.TTD]}),n}(),nu=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Wi],imports:[[Nu]]}),n}(),wi=F(7669),Tn=F(8996);function Qe(...n){const e=(0,wi.yG)(n);return(0,Tn.D)(n,e)}var On=F(8306),Er=F(5577),Do=F(576);function To(n,e){return(0,Do.m)(e)?(0,Er.z)(n,e,1):(0,Er.z)(n,1)}var At=F(4482),kn=F(5403);function Or(n,e){return(0,At.e)((t,r)=>{let i=0;t.subscribe(new kn.Q(r,u=>n.call(e,u,i++)&&r.next(u)))})}var ct=F(4004);class fs{}class ps{}class kr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof kr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new kr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof kr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===u.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ru{encodeKey(e){return Xo(e)}encodeValue(e){return Xo(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ei=/%(\d[a-f0-9])/gi,pd={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Xo(n){return encodeURIComponent(n).replace(Ei,(e,t)=>{var r;return null!==(r=pd[t])&&void 0!==r?r:e})}function fn(n){return`${n}`}class zi{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ru,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],y=t.get(c)||[];y.push(p),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new zi({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(fn(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(fn(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Mg{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Ng(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Hl(n){return"undefined"!=typeof Blob&&n instanceof Blob}function $l(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ku{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new kr),this.context||(this.context=new Mg),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new zi,this.urlWithParams=t}serializeBody(){return null===this.body?null:Ng(this.body)||Hl(this.body)||$l(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof zi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$l(this.body)?null:Hl(this.body)?this.body.type||null:Ng(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,u=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let C=e.headers||this.headers,A=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(C=Object.keys(e.setHeaders).reduce((P,V)=>P.set(V,e.setHeaders[V]),C)),e.setParams&&(A=Object.keys(e.setParams).reduce((P,V)=>P.set(V,e.setParams[V]),A)),new Ku(r,i,c,{params:A,headers:C,context:x,reportProgress:y,responseType:u,withCredentials:p})}}var Rt=(()=>((Rt=Rt||{})[Rt.Sent=0]="Sent",Rt[Rt.UploadProgress=1]="UploadProgress",Rt[Rt.ResponseHeader=2]="ResponseHeader",Rt[Rt.DownloadProgress=3]="DownloadProgress",Rt[Rt.Response=4]="Response",Rt[Rt.User=5]="User",Rt))();class gs{constructor(e,t=200,r="OK"){this.headers=e.headers||new kr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ao extends gs{constructor(e={}){super(e),this.type=Rt.ResponseHeader}clone(e={}){return new Ao({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gl extends gs{constructor(e={}){super(e),this.type=Rt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gd extends gs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Cr(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ti=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof Ku)u=t;else{let y,C;y=i.headers instanceof kr?i.headers:new kr(i.headers),i.params&&(C=i.params instanceof zi?i.params:new zi({fromObject:i.params})),u=new Ku(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:C,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Qe(u).pipe(To(y=>this.handler.handle(y)));if(t instanceof Ku||"events"===i.observe)return c;const p=c.pipe(Or(y=>y instanceof Gl));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,ct.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,ct.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,ct.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe((0,ct.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new zi).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Cr(i,r))}post(t,r,i={}){return this.request("POST",t,Cr(i,r))}put(t,r,i={}){return this.request("PUT",t,Cr(i,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Yu{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const ta=new f.OlP("HTTP_INTERCEPTORS");let iu=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const su=/^\)\]\}',?\n/;let Og=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new On.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,z)=>i.setRequestHeader(V,z.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const u=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const V=1223===i.status?204:i.status,z=i.statusText||"OK",ve=new kr(i.getAllResponseHeaders()),ke=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Ao({headers:ve,status:V,statusText:z,url:ke}),c},y=()=>{let{headers:V,status:z,statusText:ve,url:ke}=p(),rt=null;204!==z&&(rt=void 0===i.response?i.responseText:i.response),0===z&&(z=rt?200:0);let It=z>=200&&z<300;if("json"===t.responseType&&"string"==typeof rt){const Xt=rt;rt=rt.replace(su,"");try{rt=""!==rt?JSON.parse(rt):null}catch(St){rt=Xt,It&&(It=!1,rt={error:St,text:rt})}}It?(r.next(new Gl({body:rt,headers:V,status:z,statusText:ve,url:ke||void 0})),r.complete()):r.error(new gd({error:rt,headers:V,status:z,statusText:ve,url:ke||void 0}))},C=V=>{const{url:z}=p(),ve=new gd({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:z||void 0});r.error(ve)};let A=!1;const x=V=>{A||(r.next(p()),A=!0);let z={type:Rt.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(z.total=V.total),"text"===t.responseType&&!!i.responseText&&(z.partialText=i.responseText),r.next(z)},P=V=>{let z={type:Rt.UploadProgress,loaded:V.loaded};V.lengthComputable&&(z.total=V.total),r.next(z)};return i.addEventListener("load",y),i.addEventListener("error",C),i.addEventListener("timeout",C),i.addEventListener("abort",C),t.reportProgress&&(i.addEventListener("progress",x),null!==u&&i.upload&&i.upload.addEventListener("progress",P)),i.send(u),r.next({type:Rt.Sent}),()=>{i.removeEventListener("error",C),i.removeEventListener("abort",C),i.removeEventListener("load",y),i.removeEventListener("timeout",C),t.reportProgress&&(i.removeEventListener("progress",x),null!==u&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Bs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Wl=new f.OlP("XSRF_COOKIE_NAME"),Xu=new f.OlP("XSRF_HEADER_NAME");class _d{}let na=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=yt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie),f.LFG(f.Lbi),f.LFG(Wl))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),el=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_d),f.LFG(Xu))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ql=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(ta,[]);this.chain=r.reduceRight((i,u)=>new Yu(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ps),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),tl=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:el,useClass:iu}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Wl,useValue:t.cookieName}:[],t.headerName?{provide:Xu,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[el,{provide:ta,useExisting:el,multi:!0},{provide:_d,useClass:na},{provide:Wl,useValue:"XSRF-TOKEN"},{provide:Xu,useValue:"X-XSRF-TOKEN"}]}),n})(),zs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ti,{provide:fs,useClass:ql},Og,{provide:ps,useExisting:Og}],imports:[[tl.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var Ir=F(7579);class Wr extends Ir.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:sf}=Array,{getPrototypeOf:yd,prototype:b,keys:D}=Object;function N(n){if(1===n.length){const e=n[0];if(sf(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&yd(n)===b}(e)){const t=D(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Z=F(4671);const{isArray:ne}=Array;function Ke(n){return(0,ct.U)(e=>function(n,e){return ne(e)?n(...e):n(e)}(n,e))}function We(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Ot=F(9672);function br(n,e,t){n?(0,Ot.f)(t,n,e):e()}const Dr=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ms=F(8189);function ni(...n){return(0,ms.J)(1)((0,Tn.D)(n,(0,wi.yG)(n)))}var Ci=F(8421);function au(n){return new On.y(e=>{(0,Ci.Xf)(n()).subscribe(e)})}var _s=F(515),Kl=F(727);function vd(){return(0,At.e)((n,e)=>{let t=null;n._refCount++;const r=new kn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dy extends On.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,At.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Kl.w0;const t=this.getSubject();e.add(this.source.subscribe(new kn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Kl.w0.EMPTY)}return e}refCount(){return vd()(this)}}function Fn(n,e){return(0,At.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe(new kn.Q(r,y=>{null==i||i.unsubscribe();let C=0;const A=u++;(0,Ci.Xf)(n(y,A)).subscribe(i=new kn.Q(r,x=>r.next(e?e(y,x,A,C++):x),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var ra=F(5698);function wd(...n){const e=(0,wi.yG)(n);return(0,At.e)((t,r)=>{(e?ni(n,t,e):ni(n,t)).subscribe(r)})}function gE(n,e,t,r,i){return(u,c)=>{let p=t,y=e,C=0;u.subscribe(new kn.Q(c,A=>{const x=C++;y=p?n(y,A,x):(p=!0,A),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function Zs(n,e){return(0,At.e)(gE(n,e,arguments.length>=2,!0))}function ia(n){return(0,At.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe(new kn.Q(t,void 0,void 0,c=>{u=(0,Ci.Xf)(n(c,ia(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function kg(n){return n<=0?()=>_s.E:(0,At.e)((e,t)=>{let r=[];e.subscribe(new kn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ed(n=hy){return(0,At.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hy(){return new Dr}function Fg(n){return(0,At.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function So(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Or((i,u)=>n(i,u,r)):Z.y,(0,ra.q)(1),t?Fg(e):Ed(()=>new Dr))}var Zn=F(8505);class ys{constructor(e,t){this.id=e,this.url=t}}class of extends ys{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ks extends ys{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Id extends ys{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class af extends ys{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uf extends ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lf extends ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lg extends ys{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vg extends ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cf extends ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ug{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bg{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fy{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ys{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yl{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class py{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ut="primary";class df{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ql(n){return new df(n)}const gy="ngNavigationCancelingError";function bd(n){const e=Error("NavigationCancelingError: "+n);return e[gy]=!0,e}function _y(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!vy(n[i],e[i]))return!1;return!0}function vy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Dd(n){return Array.prototype.concat.apply([],n)}function Jl(n){return n.length>0?n[n.length-1]:null}function vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ri(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):Qe(n)}const hf={exact:function Cy(n,e,t){if(!sa(n.segments,e.segments)||!pf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Cy(n.children[r],e.children[r],t))return!1;return!0},subset:Td},ff={exact:function(n,e){return Qs(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vy(n[t],e[t]))},ignored:()=>!0};function Ey(n,e,t){return hf[t.paths](n.root,e.root,t.matrixParams)&&ff[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Td(n,e,t){return rl(n,e,e.segments,t)}function rl(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!sa(i,t)||e.hasChildren()||!pf(i,t,r))}if(n.segments.length===t.length){if(!sa(n.segments,t)||!pf(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Td(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(sa(n.segments,i)&&pf(n.segments,i,r)&&n.children[Ut])&&rl(n.children[Ut],e,u,r)}}function pf(n,e,t){return e.every((r,i)=>ff[t](n[i].parameters,r.parameters))}class uu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ql(this.queryParams)),this._queryParamMap}toString(){return by.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,vn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tc(this)}}class lu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ql(this.parameters)),this._parameterMap}toString(){return Wg(this)}}function sa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class gf{}class ec{parse(e){const t=new qg(e);return new uu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${vs(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ad(t)}=${Ad(i)}`).join("&"):`${Ad(t)}=${Ad(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const by=new ec;function tc(n){return n.segments.map(e=>Wg(e)).join("/")}function vs(n,e){if(!n.hasChildren())return tc(n);if(e){const t=n.children[Ut]?vs(n.children[Ut],!1):"",r=[];return vn(n.children,(i,u)=>{u!==Ut&&r.push(`${u}:${vs(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return vn(n.children,(r,i)=>{i===Ut&&(t=t.concat(e(r,i)))}),vn(n.children,(r,i)=>{i!==Ut&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ut?[vs(n.children[Ut],!1)]:[`${i}:${vs(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ut]?`${tc(n)}/${t[0]}`:`${tc(n)}/(${t.join("//")})`}}function Hn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ad(n){return Hn(n).replace(/%3B/gi,";")}function nc(n){return Hn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cu(n){return decodeURIComponent(n)}function Gg(n){return cu(n.replace(/\+/g,"%20"))}function Wg(n){return`${nc(n.path)}${function(n){return Object.keys(n).map(e=>`;${nc(e)}=${nc(n[e])}`).join("")}(n.parameters)}`}const Ty=/^[^\/()?;=#]+/;function rc(n){const e=n.match(Ty);return e?e[0]:""}const _E=/^[^=?&#]+/,zr=/^[^&#]+/;class qg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ut]=new Bt(e,t)),r}parseSegment(){const e=rc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new lu(cu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rc(this.remaining);i&&(r=i,this.capture(r))}e[cu(t)]=cu(r)}parseQueryParam(e){const t=function(n){const e=n.match(_E);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(zr);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Gg(t),u=Gg(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ut);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Ut]:new Bt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Sd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Kn(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Kn(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=du(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return du(e,this._root).map(t=>t.value)}}function Kn(n,e){if(n===e.value)return e;for(const t of e.children){const r=Kn(n,t);if(r)return r}return null}function du(n,e){if(n===e.value)return[e];for(const t of e.children){const r=du(n,t);if(r.length)return r.unshift(e),r}return[]}class ws{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function oa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xd extends Sd{constructor(e,t){super(e),this.snapshot=t,Ef(this,e)}toString(){return this.snapshot.toString()}}function vf(n,e){const t=function(n,e){const c=new Rd([],{},{},"",{},Ut,e,null,n.root,-1,{});return new wf("",new ws(c,[]))}(n,e),r=new Wr([new lu("",{})]),i=new Wr({}),u=new Wr({}),c=new Wr({}),p=new Wr(""),y=new Js(r,i,c,p,u,Ut,e,t.root);return y.snapshot=t.root,new xd(new ws(y,[]),t)}class Js{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(e=>Ql(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(e=>Ql(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Rd{constructor(e,t,r,i,u,c,p,y,C,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=C,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ql(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ql(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wf extends Sd{constructor(e,t){super(t),this.url=e,Ef(this,t)}toString(){return Md(this._root)}}function Ef(n,e){e.value._routerState=n,e.children.forEach(t=>Ef(n,t))}function Md(n){const e=n.children.length>0?` { ${n.children.map(Md).join(", ")} } `:"";return`${n.value}${e}`}function Cf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Qs(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function If(n,e){const t=Qs(n.params,e.params)&&function(n,e){return sa(n,e)&&n.every((t,r)=>Qs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||If(n.parent,e.parent))}function hu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hu(n,r,i);return hu(n,r)})}(n,e,t);return new ws(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>hu(n,p)),c}}const r=function(n){return new Js(new Wr(n.url),new Wr(n.params),new Wr(n.queryParams),new Wr(n.fragment),new Wr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>hu(n,u));return new ws(r,i)}}function Nd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function oc(n){return"object"==typeof n&&null!=n&&n.outlets}function Pd(n,e,t,r,i){let u={};return r&&vn(r,(c,p)=>{u[p]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),new uu(t.root===n?e:Od(t.root,n,e),u,i)}function Od(n,e,t){const r={};return vn(n.children,(i,u)=>{r[u]=i===e?t:Od(i,e,t)}),new Bt(n.segments,r)}class kd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(oc);if(i&&i!==Jl(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Fd(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return Ld(n,e,t);const r=function(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(oc(p))break;const y=`${p}`,C=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&C&&"object"==typeof C&&void 0===C.outlets){if(!xy(y,C,c))return u;r+=2}else{if(!xy(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bt(n.segments.slice(0,r.pathIndex),{});return u.children[Ut]=new Bt(n.segments.slice(r.pathIndex),n.children),Ld(u,0,i)}return r.match&&0===i.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?uc(n,e,t):r.match?Ld(n,0,i):uc(n,e,t)}function Ld(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function(n){return oc(n[0])?n[0].outlets:{[Ut]:n}}(t),i={};return vn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Fd(n.children[c],e,u))}),vn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Bt(n.segments,i)}}function uc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(oc(u)){const y=il(u.outlets);return new Bt(r,y)}if(0===i&&Nd(t[0])){r.push(new lu(n.segments[e].path,Yi(t[0]))),i++;continue}const c=oc(u)?u.outlets[Ut]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&Nd(p)?(r.push(new lu(c,Yi(p))),i+=2):(r.push(new lu(c,{})),i++)}return new Bt(r,{})}function il(n){const e={};return vn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=uc(new Bt([],{}),0,t))}),e}function Yi(n){const e={};return vn(n,(t,r)=>e[r]=`${t}`),e}function xy(n,e,t){return n==t.path&&Qs(e,t.parameters)}class xf{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=oa(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),vn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=oa(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=oa(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=oa(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new py(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ys(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Cf(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Cf(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Qi{constructor(e,t){this.routes=e,this.module=t}}function Xs(n){return"function"==typeof n}function Yn(n){return n instanceof uu}const Es=Symbol("INITIAL_VALUE");function aa(){return Fn(n=>function(...n){const e=(0,wi.yG)(n),t=(0,wi.jO)(n),{args:r,keys:i}=N(n);if(0===r.length)return(0,Tn.D)([],e);const u=new On.y(function(n,e,t=Z.y){return r=>{br(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)br(e,()=>{const C=(0,Tn.D)(n[y],e);let A=!1;C.subscribe(new kn.Q(r,x=>{u[y]=x,A||(A=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>We(i,c):Z.y));return t?u.pipe(Ke(t)):u}(n.map(e=>e.pipe((0,ra.q)(1),wd(Es)))).pipe(Zs((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Es?i:(u===Es&&(r=!0),r||!1!==u&&c!==t.length-1&&!Yn(u)?i:u),e)},Es),Or(e=>e!==Es),(0,ct.U)(e=>Yn(e)?e:!0===e),(0,ra.q)(1)))}class Rf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new sl,this.attachRef=null}}class sl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Rf,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ua=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Ut,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new Mf(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sl),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Mf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Js?this.route:e===sl?this.childContexts:this.parent.get(e,t)}}let Nf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[ua],encapsulation:2}),n})();function Qg(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];_(r,h(e,r))}}function _(n,e){n.children&&Qg(n.children,e)}function h(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function g(n){const e=n.children&&n.children.map(g),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ut&&(t.component=Nf),t}function w(n){return n.outlet||Ut}function T(n,e){const t=n.filter(r=>w(r)===e);return t.push(...n.filter(r=>w(r)!==e)),t}const R={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function j(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},R):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||_y)(t,n,e);if(!u)return Object.assign({},R);const c={};vn(u.posParams,(y,C)=>{c[C]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function J(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Mt(n,e,r)&&w(r)!==Ut)}(n,t,r)){const c=new Bt(e,function(n,e,t,r){const i={};i[Ut]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&w(u)!==Ut){const c=new Bt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[w(u)]=c}return i}(n,e,r,new Bt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Mt(n,e,r))}(n,t,r)){const c=new Bt(n.segments,function(n,e,t,r,i,u){const c={};for(const p of r)if(Mt(n,t,p)&&!i[w(p)]){const y=new Bt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[w(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Bt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Mt(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qn(n,e,t,r){return!!(w(n)===r||r!==Ut&&Mt(e,t,n))&&("**"===n.path||j(e,n,t).matched)}function to(n,e,t){return 0===e.length&&!n.children[t]}class ii{constructor(e){this.segmentGroup=e||null}}class lc{constructor(e){this.urlTree=e}}function ol(n){return new On.y(e=>e.error(new ii(n)))}function Pf(n){return new On.y(e=>e.error(new lc(n)))}function al(n){return new On.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Bd{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=J(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ut).pipe((0,ct.U)(u=>this.createUrlTree(cc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ia(u=>{if(u instanceof lc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ii?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ut).pipe((0,ct.U)(i=>this.createUrlTree(cc(i),e.queryParams,e.fragment))).pipe(ia(i=>{throw i instanceof ii?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Bt([],{[Ut]:e}):e;return new uu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ct.U)(u=>new Bt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Tn.D)(i).pipe(To(u=>{const c=r.children[u],p=T(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,ct.U)(y=>({segment:y,outlet:u})))}),Zs((u,c)=>(u[c.outlet]=c.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Or((i,u)=>n(i,u,r)):Z.y,kg(1),t?Fg(e):Ed(()=>new Dr))}())}expandSegment(e,t,r,i,u,c){return(0,Tn.D)(r).pipe(To(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(ia(C=>{if(C instanceof ii)return Qe(null);throw C}))),So(p=>!!p),ia((p,y)=>{if(p instanceof Dr||"EmptyError"===p.name){if(to(t,i,u))return Qe(new Bt([],{}));throw new ii(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return Qn(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):ol(t):ol(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Pf(u):this.lineralizeSegments(r,u).pipe((0,Er.z)(c=>{const p=new Bt(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,lastChild:C,positionalParamSegments:A}=j(t,i,u);if(!p)return ol(t);const x=this.applyRedirectCommands(y,i.redirectTo,A);return i.redirectTo.startsWith("/")?Pf(x):this.lineralizeSegments(i,x).pipe((0,Er.z)(P=>this.expandSegment(e,t,r,P.concat(u.slice(C)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Qe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ct.U)(P=>(r._loadedConfig=P,new Bt(i,{})))):Qe(new Bt(i,{}));const{matched:c,consumedSegments:p,lastChild:y}=j(t,r,i);if(!c)return ol(t);const C=i.slice(y);return this.getChildConfig(e,r,i).pipe((0,Er.z)(x=>{const P=x.module,V=x.routes,{segmentGroup:z,slicedSegments:ve}=J(t,p,C,V),ke=new Bt(z.segments,z.children);if(0===ve.length&&ke.hasChildren())return this.expandChildren(P,V,ke).pipe((0,ct.U)(St=>new Bt(p,St)));if(0===V.length&&0===ve.length)return Qe(new Bt(p,{}));const rt=w(r)===u;return this.expandSegment(P,ke,V,ve,rt?Ut:u,!0).pipe((0,ct.U)(Xt=>new Bt(p.concat(Xt.segments),Xt.children)))}))}getChildConfig(e,t,r){return t.children?Qe(new Qi(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Qe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Er.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,ct.U)(u=>(t._loadedConfig=u,u))):(n=t,new On.y(e=>e.error(bd(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):Qe(new Qi([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Qe(i.map(c=>{const p=e.get(c);let y;if((n=p)&&Xs(n.canLoad))y=p.canLoad(t,r);else{if(!Xs(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}var n;return ri(y)})).pipe(aa(),(0,Zn.b)(c=>{if(!Yn(c))return;const p=bd(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,ct.U)(c=>!0===c)):Qe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Qe(r);if(i.numberOfChildren>1||!i.children[Ut])return al(e.redirectTo);i=i.children[Ut]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new uu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return vn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return vn(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new Bt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function cc(n){const e={};for(const r of Object.keys(n.children)){const u=cc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Ut]){const e=n.children[Ut];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}class dc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hc{constructor(e,t){this.component=e,this.route=t}}function vE(n,e,t){const r=n._root;return gu(r,e?e._root:null,t,[r.value])}function Ff(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function gu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=oa(e);return n.children.forEach(c=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!sa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!sa(n.url,e.url)||!Qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!If(n,e)||!Qs(n.queryParams,e.queryParams);default:return!If(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new dc(r)):(u.data=c.data,u._resolvedData=c._resolvedData),gu(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new hc(p.outlet.component,c))}else c&&Lf(e,p,i),i.canActivateChecks.push(new dc(r)),gu(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),vn(u,(c,p)=>Lf(c,t.getContext(p),i)),i}function Lf(n,e,t){const r=oa(n),i=n.value;vn(r,(u,c)=>{Lf(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new hc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class GD{}function DE(n){return new On.y(e=>e.error(n))}class WD{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=J(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ut);if(null===t)return null;const r=new Rd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ut,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ws(r,t),u=new wf(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=zg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=T(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const i=AE(r);return i.sort((e,t)=>e.value.outlet===Ut?-1:t.value.outlet===Ut?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return to(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Qn(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const V=r.length>0?Jl(r).parameters:{};u=new Rd(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xE(e),w(e),e.component,e,Py(t),SE(t)+r.length,RE(e))}else{const V=j(t,e,r);if(!V.matched)return null;c=V.consumedSegments,p=r.slice(V.lastChild),u=new Rd(c,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xE(e),w(e),e.component,e,Py(t),SE(t)+c.length,RE(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:C,slicedSegments:A}=J(t,c,p,y.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);var n;if(0===A.length&&C.hasChildren()){const V=this.processChildren(y,C);return null===V?null:[new ws(u,V)]}if(0===y.length&&0===A.length)return[new ws(u,[])];const x=w(e)===i,P=this.processSegment(y,C,A,x?Ut:i);return null===P?null:[new ws(u,P)]}}function zD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function AE(n){const e=[],t=new Set;for(const r of n){if(!zD(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=AE(r.children);e.push(new ws(r.value,i))}return e.filter(r=>!t.has(r))}function Py(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function SE(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function xE(n){return n.data||{}}function RE(n){return n.resolve||{}}function Cs(n){return Fn(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,ct.U)(()=>e)):Qe(e)})}class Oy extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ro=new f.OlP("ROUTES");class em{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ct.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Qi(Dd(c.injector.get(Ro,void 0,f.XFs.Self|f.XFs.Optional)).map(g),c)}),ia(u=>{throw t._loader$=void 0,u}));return t._loader$=new dy(i,()=>new Ir.x).pipe(vd()),t._loader$}loadModuleFactory(e){return ri(e()).pipe((0,Er.z)(t=>t instanceof f.YKP?Qe(t):(0,Tn.D)(this.compiler.compileModuleAsync(t))))}}class ky{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function WM(n){throw n}function FE(n,e,t){return e.parse("/")}function KD(n,e){return Qe(null)}const tm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ir.x,this.errorHandler=WM,this.malformedUriErrorHandler=FE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:KD,afterPreactivation:KD},this.urlHandlingStrategy=new ky,this.routeReuseStrategy=new Oy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const x=c.get(f.R0b);this.isNgZoneEnabled=x instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=new uu(new Bt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new em(c,p,P=>this.triggerEvent(new Ug(P)),P=>this.triggerEvent(new Bg(P))),this.routerState=vf(this.currentUrlTree,this.rootComponentType),this.transitions=new Wr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Or(i=>0!==i.id),(0,ct.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Fn(i=>{let u=!1,c=!1;return Qe(i).pipe((0,Zn.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fn(p=>{const y=this.browserUrlTree.toString(),C=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Hd(p.source)&&(this.browserUrlTree=p.extractedUrl),Qe(p).pipe(Fn(x=>{const P=this.transitions.getValue();return r.next(new of(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),P!==this.transitions.getValue()?_s.E:Promise.resolve(x)}),function(n,e,t,r){return Fn(i=>function(n,e,t,r,i){return new Bd(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ct.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zn.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Er.z)(u=>function(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new WD(n,e,t,r,i,u).recognize();return null===c?DE(new GD):Qe(c)}catch(c){return DE(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,ct.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zn.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(V,x)}this.browserUrlTree=x.urlAfterRedirects}const P=new uf(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(P)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:z,restoredState:ve,extras:ke}=p,rt=new of(P,this.serializeUrl(V),z,ve);r.next(rt);const It=vf(V,this.rootComponentType).snapshot;return Qe(Object.assign(Object.assign({},p),{targetSnapshot:It,urlAfterRedirects:V,extras:Object.assign(Object.assign({},ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),_s.E}),Cs(p=>{const{targetSnapshot:y,id:C,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:P,replaceUrl:V}}=p;return this.hooks.beforePreactivation(y,{navigationId:C,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!P,replaceUrl:!!V})}),(0,Zn.b)(p=>{const y=new lf(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,ct.U)(p=>Object.assign(Object.assign({},p),{guards:vE(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Er.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Qe(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Tn.D)(n).pipe((0,Er.z)(i=>function(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Qe(u.map(p=>{const y=Ff(p,e,i);let C;if(function(n){return n&&Xs(n.canDeactivate)}(y))C=ri(y.canDeactivate(n,e,t,r));else{if(!Xs(y))throw new Error("Invalid CanDeactivate guard");C=ri(y(n,e,t,r))}return C.pipe(So())})).pipe(aa()):Qe(!0)}(i.component,i.route,t,e,r)),So(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Er.z)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Tn.D)(e).pipe(To(i=>ni(function(n,e){return null!==n&&e&&e(new fy(n)),Qe(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new Yl(n)),Qe(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>au(()=>Qe(c.guards.map(y=>{const C=Ff(y,c.node,t);let A;if(function(n){return n&&Xs(n.canActivateChild)}(C))A=ri(C.canActivateChild(r,n));else{if(!Xs(C))throw new Error("Invalid CanActivateChild guard");A=ri(C(r,n))}return A.pipe(So())})).pipe(aa())));return Qe(u).pipe(aa())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const i=r.map(u=>au(()=>{const c=Ff(u,e,t);let p;if(function(n){return n&&Xs(n.canActivate)}(c))p=ri(c.canActivate(e,n));else{if(!Xs(c))throw new Error("Invalid CanActivate guard");p=ri(c(e,n))}return p.pipe(So())}));return Qe(i).pipe(aa())}(n,i.route,t))),So(i=>!0!==i,!0))}(r,u,n,e):Qe(p)),(0,ct.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Zn.b)(p=>{if(Yn(p.guardsResult)){const C=bd(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw C.url=p.guardsResult,C}const y=new Lg(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Or(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Cs(p=>{if(p.guards.canActivateChecks.length)return Qe(p).pipe((0,Zn.b)(y=>{const C=new Vg(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}),Fn(y=>{let C=!1;return Qe(y).pipe(function(n,e){return(0,Er.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Qe(t);let u=0;return(0,Tn.D)(i).pipe(To(c=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Qe({});const u={};return(0,Tn.D)(i).pipe((0,Er.z)(c=>function(n,e,t,r){const i=Ff(n,e,r);return ri(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Zn.b)(p=>{u[c]=p}))),kg(1),(0,Er.z)(()=>Object.keys(u).length===i.length?Qe(u):_s.E))}(n._resolve,n,e,r).pipe((0,ct.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),zg(n,t).resolve),null)))}(c.route,r,n,e)),(0,Zn.b)(()=>u++),kg(1),(0,Er.z)(c=>u===i.length?Qe(t):_s.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zn.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Zn.b)(y=>{const C=new cf(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}))}),Cs(p=>{const{targetSnapshot:y,id:C,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:P,replaceUrl:V}}=p;return this.hooks.afterPreactivation(y,{navigationId:C,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!P,replaceUrl:!!V})}),(0,ct.U)(p=>{const y=function(n,e,t){const r=hu(n,e._root,t?t._root:void 0);return new xd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,Zn.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,ct.U)(r=>(new xf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Zn.b)({next(){u=!0},complete(){u=!0}}),function(n){return(0,At.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),ia(p=>{if(c=!0,function(n){return n&&n[gy]}(p)){const y=Yn(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const C=new Id(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(C),y?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hd(i.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new af(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(C){i.reject(C)}}return _s.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Qg(t),this.config=t.map(g),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,C=i||this.routerState.root,A=y?this.currentUrlTree.fragment:c;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,i){if(0===t.length)return Pd(e.root,e.root,e,r,i);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new kd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return vn(u.outlets,(y,C)=>{p[C]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new kd(t,e,r)}(t);if(u.toRoot())return Pd(e.root,new Bt([],{}),e,r,i);const c=function(n,e,t){if(n.isAbsolute)return new Tf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Tf(u,u===e.root,0)}const r=Nd(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Tf(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?Ld(c.segmentGroup,c.index,u.commands):Fd(c.segmentGroup,c.index,u.commands);return Pd(c.segmentGroup,p,e,r,i)}(C,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Yn(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},tm):!1===r?Object.assign({},nm):r,Yn(t))return Ey(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Ey(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ks(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,y,C;if(this.disposed)return Promise.resolve(!1);const A=this.transitions.value,x=Hd(r)&&A&&!Hd(A.source),P=A.rawUrl.toString()===t.toString(),V=A.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(x&&P&&V)return Promise.resolve(!0);let ve,ke,rt;c?(ve=c.resolve,ke=c.reject,rt=c.promise):rt=new Promise((St,qn)=>{ve=St,ke=qn});const It=++this.navigationId;let Xt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Xt=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):Xt=0,this.setTransition({id:It,targetPageId:Xt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:ve,reject:ke,promise:rt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),rt.catch(St=>Promise.reject(St))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Id(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Hd(n){return"imperative"!==n}let rm=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ir.x,this.subscription=t.events.subscribe(u=>{u instanceof Ks&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:$d(this.skipLocationChange),replaceUrl:$d(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$d(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(bi),f.Y36(Js),f.Y36(oe))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function $d(n){return""===n||!!n}class Ly{}class VE{preload(e,t){return Qe(null)}}let JD=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new em(i,r,y=>t.triggerEvent(new Ug(y)),y=>t.triggerEvent(new Bg(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Or(t=>t instanceof Ks),To(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Tn.D)(i).pipe((0,ms.J)(),(0,ct.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Qe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Er.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bi),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Ly))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),im=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof of?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ks&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new jg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const fc=new f.OlP("ROUTER_CONFIGURATION"),sm=new f.OlP("ROUTER_FORROOT_GUARD"),zM=[$e,{provide:gf,useClass:ec},{provide:bi,useFactory:function(n,e,t,r,i,u,c={},p,y){const C=new bi(null,n,e,t,r,i,Dd(u));return p&&(C.urlHandlingStrategy=p),y&&(C.routeReuseStrategy=y),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,C),c.enableTracing&&C.events.subscribe(A=>{var x,P;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(P=console.groupEnd)||void 0===P||P.call(console)}),C},deps:[gf,sl,$e,f.zs3,f.Sil,Ro,fc,[class{},new f.FiY],[class{},new f.FiY]]},sl,{provide:Js,useFactory:function(n){return n.routerState.root},deps:[bi]},JD,VE,class{preload(e,t){return t().pipe(ia(()=>Qe(null)))}},{provide:fc,useValue:{enableTracing:!1}}];function ZM(){return new f.PXZ("Router",bi)}let eT=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[zM,tT(t),{provide:sm,useFactory:QM,deps:[[bi,new f.FiY,new f.tp0]]},{provide:fc,useValue:r||{}},{provide:oe,useFactory:YM,deps:[se,[new f.tBr(ae),new f.FiY],fc]},{provide:im,useFactory:KM,deps:[bi,zh,fc]},{provide:Ly,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:VE},{provide:f.PXZ,multi:!0,useFactory:ZM},[la,{provide:f.ip1,multi:!0,useFactory:Vy,deps:[la]},{provide:Uy,useFactory:nT,deps:[la]},{provide:f.tb,multi:!0,useExisting:Uy}]]}}static forChild(t){return{ngModule:n,providers:[tT(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(sm,8),f.LFG(bi,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function KM(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new im(n,e,t)}function YM(n,e,t={}){return t.useHash?new ge(n,e):new Ce(n,e)}function QM(n){return"guarded"}function tT(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Ro,multi:!0,useValue:n}]}let la=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ir.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(bi),c=this.injector.get(fc);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Qe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(fc),i=this.injector.get(JD),u=this.injector.get(im),c=this.injector.get(bi),p=this.injector.get(f.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Vy(n){return n.appInitializer.bind(n)}function nT(n){return n.bootstrapListener.bind(n)}const Uy=new f.OlP("Router Initializer");let Vf=(()=>{class n{constructor(t){this.http=t,this.firebaseurl="https://movies-app-angular-d0598-default-rtdb.firebaseio.com/Movies.json"}saveProducts(t){return this.http.put(this.firebaseurl,t)}fetchProducts(){return this.http.get(this.firebaseurl)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ti))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),om=(()=>{class n{constructor(t){this.service=t,this.title="movies-app",this.movie=new Array,this.service.fetchProducts().subscribe(r=>{const i=JSON.stringify(r);this.movie=JSON.parse(i)},r=>console.log(r))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vf))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[ua],styles:[""]}),n})(),jy=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),pc=(()=>{class n extends jy{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const no=new f.OlP("NgValueAccessor"),sT={provide:no,useExisting:(0,f.Gpc)(()=>ca),multi:!0},Uf=new f.OlP("CompositionEventMode");let ca=(()=>{class n extends jy{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Uf,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([sT]),f.qOj]}),n})();const hr=new f.OlP("NgValidators"),Is=new f.OlP("NgAsyncValidators");function qy(n){return null!=n}function BE(n){const e=(0,f.QGY)(n)?(0,Tn.D)(n):n;return(0,f.CqO)(e),e}function zy(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function jE(n,e){return e.map(t=>t(n))}function Ji(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Zy(n){return null!=n?function(n){if(!n)return null;const e=n.filter(qy);return 0==e.length?null:function(t){return zy(jE(t,e))}}(Ji(n)):null}function $E(n){return null!=n?function(n){if(!n)return null;const e=n.filter(qy);return 0==e.length?null:function(t){return function(...n){const e=(0,wi.jO)(n),{args:t,keys:r}=N(n),i=new On.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,C=c;for(let A=0;A<c;A++){let x=!1;(0,Ci.Xf)(t[A]).subscribe(new kn.Q(u,P=>{x||(x=!0,C--),p[A]=P},()=>y--,void 0,()=>{(!y||!x)&&(C||u.next(r?We(r,p):p),u.complete())}))}});return e?i.pipe(Ke(e)):i}(jE(t,e).map(BE)).pipe((0,ct.U)(zy))}}(Ji(n)):null}function Ky(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function jf(n){return n?Array.isArray(n)?n:[n]:[]}function Hf(n,e){return Array.isArray(n)?n.includes(e):n===e}function WE(n,e){const t=jf(e);return jf(n).forEach(i=>{Hf(t,i)||t.push(i)}),t}function qE(n,e){return jf(e).filter(t=>!Hf(n,t))}class zE{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Zy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$E(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class mu extends zE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Di extends zE{get formDirective(){return null}get path(){return null}}class Yy{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let lm=(()=>{class n extends Yy{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(mu,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),Qy=(()=>{class n extends Yy{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Di,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function ll(n,e){$f(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&hm(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&hm(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function dm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $f(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Ky(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Ky(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();dm(e._rawValidators,i),dm(e._rawAsyncValidators,i)}function hm(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const gm="VALID",zd="INVALID",mc="PENDING",_c="DISABLED";function nv(n){return(ym(n)?n.validators:n)||null}function mm(n){return Array.isArray(n)?Zy(n):n||null}function _m(n,e){return(ym(e)?e.asyncValidators:n)||null}function rv(n){return Array.isArray(n)?$E(n):n||null}function ym(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class iv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mm(this._rawValidators),this._composedAsyncValidatorFn=rv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gm}get invalid(){return this.status===zd}get pending(){return this.status==mc}get disabled(){return this.status===_c}get enabled(){return this.status!==_c}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mm(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=rv(e)}addValidators(e){this.setValidators(WE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qE(e,this._rawAsyncValidators))}hasValidator(e){return Hf(this._rawValidators,e)}hasAsyncValidator(e){return Hf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_c,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gm,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gm||this.status===mc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_c:gm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mc,this._hasOwnPendingAsyncValidator=!0;const t=BE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof sv?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof vT&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?_c:this.errors?zd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mc)?mc:this._anyControlsHaveStatus(zd)?zd:gm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ym(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Zd extends iv{constructor(e=null,t,r){super(nv(t),_m(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class sv extends iv{constructor(e,t,r){super(nv(t),_m(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Zd?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class vT extends iv{constructor(e,t,r){super(nv(t),_m(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Zd?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const XE={provide:Di,useExisting:(0,f.Gpc)(()=>qf)},fa=(()=>Promise.resolve(null))();let qf=(()=>{class n extends Di{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new f.vpe,this.form=new sv({},Zy(t),$E(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fa.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ll(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),pm(this._directives,t)})}addFormGroup(t){fa.then(()=>{const r=this._findContainer(t.path),i=new sv({});(function(n,e){$f(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fa.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(hr,10),f.Y36(Is,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([XE]),f.qOj]}),n})();const ro={provide:mu,useExisting:(0,f.Gpc)(()=>Zf)},vm=(()=>Promise.resolve(null))();let Zf=(()=>{class n extends mu{constructor(t,r,i,u){super(),this.control=new Zd,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===ca?t=u:function(n){return Object.getPrototypeOf(n.constructor)===pc}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ll(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){vm.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;vm.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Di,9),f.Y36(hr,10),f.Y36(Is,10),f.Y36(no,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([ro]),f.qOj,f.TTD]}),n})(),ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),rC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Qd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[rC]]}),n})(),Jd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Qd]}),n})();const pC=function(){return{standalone:!0}};let ip=(()=>{class n{constructor(){this.movieSearch=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:15,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-dark",2,"height","80px"],[1,"container-fluid"],["routerLink","",1,"navbar-brand","text-white",2,"font-size","xxx-large"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/favourites",1,"nav-link","active","text-white",2,"font-size","xx-large"],[1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2",3,"ngModel","ngModelOptions","ngModelChange"],["type","submit",1,"btn","btn-outline-light"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0),f.TgZ(1,"div",1),f.TgZ(2,"a",2),f._uU(3,"Movies App"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5),f.TgZ(7,"ul",6),f.TgZ(8,"li",7),f.TgZ(9,"a",8),f._uU(10,"Favourites"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(11,"form",9),f.TgZ(12,"input",10),f.NdJ("ngModelChange",function(u){return r.movieSearch=u}),f.qZA(),f.TgZ(13,"button",11),f._uU(14,"Search"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(12),f.Q6J("ngModel",r.movieSearch)("ngModelOptions",f.DdM(2,pC)))},directives:[rm,ov,Qy,qf,ca,lm,Zf],styles:[""]}),n})(),gv=(()=>{class n{transform(t,r){return t.filter(function(i){return i.original_title.indexOf(r)>-1})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=f.Yjl({name:"searchFilter",type:n,pure:!0}),n})();function gC(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tbody"),f.TgZ(1,"tr"),f.TgZ(2,"th"),f._UZ(3,"img",15),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f._uU(10),f.qZA(),f.TgZ(11,"button",16),f.NdJ("click",function(){const u=f.CHM(t).index;return f.oxw().toDelete(u)}),f._uU(12,"Delete"),f.qZA(),f.qZA(),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw();f.xp6(3),f.MGl("src","https://image.tmdb.org/t/p/original",t.backdrop_path,"",f.LSH),f.xp6(1),f.Oqu(t.original_title),f.xp6(2),f.Oqu(r.genereids[t.genre_ids[0]]),f.xp6(2),f.Oqu(t.popularity),f.xp6(2),f.Oqu(t.vote_average)}}const mC=function(n,e){return{id:"favourite_pagination",itemsPerPage:4,currentPage:n,totalItems:e}};let _C=(()=>{class n{constructor(t,r){this.favourites=t,this.movieArr=r,this.currentPage=1,this.genereids={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentry",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},this.nameSearch="",this.totalItems=this.movieArr.movie.length}pageChange(t){this.currentPage=t}toDelete(t){this.movieArr.movie.splice(t,1),this.favourites.saveProducts(this.movieArr.movie).subscribe(r=>console.log(r),r=>console.log(r))}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vf),f.Y36(om))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-favourites"]],decls:42,vars:11,consts:[[1,"favourite-page"],[1,"row"],[1,"col-3"],[1,"list-group","favourites-generes"],["aria-current","true",1,"list-group-item","active"],[1,"list-group-item"],[1,"col-9"],[1,"table-container"],[1,"input-group","mb-3"],["type","text","id","searching","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","4",1,"form-control"],[1,"table","table-hover","main"],[4,"ngFor","ngForOf"],[1,"favouritepagination"],["id","favourite_pagination",0,"maxSize","any","3",0,"directionLinks","any","true",3,"pageChange"],[1,"movie_img",3,"src"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"]],template:function(t,r){1&t&&(f._UZ(0,"app-navbar"),f.TgZ(1,"div",0),f.TgZ(2,"div",1),f.TgZ(3,"div",2),f.TgZ(4,"ul",3),f.TgZ(5,"li",4),f._uU(6,"All generes"),f.qZA(),f.TgZ(7,"li",5),f._uU(8,"Action"),f.qZA(),f.TgZ(9,"li",5),f._uU(10,"Science Fiction"),f.qZA(),f.TgZ(11,"li",5),f._uU(12,"Adventure"),f.qZA(),f.TgZ(13,"li",5),f._uU(14,"Animation"),f.qZA(),f.TgZ(15,"li",5),f._uU(16,"Horror"),f.qZA(),f.TgZ(17,"li",5),f._uU(18,"Drama"),f.qZA(),f.TgZ(19,"li",5),f._uU(20,"Thriller"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(21,"div",6),f.TgZ(22,"div",7),f.TgZ(23,"div",8),f.TgZ(24,"input",9),f.NdJ("ngModelChange",function(u){return r.nameSearch=u}),f.qZA(),f._UZ(25,"input",10),f.qZA(),f.TgZ(26,"table",11),f.TgZ(27,"thead"),f.TgZ(28,"tr"),f.TgZ(29,"th"),f._uU(30,"Title"),f.qZA(),f.TgZ(31,"th"),f._uU(32,"Genre"),f.qZA(),f.TgZ(33,"th"),f._uU(34,"Popularity"),f.qZA(),f.TgZ(35,"th"),f._uU(36,"Rating"),f.qZA(),f.qZA(),f.qZA(),f.YNc(37,gC,13,5,"tbody",12),f.ALo(38,"searchFilter"),f.ALo(39,"paginate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(40,"div",13),f.TgZ(41,"pagination-controls",14),f.NdJ("pageChange",function(u){return r.pageChange(u)}),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(24),f.Q6J("ngModel",r.nameSearch),f.xp6(13),f.Q6J("ngForOf",f.xi3(38,2,f.xi3(39,5,r.movieArr.movie,f.WLB(8,mC,r.currentPage,r.totalItems)),r.nameSearch)))},directives:[ip,ca,lm,Zf,Xr,qi],pipes:[gv,hd],styles:[".favourite-page[_ngcontent-%COMP%]{background:#161616}.favourites-generes[_ngcontent-%COMP%]{margin-top:40%;margin-left:20%}.table-container[_ngcontent-%COMP%]{position:relative;margin-top:10%;margin-left:2%;margin-right:2%}.main[_ngcontent-%COMP%]{color:#fff}.pages[_ngcontent-%COMP%]{margin-top:11%;margin-left:50%;margin-bottom:0%}.movie_img[_ngcontent-%COMP%]{width:120px;height:70px;margin-right:15px}.favouritepagination[_ngcontent-%COMP%]{position:relative;margin-top:5%;margin-left:40%}"]}),n})(),mv=(()=>{class n{constructor(t){this.http=t,this.url="https://api.themoviedb.org/3/movie/popular?api_key=d7a2ef9097433f7accf7c2bed45dca6d&language=en-US&page=1"}movies(){return this.http.get(this.url)}getmovies(t){return this.http.get(`https://api.themoviedb.org/3/movie/popular?api_key=d7a2ef9097433f7accf7c2bed45dca6d&language=en-US&page=${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ti))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yC=(()=>{class n{constructor(t){this.moviedata=t,this.moviedata.movies().subscribe(r=>{this.bannerdata=r.results[0],console.log(this.bannerdata)})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(mv))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-banner"]],decls:8,vars:3,consts:[[1,"card"],["alt","...",1,"card-img-top",3,"src"],[1,"card-bio"],[1,"card-title"],[1,"card-text"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div"),f._UZ(2,"img",1),f.TgZ(3,"div",2),f.TgZ(4,"h1",3),f._uU(5),f.qZA(),f.TgZ(6,"h6",4),f._uU(7),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.MGl("src","https://image.tmdb.org/t/p/original",r.bannerdata.backdrop_path,"",f.LSH),f.xp6(3),f.Oqu(r.bannerdata.original_title),f.xp6(2),f.Oqu(r.bannerdata.overview))},styles:['@import"http://fonts.cdnfonts.com/css/horror-type";.card[_ngcontent-%COMP%]{width:100%;max-height:30%;position:relative;border:0cm}.card-bio[_ngcontent-%COMP%]{position:absolute;bottom:15vh;left:5vh}.card-title[_ngcontent-%COMP%]{font-size:120px;font-family:Horror Type,sans-serif;letter-spacing:5px;color:#700202}.card-text[_ngcontent-%COMP%]{font-size:25px;color:#fff}']}),n})();function NT(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",12),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit;return f.oxw().onSaveFavourites(i)}),f._uU(1,"Add to Favourties"),f.qZA()}}function vC(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",12),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit;return f.oxw().onDelete(i.id)}),f._uU(1,"Remove From Favourties"),f.qZA()}}function PT(n,e){if(1&n&&(f.TgZ(0,"div"),f.TgZ(1,"div",6),f.TgZ(2,"div",7),f._UZ(3,"img",8),f.TgZ(4,"h6",9),f._uU(5),f.qZA(),f.TgZ(6,"div",10),f.YNc(7,NT,2,0,"button",11),f.YNc(8,vC,2,0,"button",11),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&n){const t=e.$implicit,r=f.oxw();f.xp6(3),f.MGl("src","https://image.tmdb.org/t/p/original",t.backdrop_path,"",f.LSH),f.xp6(2),f.Oqu(t.original_title),f.xp6(2),f.Q6J("ngIf",1!=r.searchelement(t.id)),f.xp6(1),f.Q6J("ngIf",1==r.searchelement(t.id))}}const wC=function(n,e){return{id:"listing_pagination",itemsPerPage:20,currentPage:n,totalItems:e}};let _v=(()=>{class n{constructor(t,r,i,u){this.MovieData=t,this.wishlist=r,this.arr=i,this.search=u,this.pagenumber=1,this.data=new Array,this.MovieData.movies().subscribe(c=>{this.data=c.results,this.totalRecords=c.total_pages,console.log(this.totalRecords)})}handlePageChange(t){this.pagenumber=t,this.MovieData.getmovies(t).subscribe(r=>{this.data=r.results})}onSaveFavourites(t){this.arr.movie.push(t),this.wishlist.saveProducts(this.arr.movie).subscribe(r=>console.log(r),r=>console.log(r))}onDelete(t){this.arr.movie.splice(this.arr.movie.findIndex(r=>r.id===t),1),this.wishlist.saveProducts(this.arr.movie).subscribe(r=>console.log(r),r=>console.log(r))}searchelement(t){for(var r=0;r<this.arr.movie.length;r++)if(t==this.arr.movie[r].id)return 1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(mv),f.Y36(Vf),f.Y36(om),f.Y36(ip))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-movies-list"]],decls:10,vars:10,consts:[[1,"complete"],[1,"main"],[1,"container"],[4,"ngFor","ngForOf"],[1,"pagination"],["id","listing_pagination",0,"maxSize","any","5",0,"directionLinks","any","true",3,"pageChange"],[1,"card"],[1,"card-body"],["alt","",1,"card-img",3,"src"],["id","movie_title",1,"card-title"],[1,"button_action"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"Trending"),f.qZA(),f.TgZ(2,"div",0),f.TgZ(3,"div",1),f.TgZ(4,"div",2),f.YNc(5,PT,9,4,"div",3),f.ALo(6,"searchFilter"),f.ALo(7,"paginate"),f.qZA(),f.qZA(),f.TgZ(8,"div",4),f.TgZ(9,"pagination-controls",5),f.NdJ("pageChange",function(u){return r.handlePageChange(u)}),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.Q6J("ngForOf",f.xi3(6,1,f.xi3(7,4,r.data,f.WLB(7,wC,r.pagenumber,r.totalRecords)),r.search.movieSearch)))},directives:[Xr,qi,Bi],pipes:[gv,hd],styles:["h1[_ngcontent-%COMP%]{color:#fff;background:#161616;text-align:center;font-size:60px;margin-bottom:0;top:20px}.complete[_ngcontent-%COMP%]{justify-content:center;background:#161616}.main[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;background:#161616;min-height:100vh;margin-top:0}.container[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;justify-content:center;flex-wrap:wrap;margin-top:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;width:400px;height:450px;background:rgba(255,255,255,.05);margin:10px;box-shadow:0 15px 35px #00000080;border-radius:15px;display:flex;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;transition:.5s;font-family:Times New Roman,Times,serif}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .card-body[_ngcontent-%COMP%]{transform:translateY(-20px)}.card-img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.card-title[_ngcontent-%COMP%]{color:#fff;position:absolute;text-transform:uppercase;letter-spacing:2px;font-weight:500;font-size:25px;margin-bottom:90%}.favourite-button[_ngcontent-%COMP%]{position:absolute;left:33%;bottom:30px}.pages[_ngcontent-%COMP%]{margin-bottom:0;margin-left:45%}.button_action[_ngcontent-%COMP%]{position:absolute;margin-top:90%;margin-left:27%}.pagination[_ngcontent-%COMP%]{margin-left:36%;color:#fff}"]}),n})();const OT=[{path:"favourites",component:_C},{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home-page"]],decls:3,vars:0,template:function(t,r){1&t&&(f._UZ(0,"app-navbar"),f._UZ(1,"app-banner"),f._UZ(2,"app-movies-list"))},directives:[ip,yC,_v],styles:[""]}),n})()}];let EC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[eT.forRoot(OT)],eT]}),n})();var Ti=F(2011),yv=F(4986),vv=F(6451),CC=F(3099);function kT(n,e=Z.y){return n=null!=n?n:FT,(0,At.e)((t,r)=>{let i,u=!0;t.subscribe(new kn.Q(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}function FT(n,e){return n===e}var wv=F(5032),Ln=F(5813),VT=(F(9259),F(3942)),_u=F(4859),me=F(5861),ga=F(9681),O=F(2090),oi=F(1877);const IC="@firebase/database";let Iv="";function bv(n){Iv=n}class Dm{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class UT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Dv=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Dm(e)}}catch(e){}return new UT},vc=Dv("localStorage"),Tv=Dv("sessionStorage"),Xd=new oi.Yd("@firebase/database"),bC=function(){let n=1;return function(){return n++}}(),DC=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},eh=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=eh.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let wc=null,Av=!0;const Sv=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Xd.logLevel=oi.in.VERBOSE,wc=Xd.log.bind(Xd),e&&Tv.set("logging_enabled",!0)):"function"==typeof n?wc=n:(wc=null,Tv.remove("logging_enabled"))},fr=function(...n){if(!0===Av&&(Av=!1,null===wc&&!0===Tv.get("logging_enabled")&&Sv(!0)),wc){const e=eh.apply(null,n);wc(e)}},Tm=function(n){return function(...e){fr(n,...e)}},sp=function(...n){const e="FIREBASE INTERNAL ERROR: "+eh(...n);Xd.error(e)},ma=function(...n){const e=`FIREBASE FATAL ERROR: ${eh(...n)}`;throw Xd.error(e),new Error(e)},Xi=function(...n){const e="FIREBASE WARNING: "+eh(...n);Xd.warn(e)},ap=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Mo="[MIN_NAME]",_a="[MAX_NAME]",yu=function(n,e){if(n===e)return 0;if(n===Mo||e===_a)return-1;if(e===Mo||n===_a)return 1;{const t=lp(n),r=lp(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Rv=function(n,e){return n===e?0:n<e?-1:1},th=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},TC=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=TC(n[e[r]]);return t+="}",t},AC=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function pr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Am=function(n){(0,O.hu)(!ap(n),"Invalid JSON number");const r=1023;let i,u,c,p,y;0===n?(u=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const C=[];for(y=52;y;y-=1)C.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)C.push(u%2?1:0),u=Math.floor(u/2);C.push(i?1:0),C.reverse();const A=C.join("");let x="";for(y=0;y<64;y+=8){let P=parseInt(A.substr(y,8),2).toString(16);1===P.length&&(P="0"+P),x+=P}return x.toLowerCase()},xC=new RegExp("^-?(0*)\\d{1,10}$"),Nv=-2147483648,up=2147483647,lp=function(n){if(xC.test(n)){const e=Number(n);if(e>=Nv&&e<=up)return e}return null},nh=function(n){try{n()}catch(e){setTimeout(()=>{throw Xi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},rh=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Pv{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class MC{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(fr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xi(e)}}let cp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Fv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vv="websocket",Uv="long_polling";class Rm{constructor(e,t,r,i,u=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function OC(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===Vv)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Uv)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return pr(t,(u,c)=>{i.push(u+"="+c)}),r+i.join("&")}class jT{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const Mm={},Bv={};function ir(n){const e=n.toString();return Mm[e]||(Mm[e]=new jT),Mm[e]}class HT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&nh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ai{constructor(e,t,r,i,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tm(e),this.stats_=ir(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),OC(t,Uv,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new HT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ts((...u)=>{const[c,p,y,C,A]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Fv.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ai.forceAllow_=!0}static forceDisallow(){Ai.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Ai.forceAllow_&&(Ai.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=AC(r,1840);for(let u=0;u<i.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ts{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=bC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ts.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){fr("frame writing exception"),p.stack&&fr(p.stack),fr(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||fr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{fr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let ih=null;"undefined"!=typeof MozWebSocket?ih=MozWebSocket:"undefined"!=typeof WebSocket&&(ih=WebSocket);let hp=(()=>{class n{constructor(t,r,i,u,c,p,y){this.connId=t,this.applicationId=i,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tm(this.connId),this.stats_=ir(r),this.connURL=n.connectionURL_(r,p,y,u),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,u){const c={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&Fv.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),u&&(c.ac=u),OC(t,Vv,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vc.set("previous_websocket_failure",!0);try{if((0,O.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${Iv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(u.proxy={origin:p}),this.mySock=new ih(this.connURL,[],u)}else this.mySock=new ih(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const u=i.message||i.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const u=i.message||i.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ih&&!n.forceDisallow_}static previouslyFailed(){return vc.isInMemoryStorage||!0===vc.get("previous_websocket_failure")}markConnectionHealthy(){vc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=AC(r,16384);i.length>1&&this.sendString_(String(i.length));for(let u=0;u<i.length;u++)this.sendString_(i[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class $v{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ai,hp]}initTransports_(e){const t=hp&&hp.isAvailable();let r=t&&!hp.previouslyFailed();if(e.webSocketOnly&&(t||Xi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hp];else{const i=this.transports_=[];for(const u of $v.ALL_TRANSPORTS)u&&u.isAvailable()&&i.push(u)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class gp{constructor(e,t,r,i,u,c,p,y,C,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=y,this.onKill_=C,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tm("c:"+this.id+":"),this.transportManager_=new $v(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=rh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=th("t",e),r=th("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=th("t",e),r=th("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=th("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?sp("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sp("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Xi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),rh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Pm{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Qv{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let u=0;u<i.length;u++)if(i[u].callback===t&&(!r||r===i[u].context))return void i.splice(u,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class mp extends Qv{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mp}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class un{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Jt(){return new un("")}function kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dl(n){return n.pieces_.length-n.pieceNum_}function wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new un(n.pieces_,e)}function e0(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function _p(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function WC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new un(e,0)}function Vn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof un)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new un(t,0)}function jt(n){return n.pieceNum_>=n.pieces_.length}function Si(n,e){const t=kt(n),r=kt(e);if(null===t)return e;if(t===r)return Si(wn(n),wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function JT(n,e){const t=_p(n,0),r=_p(e,0);for(let i=0;i<t.length&&i<r.length;i++){const u=yu(t[i],r[i]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function t0(n,e){if(dl(n)!==dl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function so(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dl(n)>dl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class XT{constructor(e,t){this.errorPrefix_=t,this.parts_=_p(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);qC(this)}}function qC(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Cc(n))}function Cc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class n0 extends Qv{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n0}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const sh=1e3;let va,hl=(()=>{class n extends Pm{constructor(t,r,i,u,c,p,y,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=Tm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");n0.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&mp.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,O.Pz)(c)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[u]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject},u={action:"g",request:i,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||u!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+i+" for "+u);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const C=y.d,A=y.s;n.warnOnListenWarnings_(C,r),(this.listens.get(i)&&this.listens.get(i).get(u))===t&&(this.log_("listen response",y),"ok"!==A&&this.removeListen_(i,u),t.onComplete&&t.onComplete(A,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Xi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+u),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,u)&&this.connected_&&this.sendUnlisten_(i,u,t._queryObject,r)}sendUnlisten_(t,r,i,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=i,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,u){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,i,u){this.putInternal("p",t,r,i,u)}merge(t,r,i,u){this.putInternal("m",t,r,i,u)}putInternal(t,r,i,u,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):sp("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,C=null;const A=function(){C?C.close():(y=!0,u())};t.realtime_={close:A,sendRequest:function(V){(0,O.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,z]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);y?fr("getToken() completed but was canceled"):(fr("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=z&&z.token,C=new gp(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,u,ve=>{Xi(ve+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(V){t.log_("Failed to get token: "+V),y||(t.repoInfo_.nodeAdmin&&Xi(V),A())}}})()}interrupt(t){fr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){fr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>TC(c)).join("$"):"default";const u=this.removeListen_(t,i);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const i=new un(t).toString();let u;if(this.listens.has(i)){const c=this.listens.get(i);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else u=void 0;return u}onAuthRevoked_(t,r){fr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){fr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Iv.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=mp.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ht{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ht(e,t)}}class yp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ht(Mo,e),i=new Ht(Mo,t);return 0!==this.compare(r,i)}minPost(){return Ht.MIN}}class JC extends yp{static get __EMPTY_NODE(){return va}static set __EMPTY_NODE(e){va=e}compare(e,t){return yu(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ht.MIN}maxPost(){return new Ht(_a,va)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ht(e,va)}toString(){return".key"}}const wa=new JC;class vu{constructor(e,t,r,i,u=null){this.isReverse_=i,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let eI,Ea=(()=>{class n{constructor(t,r,i,u,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=u?u:As.EMPTY_NODE,this.right=null!=c?c:As.EMPTY_NODE}copy(t,r,i,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let u=this;const c=i(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,i),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,i)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return As.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,u;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return As.EMPTY_NODE;u=i.right.min_(),i=i.copy(u.key,u.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class As{constructor(e,t=As.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new As(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ea.BLACK,null,null))}remove(e){return new As(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ea.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new vu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new vu(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new vu(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new vu(this.root_,null,this.comparator_,!0,e)}}function XC(n,e){return yu(n.name,e.name)}function Om(n,e){return yu(n,e)}As.EMPTY_NODE=new class{copy(e,t,r,i,u){return this}insert(e,t,r){return new Ea(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tI=function(n){return"number"==typeof n?"number:"+Am(n):"string:"+n},nI=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===eI||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===eI||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rI,iI,vp,wu=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nI(this.priorityNode_)}static set __childrenNodeConstructor(t){rI=t}static get __childrenNodeConstructor(){return rI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return jt(t)?this:".priority"===kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=kt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===dl(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+tI(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Am(this.value_):this.value_,this.lazyHash_=DC(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(u>=0,"Unknown leaf type: "+r),(0,O.hu)(c>=0,"Unknown leaf type: "+i),u===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const En=new class extends yp{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),u=r.compareTo(i);return 0===u?yu(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ht.MIN}maxPost(){return new Ht(_a,new wu("[PRIORITY-POST]",vp))}makePost(e,t){const r=iI(e);return new Ht(t,new wu("[PRIORITY-POST]",r))}toString(){return".priority"}},nA=Math.log(2);class rA{constructor(e){this.count=parseInt(Math.log(e+1)/nA,10),this.current_=this.count-1;const i=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wp=function(n,e,t,r){n.sort(e);const i=function(y,C){const A=C-y;let x,P;if(0===A)return null;if(1===A)return x=n[y],P=t?t(x):x,new Ea(P,x.node,Ea.BLACK,null,null);{const V=parseInt(A/2,10)+y,z=i(y,V),ve=i(V+1,C);return x=n[V],P=t?t(x):x,new Ea(P,x.node,Ea.BLACK,z,ve)}},p=function(y){let C=null,A=null,x=n.length;const P=function(z,ve){const ke=x-z,rt=x;x-=z;const It=i(ke+1,rt),Xt=n[ke],St=t?t(Xt):Xt;V(new Ea(St,Xt.node,ve,null,It))},V=function(z){C?(C.left=z,C=z):(A=z,C=z)};for(let z=0;z<y.count;++z){const ve=y.nextBitIsOne(),ke=Math.pow(2,y.count-(z+1));ve?P(ke,Ea.BLACK):(P(ke,Ea.BLACK),P(ke,Ea.RED))}return A}(new rA(n.length));return new As(r||e,p)};let Fm;const Ic={};class Ca{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Ic&&En,"ChildrenNode.ts has not been loaded"),Fm=Fm||new Ca({".priority":Ic},{".priority":En}),Fm}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof As?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==wa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const u=t.getIterator(Ht.Wrap);let p,c=u.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=i?wp(r,e.getCompare()):Ic;const y=e.toString(),C=Object.assign({},this.indexSet_);C[y]=e;const A=Object.assign({},this.indexes_);return A[y]=p,new Ca(A,C)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,u)=>{const c=(0,O.DV)(this.indexSet_,u);if((0,O.hu)(c,"Missing index implementation for "+u),i===Ic){if(c.isDefinedOn(e.node)){const p=[],y=t.getIterator(Ht.Wrap);let C=y.getNext();for(;C;)C.name!==e.name&&p.push(C),C=y.getNext();return p.push(e),wp(p,c.getCompare())}return Ic}{const p=t.get(e.name);let y=i;return p&&(y=y.remove(new Ht(e.name,p))),y.insert(e,e.node)}});return new Ca(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===Ic)return i;{const u=t.get(e.name);return u?i.remove(new Ht(e.name,u)):i}});return new Ca(r,this.indexSet_)}}let Ep,Dt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nI(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ep||(Ep=new n(new As(Om),null,Ca.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ep}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ep:r}}getChild(t){const r=kt(t);return null===r?this:this.getImmediateChild(r).getChild(wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Ht(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=u.isEmpty()?Ep:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const i=kt(t);if(null===i)return r;{(0,O.hu)(".priority"!==kt(t)||1===dl(t),".priority must be the last token in a path");const u=this.getImmediateChild(i).updateChild(wn(t),r);return this.updateImmediateChild(i,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,u=0,c=!0;if(this.forEachChild(En,(p,y)=>{r[p]=y.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*i){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+tI(this.getPriority().val())+":"),this.forEachChild(En,(r,i)=>{const u=i.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":DC(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const u=this.resolveIndex_(i);if(u){const c=u.getPredecessorKey(new Ht(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Ht(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Ht(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Ht.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Ht.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Eu?-1:0}withIndex(t){if(t===wa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===wa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(En),u=r.getIterator(En);let c=i.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===wa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Eu=new class extends Dt{constructor(){super(new As(Om),Dt.EMPTY_NODE,Ca.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Dt.EMPTY_NODE}isEmpty(){return!1}};function $n(n,e=null){if(null===n)return Dt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new wu(n,$n(e));if(n instanceof Array){let t=Dt.EMPTY_NODE;return pr(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const u=$n(i);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority($n(e))}{const t=[];let r=!1;if(pr(n,(c,p)=>{if("."!==c.substring(0,1)){const y=$n(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Ht(c,y)))}}),0===t.length)return Dt.EMPTY_NODE;const u=wp(t,XC,c=>c.name,Om);if(r){const c=wp(t,En.getCompare());return new Dt(u,$n(e),new Ca({".priority":c},{".priority":En}))}return new Dt(u,$n(e),Ca.Default)}}Object.defineProperties(Ht,{MIN:{value:new Ht(Mo,Dt.EMPTY_NODE)},MAX:{value:new Ht(_a,Eu)}}),JC.__EMPTY_NODE=Dt.EMPTY_NODE,wu.__childrenNodeConstructor=Dt,eI=Eu,vp=Eu,function(n){iI=n}($n);class a0 extends yp{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!jt(e)&&".priority"!==kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),u=r.compareTo(i);return 0===u?yu(e.name,t.name):u}makePost(e,t){const r=$n(e),i=Dt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ht(t,i)}maxPost(){const e=Dt.EMPTY_NODE.updateChild(this.indexPath_,Eu);return new Ht(_a,e)}toString(){return _p(this.indexPath_,0).join("/")}}const Vm=new class extends yp{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?yu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ht.MIN}maxPost(){return Ht.MAX}makePost(e,t){const r=$n(e);return new Ht(t,r)}toString(){return".value"}},bc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Cp=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const u=new Array(8);for(i=7;i>=0;i--)u[i]=bc.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=bc.charAt(e[i]);return(0,O.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),oI=function(n){if(n===""+up)return"-";const e=lp(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return _a;const u=bc.charAt(bc.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},aI=function(n){if(n===""+Nv)return Mo;const e=lp(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+up:(delete t[t.length-1],t.join("")):(t[t.length-1]=bc.charAt(bc.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function uI(n){return{type:"value",snapshotNode:n}}function Dc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ah(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function uh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Bm{constructor(e){this.index_=e}updateChild(e,t,r,i,u,c){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(ah(t,p)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Dc(t,r)):c.trackChildChange(uh(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(En,(i,u)=>{t.hasChild(i)||r.trackChildChange(ah(i,u))}),t.isLeafNode()||t.forEachChild(En,(i,u)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(u)||r.trackChildChange(uh(i,u,c))}else r.trackChildChange(Dc(i,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Dt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ip{constructor(e){this.indexedFilter_=new Bm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ip.getStartPost_(e),this.endPost_=Ip.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,u,c){return this.matches(new Ht(t,r))||(r=Dt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Dt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Dt.EMPTY_NODE);const u=this;return t.forEachChild(En,(c,p)=>{u.matches(new Ht(c,p))||(i=i.updateImmediateChild(c,Dt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class aA{constructor(e){this.rangedFilter_=new Ip(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,u,c){return this.rangedFilter_.matches(new Ht(t,r))||(r=Dt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Dt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;i=Dt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let u,c,p,y;if(i=t.withIndex(this.index_),i=i.updatePriority(Dt.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();p=(P,V)=>x(V,P)}else y=i.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let C=0,A=!1;for(;y.hasNext();){const x=y.getNext();!A&&p(u,x)<=0&&(A=!0),A&&C<this.limit_&&p(x,c)<=0?C++:i=i.updateImmediateChild(x.name,Dt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,u){let c;if(this.reverse_){const x=this.index_.getCompare();c=(P,V)=>x(V,P)}else c=this.index_.getCompare();const p=e;(0,O.hu)(p.numChildren()===this.limit_,"");const y=new Ht(t,r),C=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),A=this.rangedFilter_.matches(y);if(p.hasChild(t)){const x=p.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:c(P,y);if(A&&!r.isEmpty()&&V>=0)return null!=u&&u.trackChildChange(uh(t,r,x)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(ah(t,x));const ve=p.updateImmediateChild(t,Dt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=u&&u.trackChildChange(Dc(P.name,P.node)),ve.updateImmediateChild(P.name,P.node)):ve}}return r.isEmpty()?e:A&&c(C,y)>=0?(null!=u&&(u.trackChildChange(ah(C.name,C.node)),u.trackChildChange(Dc(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(C.name,Dt.EMPTY_NODE)):e}}class u0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=En}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_a}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===En}copy(){const e=new u0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function jm(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function l0(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function bp(n,e){const t=n.copy();return t.index_=e,t}function lh(n){const e={};if(n.isDefault())return e;let t;return n.index_===En?t="$priority":n.index_===Vm?t="$value":n.index_===wa?t="$key":((0,O.hu)(n.index_ instanceof a0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function lI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==En&&(e.i=n.index_.toString()),e}class $m extends Pm{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Tm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=$m.getListenId_(e,r),p={};this.listens_[c]=p;const y=lh(e._queryParams);this.restRequest_(u+".json",y,(C,A)=>{let x=A;if(404===C&&(x=null,C=null),null===C&&this.onDataUpdate_(u,x,!1,r),(0,O.DV)(this.listens_,c)===p){let P;P=C?401===C?"permission_denied":"rest_error:"+C:"ok",i(P,null)}})}unlisten(e,t){const r=$m.getListenId_(e,t);delete this.listens_[r]}get(e){const t=lh(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,u])=>{i&&i.accessToken&&(t.auth=i.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,O.cI)(p.responseText)}catch(C){Xi("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&Xi("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class lA{constructor(){this.rootNode_=Dt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Gm(){return{value:null,children:new Map}}function ch(n,e,t){if(jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=kt(e);n.children.has(r)||n.children.set(r,Gm()),ch(n.children.get(r),e=wn(e),t)}}function Wm(n,e){if(jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(En,(r,i)=>{ch(n,new un(r),i)}),Wm(n,e)}}if(n.children.size>0){const t=kt(e);return e=wn(e),n.children.has(t)&&Wm(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function c0(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{c0(i,new un(e.toString()+"/"+r),t)})}class dh{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&pr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class hI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dh(e);const r=1e4+2e4*Math.random();rh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;pr(e,(i,u)=>{u>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=u,r=!0)}),r&&this.server_.reportStats(t),rh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var oo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(oo||(oo={})),oo))();function Dp(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class zm{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=oo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(jt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new un(e));return new zm(Jt(),t,this.revert)}}return(0,O.hu)(kt(this.path)===e,"operationForChild called for unrelated child."),new zm(wn(this.path),this.affectedTree,this.revert)}}class hh{constructor(e,t){this.source=e,this.path=t,this.type=oo.LISTEN_COMPLETE}operationForChild(e){return jt(this.path)?new hh(this.source,Jt()):new hh(this.source,wn(this.path))}}class fl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=oo.OVERWRITE}operationForChild(e){return jt(this.path)?new fl(this.source,Jt(),this.snap.getImmediateChild(e)):new fl(this.source,wn(this.path),this.snap)}}class fh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=oo.MERGE}operationForChild(e){if(jt(this.path)){const t=this.children.subtree(new un(e));return t.isEmpty()?null:t.value?new fl(this.source,Jt(),t.value):new fh(this.source,Jt(),t)}return(0,O.hu)(kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fh(this.source,wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class pl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class hA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Tp(n,e,t,r,i,u){const c=r.filter(p=>p.type===t);c.sort((p,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new Ht(e.childName,e.snapshotNode),i=new Ht(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,y)),c.forEach(p=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);i.forEach(C=>{C.respondsTo(p.type)&&e.push(C.createEvent(y,n.query_))})})}function Zm(n,e){return{eventCache:n,serverCache:e}}function Ap(n,e,t,r){return Zm(new pl(e,t,r),n.serverCache)}function pI(n,e,t,r){return Zm(n.eventCache,new pl(e,t,r))}function Km(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Tc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let f0;class Cn{constructor(e,t=(()=>(f0||(f0=new As(Rv)),f0))()){this.value=e,this.children=t}static fromObject(e){let t=new Cn(null);return pr(e,(r,i)=>{t=t.set(new un(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Jt(),value:this.value};if(jt(e))return null;{const r=kt(e),i=this.children.get(r);if(null!==i){const u=i.findRootMostMatchingPathAndValue(wn(e),t);return null!=u?{path:Vn(new un(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(jt(e))return this;{const t=kt(e),r=this.children.get(t);return null!==r?r.subtree(wn(e)):new Cn(null)}}set(e,t){if(jt(e))return new Cn(t,this.children);{const r=kt(e),u=(this.children.get(r)||new Cn(null)).set(wn(e),t),c=this.children.insert(r,u);return new Cn(this.value,c)}}remove(e){if(jt(e))return this.children.isEmpty()?new Cn(null):new Cn(null,this.children);{const t=kt(e),r=this.children.get(t);if(r){const i=r.remove(wn(e));let u;return u=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&u.isEmpty()?new Cn(null):new Cn(this.value,u)}return this}}get(e){if(jt(e))return this.value;{const t=kt(e),r=this.children.get(t);return r?r.get(wn(e)):null}}setTree(e,t){if(jt(e))return t;{const r=kt(e),u=(this.children.get(r)||new Cn(null)).setTree(wn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Cn(this.value,c)}}fold(e){return this.fold_(Jt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,u)=>{r[i]=u.fold_(Vn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Jt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(jt(e))return null;{const u=kt(e),c=this.children.get(u);return c?c.findOnPath_(wn(e),Vn(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Jt(),t)}foreachOnPath_(e,t,r){if(jt(e))return this;{this.value&&r(t,this.value);const i=kt(e),u=this.children.get(i);return u?u.foreachOnPath_(wn(e),Vn(t,i),r):new Cn(null)}}foreach(e){this.foreach_(Jt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ao{constructor(e){this.writeTree_=e}static empty(){return new ao(new Cn(null))}}function Sp(n,e,t){if(jt(e))return new ao(new Cn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let u=r.value;const c=Si(i,e);return u=u.updateChild(c,t),new ao(n.writeTree_.set(i,u))}{const i=new Cn(t),u=n.writeTree_.setTree(e,i);return new ao(u)}}}function p0(n,e,t){let r=n;return pr(t,(i,u)=>{r=Sp(r,Vn(e,i),u)}),r}function g0(n,e){if(jt(e))return ao.empty();{const t=n.writeTree_.setTree(e,new Cn(null));return new ao(t)}}function m0(n,e){return null!=Ac(n,e)}function Ac(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Si(t.path,e)):null}function gI(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(En,(r,i)=>{e.push(new Ht(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Ht(r,i.value))}),e}function Ia(n,e){if(jt(e))return n;{const t=Ac(n,e);return new ao(null!=t?new Cn(t):n.writeTree_.subtree(e))}}function xp(n){return n.writeTree_.isEmpty()}function Sc(n,e){return Ym(Jt(),n.writeTree_,e)}function Ym(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,u)=>{".priority"===i?((0,O.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=Ym(Vn(n,i),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Vn(n,".priority"),r)),t}}function Qm(n,e){return C0(e,n)}function _A(n,e){if(n.snap)return so(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&so(Vn(n.path,t),e))return!0;return!1}function yA(n){return n.visible}function y0(n,e,t){let r=ao.empty();for(let i=0;i<n.length;++i){const u=n[i];if(e(u)){const c=u.path;let p;if(u.snap)so(t,c)?(p=Si(t,c),r=Sp(r,p,u.snap)):so(c,t)&&(p=Si(c,t),r=Sp(r,Jt(),u.snap.getChild(p)));else{if(!u.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(so(t,c))p=Si(t,c),r=p0(r,p,u.children);else if(so(c,t))if(p=Si(c,t),jt(p))r=p0(r,Jt(),u.children);else{const y=(0,O.DV)(u.children,kt(p));if(y){const C=y.getChild(wn(p));r=Sp(r,Jt(),C)}}}}}return r}function vA(n,e,t,r,i){if(r||i){const u=Ia(n.visibleWrites,e);return!i&&xp(u)?t:i||null!=t||m0(u,Jt())?Sc(y0(n.allWrites,function(C){return(C.visible||i)&&(!r||!~r.indexOf(C.writeId))&&(so(C.path,e)||so(e,C.path))},e),t||Dt.EMPTY_NODE):null}{const u=Ac(n.visibleWrites,e);if(null!=u)return u;{const c=Ia(n.visibleWrites,e);return xp(c)?t:null!=t||m0(c,Jt())?Sc(c,t||Dt.EMPTY_NODE):null}}}function v0(n,e,t,r){return vA(n.writeTree,n.treePath,e,t,r)}function Jm(n,e){return function(n,e,t){let r=Dt.EMPTY_NODE;const i=Ac(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(En,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Ia(n.visibleWrites,e);return t.forEachChild(En,(c,p)=>{const y=Sc(Ia(u,new un(c)),p);r=r.updateImmediateChild(c,y)}),gI(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return gI(Ia(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function yI(n,e,t,r){return function(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const u=Vn(e,t);if(m0(n.visibleWrites,u))return null;{const c=Ia(n.visibleWrites,u);return xp(c)?i.getChild(t):Sc(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Xm(n,e){return function(n,e){return Ac(n.visibleWrites,e)}(n.writeTree,Vn(n.treePath,e))}function w0(n,e,t){return function(n,e,t,r){const i=Vn(e,t),u=Ac(n.visibleWrites,i);return null!=u?u:r.isCompleteForChild(t)?Sc(Ia(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function E0(n,e){return C0(Vn(n.treePath,e),n.writeTree)}function C0(n,e){return{treePath:n,writeTree:e}}class I0{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const u=i.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,uh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,ah(r,i.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,Dc(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,uh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const gh=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class b0{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new pl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return w0(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Tc(this.viewCache_),u=function(n,e,t,r,i,u){return function(n,e,t,r,i,u,c){let p;const y=Ia(n.visibleWrites,e),C=Ac(y,Jt());if(null!=C)p=C;else{if(null==t)return[];p=Sc(y,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const A=[],x=c.getCompare(),P=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let V=P.getNext();for(;V&&A.length<i;)0!==x(V,r)&&A.push(V),V=P.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,u)}(this.writes_,i,t,1,r,e);return 0===u.length?null:u[0]}}function EI(n,e,t,r,i,u){const c=e.eventCache;if(null!=Xm(r,t))return e;{let p,y;if(jt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=Tc(e),x=Jm(r,C instanceof Dt?C:Dt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),x,u)}else{const C=v0(r,Tc(e));p=n.filter.updateFullNode(e.eventCache.getNode(),C,u)}else{const C=kt(t);if(".priority"===C){(0,O.hu)(1===dl(t),"Can't have a priority with additional path components");const A=c.getNode();y=e.serverCache.getNode();const x=yI(r,t,A,y);p=null!=x?n.filter.updatePriority(A,x):c.getNode()}else{const A=wn(t);let x;if(c.isCompleteForChild(C)){y=e.serverCache.getNode();const P=yI(r,t,c.getNode(),y);x=null!=P?c.getNode().getImmediateChild(C).updateChild(A,P):c.getNode().getImmediateChild(C)}else x=w0(r,C,e.serverCache);p=null!=x?n.filter.updateChild(c.getNode(),C,x,A,i,u):c.getNode()}}return Ap(e,p,c.isFullyInitialized()||jt(t),n.filter.filtersNodes())}}function mh(n,e,t,r,i,u,c,p){const y=e.serverCache;let C;const A=c?n.filter:n.filter.getIndexedFilter();if(jt(t))C=A.updateFullNode(y.getNode(),r,null);else if(A.filtersNodes()&&!y.isFiltered()){const V=y.getNode().updateChild(t,r);C=A.updateFullNode(y.getNode(),V,null)}else{const V=kt(t);if(!y.isCompleteForPath(t)&&dl(t)>1)return e;const z=wn(t),ke=y.getNode().getImmediateChild(V).updateChild(z,r);C=".priority"===V?A.updatePriority(y.getNode(),ke):A.updateChild(y.getNode(),V,ke,z,gh,null)}const x=pI(e,C,y.isFullyInitialized()||jt(t),A.filtersNodes());return EI(n,x,t,i,new b0(i,x,u),p)}function D0(n,e,t,r,i,u,c){const p=e.eventCache;let y,C;const A=new b0(i,e,u);if(jt(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=Ap(e,C,!0,n.filter.filtersNodes());else{const x=kt(t);if(".priority"===x)C=n.filter.updatePriority(e.eventCache.getNode(),r),y=Ap(e,C,p.isFullyInitialized(),p.isFiltered());else{const P=wn(t),V=p.getNode().getImmediateChild(x);let z;if(jt(P))z=r;else{const ve=A.getCompleteChild(x);z=null!=ve?".priority"===e0(P)&&ve.getChild(WC(P)).isEmpty()?ve:ve.updateChild(P,r):Dt.EMPTY_NODE}y=V.equals(z)?e:Ap(e,n.filter.updateChild(p.getNode(),x,z,P,A,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function TA(n,e){return n.eventCache.isCompleteForChild(e)}function CI(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gl(n,e,t,r,i,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,y=e;C=jt(t)?r:new Cn(null).setTree(t,r);const A=e.serverCache.getNode();return C.children.inorderTraversal((x,P)=>{if(A.hasChild(x)){const z=CI(0,e.serverCache.getNode().getImmediateChild(x),P);y=mh(n,y,new un(x),z,i,u,c,p)}}),C.children.inorderTraversal((x,P)=>{const V=!e.serverCache.isCompleteForChild(x)&&void 0===P.value;if(!A.hasChild(x)&&!V){const ve=CI(0,e.serverCache.getNode().getImmediateChild(x),P);y=mh(n,y,new un(x),ve,i,u,c,p)}}),y}class bI{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Bm(r.getIndex()),u=function(n){return n.loadsAllData()?new Bm(n.getIndex()):n.hasLimit()?new aA(n):new Ip(n)}(r);this.processor_=function(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,y=i.updateFullNode(Dt.EMPTY_NODE,c.getNode(),null),C=u.updateFullNode(Dt.EMPTY_NODE,p.getNode(),null),A=new pl(y,c.isFullyInitialized(),i.filtersNodes()),x=new pl(C,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=Zm(x,A),this.eventGenerator_=new hA(this.query_)}get query(){return this.query_}}function DI(n,e){const t=Tc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!jt(e)&&!t.getImmediateChild(kt(e)).isEmpty())?t.getChild(e):null}function xA(n){return 0===n.eventRegistrations_.length}function t_(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(u+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function T0(n,e,t,r){e.type===oo.MERGE&&null!==e.source.queryId&&((0,O.hu)(Tc(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(Km(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,u=function(n,e,t,r,i){const u=new I0;let c,p;if(t.type===oo.OVERWRITE){const C=t;C.source.fromUser?c=D0(n,e,C.path,C.snap,r,i,u):((0,O.hu)(C.source.fromServer,"Unknown source."),p=C.source.tagged||e.serverCache.isFiltered()&&!jt(C.path),c=mh(n,e,C.path,C.snap,r,i,p,u))}else if(t.type===oo.MERGE){const C=t;C.source.fromUser?c=function(n,e,t,r,i,u,c){let p=e;return r.foreach((y,C)=>{const A=Vn(t,y);TA(e,kt(A))&&(p=D0(n,p,A,C,i,u,c))}),r.foreach((y,C)=>{const A=Vn(t,y);TA(e,kt(A))||(p=D0(n,p,A,C,i,u,c))}),p}(n,e,C.path,C.children,r,i,u):((0,O.hu)(C.source.fromServer,"Unknown source."),p=C.source.tagged||e.serverCache.isFiltered(),c=gl(n,e,C.path,C.children,r,i,p,u))}else if(t.type===oo.ACK_USER_WRITE){const C=t;c=C.revert?function(n,e,t,r,i,u){let c;if(null!=Xm(r,t))return e;{const p=new b0(r,e,i),y=e.eventCache.getNode();let C;if(jt(t)||".priority"===kt(t)){let A;if(e.serverCache.isFullyInitialized())A=v0(r,Tc(e));else{const x=e.serverCache.getNode();(0,O.hu)(x instanceof Dt,"serverChildren would be complete if leaf node"),A=Jm(r,x)}A=A,C=n.filter.updateFullNode(y,A,u)}else{const A=kt(t);let x=w0(r,A,e.serverCache);null==x&&e.serverCache.isCompleteForChild(A)&&(x=y.getImmediateChild(A)),C=null!=x?n.filter.updateChild(y,A,x,wn(t),p,u):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(y,A,Dt.EMPTY_NODE,wn(t),p,u):y,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=v0(r,Tc(e)),c.isLeafNode()&&(C=n.filter.updateFullNode(C,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=Xm(r,Jt()),Ap(e,C,c,n.filter.filtersNodes())}}(n,e,C.path,r,i,u):function(n,e,t,r,i,u,c){if(null!=Xm(i,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(jt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return mh(n,e,t,y.getNode().getChild(t),i,u,p,c);if(jt(t)){let C=new Cn(null);return y.getNode().forEachChild(wa,(A,x)=>{C=C.set(new un(A),x)}),gl(n,e,t,C,i,u,p,c)}return e}{let C=new Cn(null);return r.foreach((A,x)=>{const P=Vn(t,A);y.isCompleteForPath(P)&&(C=C.set(A,y.getNode().getChild(P)))}),gl(n,e,t,C,i,u,p,c)}}(n,e,C.path,C.affectedTree,r,i,u)}else{if(t.type!==oo.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,i){const u=e.serverCache;return EI(n,pI(e,u.getNode(),u.isFullyInitialized()||jt(t),u.isFiltered()),t,r,gh,i)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=Km(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(uI(Km(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,i,e,t,r);return function(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,O.hu)(u.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,A0(n,u.changes,u.viewCache.eventCache.getNode(),null)}function A0(n,e,t,r){return function(n,e,t,r){const i=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Tp(n,i,"child_removed",e,r,t),Tp(n,i,"child_added",e,r,t),Tp(n,i,"child_moved",u,r,t),Tp(n,i,"child_changed",e,r,t),Tp(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let n_,i_;class AI{constructor(){this.views=new Map}}function S0(n,e,t,r){const i=e.source.queryId;if(null!==i){const u=n.views.get(i);return(0,O.hu)(null!=u,"SyncTree gave us an op for an invalid query."),T0(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(T0(c,e,t,r));return u}}function SI(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=v0(t,i?r:null),y=!1;p?y=!0:r instanceof Dt?(p=Jm(t,r),y=!1):(p=Dt.EMPTY_NODE,y=!1);const C=Zm(new pl(p,y,!1),new pl(r,i,!1));return new bI(e,C)}return c}function x0(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Cu(n,e){let t=null;for(const r of n.views.values())t=t||DI(r,e);return t}function R0(n,e){return e._queryParams.loadsAllData()?r_(n):n.views.get(e._queryIdentifier)}function M0(n,e){return null!=R0(n,e)}function Iu(n){return null!=r_(n)}function r_(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let kA=1;class MI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cn(null),this.pendingWriteTree_={visibleWrites:ao.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xc(n,e,t,r,i){return function(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Sp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?yh(n,new fl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ba(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,u=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&_A(p,r.path)?i=!1:so(r.path,p.path)&&(u=!0)),c--}return!!i&&(u?(function(n){n.visibleWrites=y0(n.allWrites,yA,Jt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=g0(n.visibleWrites,r.path):pr(r.children,y=>{n.visibleWrites=g0(n.visibleWrites,Vn(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new Cn(null);return null!=r.snap?u=u.set(Jt(),!0):pr(r.children,c=>{u=u.set(new un(c),!0)}),yh(n,new zm(r.path,u,t))}return[]}function es(n,e,t){return yh(n,new fl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function P0(n,e,t,r){const i=e._path,u=n.syncPointTree_.get(i);let c=[];if(u&&("default"===e._queryIdentifier||M0(u,e))){const p=function(n,e,t,r){const i=e._queryIdentifier,u=[];let c=[];const p=Iu(n);if("default"===i)for(const[y,C]of n.views.entries())c=c.concat(t_(C,t,r)),xA(C)&&(n.views.delete(y),C.query._queryParams.loadsAllData()||u.push(C.query));else{const y=n.views.get(i);y&&(c=c.concat(t_(y,t,r)),xA(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||u.push(y.query)))}return p&&!Iu(n)&&u.push(new((0,O.hu)(n_,"Reference.ts has not been loaded"),n_)(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const y=p.removed;c=p.events;const C=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(i,(x,P)=>Iu(P));if(C&&!A){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const P=function(n){return n.fold((e,t,r)=>{if(t&&Iu(t))return[r_(t)];{let i=[];return t&&(i=x0(t)),pr(r,(u,c)=>{i=i.concat(c)}),i}})}(x);for(let V=0;V<P.length;++V){const z=P[V],ve=z.query,ke=s_(n,z);n.listenProvider_.startListening(vh(ve),kp(n,ve),ke.hashFn,ke.onComplete)}}}if(!A&&y.length>0&&!r)if(C){const x=null;n.listenProvider_.stopListening(vh(e),x)}else y.forEach(x=>{const P=n.queryToTagMap.get(o_(x));n.listenProvider_.stopListening(vh(x),P)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=o_(r),u=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(u)}}}(n,y)}return c}function Op(n,e,t){const r=e._path;let i=null,u=!1;n.syncPointTree_.foreachOnPath(r,(x,P)=>{const V=Si(x,r);i=i||Cu(P,V),u=u||Iu(P)});let p,c=n.syncPointTree_.get(r);c?(u=u||Iu(c),i=i||Cu(c,Jt())):(c=new AI,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?p=!0:(p=!1,i=Dt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,V)=>{const z=Cu(V,Jt());z&&(i=i.updateImmediateChild(P,z))}));const y=M0(c,e);if(!y&&!e._queryParams.loadsAllData()){const x=o_(e);(0,O.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const P=kA++;n.queryToTagMap.set(x,P),n.tagToQueryMap.set(P,x)}let A=function(n,e,t,r,i,u){const c=SI(n,e,r,i,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function(n,e){n.eventRegistrations_.push(e)}(c,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(En,(u,c)=>{r.push(Dc(u,c))}),t.isFullyInitialized()&&r.push(uI(t.getNode())),A0(n,r,t.getNode(),e)}(c,t)}(c,e,t,Qm(n.pendingWriteTree_,r),i,p);if(!y&&!u){const x=R0(c,e);A=A.concat(function(n,e,t){const r=e._path,i=kp(n,e),u=s_(n,t),c=n.listenProvider_.startListening(vh(e),i,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!Iu(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((C,A,x)=>{if(!jt(C)&&A&&Iu(A))return[r_(A).query];{let P=[];return A&&(P=P.concat(x0(A).map(V=>V.query))),pr(x,(V,z)=>{P=P.concat(z)}),P}});for(let C=0;C<y.length;++C){const A=y[C];n.listenProvider_.stopListening(vh(A),kp(n,A))}}return c}(n,e,x))}return A}function Rc(n,e,t){const i=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const C=Cu(p,Si(c,e));if(C)return C});return vA(i,e,u,t,!0)}function yh(n,e){return O0(e,n.syncPointTree_,null,Qm(n.pendingWriteTree_,Jt()))}function O0(n,e,t,r){if(jt(n.path))return k0(n,e,t,r);{const i=e.get(Jt());null==t&&null!=i&&(t=Cu(i,Jt()));let u=[];const c=kt(n.path),p=n.operationForChild(c),y=e.children.get(c);if(y&&p){const C=t?t.getImmediateChild(c):null,A=E0(r,c);u=u.concat(O0(p,y,C,A))}return i&&(u=u.concat(S0(i,n,r,t))),u}}function k0(n,e,t,r){const i=e.get(Jt());null==t&&null!=i&&(t=Cu(i,Jt()));let u=[];return e.children.inorderTraversal((c,p)=>{const y=t?t.getImmediateChild(c):null,C=E0(r,c),A=n.operationForChild(c);A&&(u=u.concat(k0(A,p,y,C)))}),i&&(u=u.concat(S0(i,n,r,t))),u}function s_(n,e){const t=e.query,r=kp(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Dt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=F0(n,t);if(r){const i=NI(r),u=i.path,c=i.queryId,p=Si(u,e);return Fp(n,u,new hh(Dp(c),p))}return[]}(n,t._path,r):function(n,e){return yh(n,new hh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return P0(n,t,null,u)}}}}function kp(n,e){const t=o_(e);return n.queryToTagMap.get(t)}function o_(n){return n._path.toString()+"$"+n._queryIdentifier}function F0(n,e){return n.tagToQueryMap.get(e)}function NI(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new un(n.substr(0,e))}}function Fp(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),S0(r,t,Qm(n.pendingWriteTree_,e),null)}function vh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,O.hu)(i_,"Reference.ts has not been loaded"),i_)(n._repo,n._path):n}class B0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new B0(t)}node(){return this.node_}}class j0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vn(this.path_,e);return new j0(this.syncTree_,t)}node(){return Rc(this.syncTree_,this.path_)}}const H0=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?$0(n[".sv"],e,t):"object"==typeof n[".sv"]?PI(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},$0=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},PI=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},OI=function(n,e,t,r){return u_(e,new j0(t,n),r)},a_=function(n,e,t){return u_(n,new B0(e),t)};function u_(n,e,t){const r=n.getPriority().val(),i=H0(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=H0(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new wu(p,$n(i)):n}{const c=n;return u=c,i!==c.getPriority().val()&&(u=u.updatePriority(new wu(i))),c.forEachChild(En,(p,y)=>{const C=u_(y,e.getImmediateChild(p),t);C!==y&&(u=u.updateImmediateChild(p,C))}),u}}class G0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Lp(n,e){let t=e instanceof un?e:new un(e),r=n,i=kt(t);for(;null!==i;){const u=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new G0(i,r,u),t=wn(t),i=kt(t)}return r}function ml(n){return n.node.value}function W0(n,e){n.node.value=e,kI(n)}function q0(n){return n.node.childCount>0}function Lr(n,e){pr(n.node.children,(t,r)=>{e(new G0(t,n,r))})}function Mc(n,e,t,r){t&&!r&&e(n),Lr(n,i=>{Mc(i,e,!0,r)}),t&&r&&e(n)}function Vp(n){return new un(null===n.parent?n.name:Vp(n.parent)+"/"+n.name)}function kI(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===ml(n)&&!q0(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,kI(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,kI(n))}(n.parent,n.name,n)}const WA=/[\[\].#$\/\u0000-\u001F\u007F]/,z0=/[\[\].#$\u0000-\u001F\u007F]/,Z0=10485760,Bp=function(n){return"string"==typeof n&&0!==n.length&&!WA.test(n)},FI=function(n){return"string"==typeof n&&0!==n.length&&!z0.test(n)},Nc=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ap(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Po=function(n,e,t,r){r&&void 0===e||wh((0,O.gK)(n,"value"),e,t)},wh=function(n,e,t){const r=t instanceof un?new XT(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Cc(r));if("function"==typeof e)throw new Error(n+"contains a function "+Cc(r)+" with contents = "+e.toString());if(ap(e))throw new Error(n+"contains "+e.toString()+" "+Cc(r));if("string"==typeof e&&e.length>Z0/3&&(0,O.ug)(e)>Z0)throw new Error(n+"contains a string greater than "+Z0+" utf8 bytes "+Cc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,u=!1;if(pr(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!Bp(c)))throw new Error(n+" contains an invalid key ("+c+") "+Cc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),qC(n)})(r,c),wh(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&u)throw new Error(n+' contains ".value" child '+Cc(r)+" in addition to actual children.")}},c_=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const u=[];pr(e,(c,p)=>{const y=new un(c);if(wh(i,p,Vn(t,y)),".priority"===e0(y)&&!Nc(p))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=_p(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!Bp(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(JT);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&so(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,u)},LI=function(n,e,t){if(!t||void 0!==e){if(ap(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nc(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Eh=function(n,e,t,r){if(!(r&&void 0===t||Bp(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jp=function(n,e,t,r){if(!(r&&void 0===t||FI(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xi=function(n,e){if(".info"===kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},K0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Bp(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),FI(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ch(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],u=i.getPath();null!==t&&!t0(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(i)}t&&n.eventLists_.push(t)}function Hp(n,e,t){Ch(n,t),UI(n,r=>t0(r,e))}function Oo(n,e,t){Ch(n,t),UI(n,r=>so(r,e)||so(e,r))}function UI(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(ZA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ZA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();wc&&fr("event: "+t.toString()),nh(r)}}}const Y0="repo_interrupt";class KA{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gm(),this.transactionQueueTree_=new G0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Q0(n){const t=n.infoData_.getNode(new un(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function $p(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Q0(n)})}function HI(n,e,t,r,i){n.dataUpdateCount++;const u=new un(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const y=(0,O.UI)(t,C=>$n(C));c=function(n,e,t,r){const i=F0(n,r);if(i){const u=NI(i),c=u.path,p=u.queryId,y=Si(c,e),C=Cn.fromObject(t);return Fp(n,c,new fh(Dp(p),y,C))}return[]}(n.serverSyncTree_,u,y,i)}else{const y=$n(t);c=function(n,e,t,r){const i=F0(n,r);if(null!=i){const u=NI(i),c=u.path,p=u.queryId,y=Si(c,e);return Fp(n,c,new fl(Dp(p),y,t))}return[]}(n.serverSyncTree_,u,y,i)}else if(r){const y=(0,O.UI)(t,C=>$n(C));c=function(n,e,t){const r=Cn.fromObject(t);return yh(n,new fh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=$n(t);c=es(n.serverSyncTree_,u,y)}let p=u;c.length>0&&(p=Oc(n,u)),Oo(n.eventQueue_,p,c)}function J0(n,e){d_(n,"connected",e),!1===e&&function(n){Wp(n,"onDisconnectEvents");const e=$p(n),t=Gm();c0(n.onDisconnect_,Jt(),(i,u)=>{const c=OI(i,u,n.serverSyncTree_,e);ch(t,i,c)});let r=[];c0(t,Jt(),(i,u)=>{r=r.concat(es(n.serverSyncTree_,i,u));const c=g_(n,i);Oc(n,c)}),n.onDisconnect_=Gm(),Oo(n.eventQueue_,Jt(),r)}(n)}function d_(n,e,t){const r=new un("/.info/"+e),i=$n(t);n.infoData_.updateSnapshot(r,i);const u=es(n.infoSyncTree_,r,i);Oo(n.eventQueue_,r,u)}function Gp(n){return n.nextWriteId_++}function h_(n,e,t,r,i){Wp(n,"set",{path:e.toString(),value:t,priority:r});const u=$p(n),c=$n(t,r),p=Rc(n.serverSyncTree_,e),y=a_(c,p,u),C=Gp(n),A=xc(n.serverSyncTree_,e,y,C,!0);Ch(n.eventQueue_,A),n.server_.put(e.toString(),c.val(!0),(P,V)=>{const z="ok"===P;z||Xi("set at "+e+" failed: "+P);const ve=ba(n.serverSyncTree_,C,!z);Oo(n.eventQueue_,e,ve),Pc(0,i,P,V)});const x=g_(n,e);Oc(n,x),Oo(n.eventQueue_,x,[])}function DN(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Wm(n.onDisconnect_,e),Pc(0,t,r,i)})}function X0(n,e,t,r){const i=$n(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(u,c)=>{"ok"===u&&ch(n.onDisconnect_,e,i),Pc(0,r,u,c)})}function ew(n,e,t){let r;r=".info"===kt(e._path)?P0(n.infoSyncTree_,e,t):P0(n.serverSyncTree_,e,t),Hp(n.eventQueue_,e._path,r)}function GI(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Y0)}function Wp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),fr(t,...e)}function Pc(n,e,t,r){e&&nh(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let u=i;r&&(u+=": "+r);const c=new Error(u);c.code=i,e(c)}})}function WI(n,e,t){return Rc(n.serverSyncTree_,e,t)||Dt.EMPTY_NODE}function Ih(n,e=n.transactionQueueTree_){if(e||qp(n,e),ml(e)){const t=p_(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(C=>C.currentWriteId),i=WI(n,e,r);let u=i;const c=i.hash();for(let C=0;C<t.length;C++){const A=t[C];(0,O.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const x=Si(e,A.path);u=u.updateChild(x,A.currentOutputSnapshotRaw)}const p=u.val(!0),y=e;n.server_.put(y.toString(),p,C=>{Wp(n,"transaction put response",{path:y.toString(),status:C});let A=[];if("ok"===C){const x=[];for(let P=0;P<t.length;P++)t[P].status=2,A=A.concat(ba(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&x.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();qp(n,Lp(n.transactionQueueTree_,e)),Ih(n,n.transactionQueueTree_),Oo(n.eventQueue_,e,A);for(let P=0;P<x.length;P++)nh(x[P])}else{if("datastale"===C)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{Xi("transaction at "+y.toString()+" failed: "+C);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=C}Oc(n,e)}},c)}(n,Vp(e),t)}else q0(e)&&Lr(e,t=>{Ih(n,t)})}function Oc(n,e){const t=qI(n,e),r=Vp(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],C=Si(t,y.path);let x,A=!1;if((0,O.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)A=!0,x=y.abortReason,i=i.concat(ba(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)A=!0,x="maxretry",i=i.concat(ba(n.serverSyncTree_,y.currentWriteId,!0));else{const P=WI(n,y.path,c);y.currentInputSnapshot=P;const V=e[p].update(P.val());if(void 0!==V){wh("transaction failed: Data returned ",V,y.path);let z=$n(V);"object"==typeof V&&null!=V&&(0,O.r3)(V,".priority")||(z=z.updatePriority(P.getPriority()));const ke=y.currentWriteId,rt=$p(n),It=a_(z,P,rt);y.currentOutputSnapshotRaw=z,y.currentOutputSnapshotResolved=It,y.currentWriteId=Gp(n),c.splice(c.indexOf(ke),1),i=i.concat(xc(n.serverSyncTree_,y.path,It,y.currentWriteId,y.applyLocally)),i=i.concat(ba(n.serverSyncTree_,ke,!0))}else A=!0,x="nodata",i=i.concat(ba(n.serverSyncTree_,y.currentWriteId,!0))}Oo(n.eventQueue_,t,i),i=[],A&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===x?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(x),!1,null)))}qp(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)nh(r[p]);Ih(n,n.transactionQueueTree_)}(n,p_(n,t),r),r}function qI(n,e){let t,r=n.transactionQueueTree_;for(t=kt(e);null!==t&&void 0===ml(r);)r=Lp(r,t),t=kt(e=wn(e));return r}function p_(n,e){const t=[];return tw(n,e,t),t.sort((r,i)=>r.order-i.order),t}function tw(n,e,t){const r=ml(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Lr(e,i=>{tw(n,i,t)})}function qp(n,e){const t=ml(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,W0(e,t.length>0?t:void 0)}Lr(e,r=>{qp(n,r)})}function g_(n,e){const t=Vp(qI(n,e)),r=Lp(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{zI(n,i)}),zI(n,r),Mc(r,i=>{zI(n,i)}),t}function zI(n,e){const t=ml(e);if(t){const r=[];let i=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,O.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,O.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(ba(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?W0(e,void 0):t.length=u+1,Oo(n.eventQueue_,Vp(e),i);for(let c=0;c<r.length;c++)nh(r[c])}}const __=function(n,e){const t=RN(n),r=t.namespace;return"firebase.com"===t.domain&&ma(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ma("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Xi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Rm(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new un(t.pathString)}},RN=function(n){let e="",t="",r="",i="",u="",c=!0,p="https",y=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(p=n.substring(0,C-1),n=n.substring(C+2));let A=n.indexOf("/");-1===A&&(A=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(A,x)),A<x&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(u){}e+="/"+i}return e}(n.substring(A,x)));const P=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));C=e.indexOf(":"),C>=0?(c="https"===p||"wss"===p,y=parseInt(e.substring(C+1),10)):C=e.length;const V=e.slice(0,C);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:u}};class eS{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class tS{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class KI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class y_{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return DN(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){xi("OnDisconnect.remove",this._path);const e=new O.BH;return X0(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){xi("OnDisconnect.set",this._path),Po("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return X0(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){xi("OnDisconnect.setWithPriority",this._path),Po("OnDisconnect.setWithPriority",e,this._path,!1),LI("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function(n,e,t,r,i){const u=$n(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&ch(n.onDisconnect_,e,u),Pc(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){xi("OnDisconnect.update",this._path),c_("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function(n,e,t,r){if((0,O.xb)(t))return fr("onDisconnect().update() called with empty data.  Don't do anything."),void Pc(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,u)=>{"ok"===i&&pr(t,(c,p)=>{const y=$n(p);ch(n.onDisconnect_,Vn(e,c),y)}),Pc(0,r,i,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ts{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return jt(this._path)?null:e0(this._path)}get ref(){return new uo(this._repo,this._path)}get _queryIdentifier(){const e=lI(this._queryParams),t=TC(e);return"{}"===t?"default":t}get _queryObject(){return lI(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof ts))return!1;const t=this._repo===e._repo,r=t0(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function nw(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _l(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===wa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Mo)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==_a)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===En){if(null!=e&&!Nc(e)||null!=t&&!Nc(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof a0||n.getIndex()===Vm,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Dh(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class uo extends ts{constructor(e,t){super(e,t,new u0,!1)}get parent(){const e=WC(this._path);return null===e?null:new uo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Tr{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new un(e),r=kc(this.ref,e);return new Tr(this._node.getChild(t),r,En)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Tr(i,kc(this.ref,r),En)))}hasChild(e){const t=new un(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function YI(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?kc(n._root,e):n._root}function v_(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=__(e,n._repo.repoInfo_.nodeAdmin);K0("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ma("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),YI(n,t.path.toString())}function kc(n,e){return null===kt((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jp("child","path",t,!1)):jp("child","path",e,!1),new uo(n._repo,Vn(n._path,e));var t}function w_(n,e){n=(0,O.m9)(n),xi("set",n._path),Po("set",e,n._path,!1);const t=new O.BH;return h_(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function XI(n,e){c_("update",e,n._path,!1);const t=new O.BH;return function(n,e,t,r){Wp(n,"update",{path:e.toString(),value:t});let i=!0;const u=$p(n),c={};if(pr(t,(p,y)=>{i=!1,c[p]=OI(Vn(e,p),$n(y),n.serverSyncTree_,u)}),i)fr("update() called with empty data.  Don't do anything."),Pc(0,r,"ok",void 0);else{const p=Gp(n),y=function(n,e,t,r){!function(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=p0(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Cn.fromObject(t);return yh(n,new fh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);Ch(n.eventQueue_,y),n.server_.merge(e.toString(),t,(C,A)=>{const x="ok"===C;x||Xi("update at "+e+" failed: "+C);const P=ba(n.serverSyncTree_,p,!x),V=P.length>0?Oc(n,e):e;Oo(n.eventQueue_,V,P),Pc(0,r,C,A)}),pr(t,C=>{const A=g_(n,Vn(e,C));Oc(n,A)}),Oo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function rS(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,A)=>{const x=Si(C,t);r=r||Cu(A,x)});let i=n.syncPointTree_.get(t);i?r=r||Cu(i,Jt()):(i=new AI,n.syncPointTree_=n.syncPointTree_.set(t,i));const u=null!=r,c=u?new pl(r,!0,!1):null;return function(n){return Km(n.viewCache_)}(SI(i,e,Qm(n.pendingWriteTree_,e._path),u?c.getNode():Dt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=$n(r).withIndex(e._queryParams.getIndex()),u=es(n.serverSyncTree_,e._path,i);return Hp(n.eventQueue_,e._path,u),Promise.resolve(i)},r=>(Wp(n,"get for query "+(0,O.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,O.m9)(n))._repo,n).then(e=>new Tr(e,new uo(n._repo,n._path),n._queryParams.getIndex()))}class E_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new eS("value",this,new Tr(e.snapshotNode,new uo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tS(this,e,t):null}matches(e){return e instanceof E_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Th{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tS(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=kc(new uo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new eS(e.type,this,new Tr(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Th&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ri(n,e,t,r,i){let u;if("object"==typeof r&&(u=void 0,i=r),"function"==typeof r&&(u=r),i&&i.onlyOnce){const y=t,C=(A,x)=>{ew(n._repo,n,p),y(A,x)};C.userCallback=t.userCallback,C.context=t.context,t=C}const c=new KI(t,u||void 0),p="value"===e?new E_(c):new Th(e,c);return function(n,e,t){let r;r=".info"===kt(e._path)?Op(n.infoSyncTree_,e,t):Op(n.serverSyncTree_,e,t),Hp(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>ew(n._repo,n,p)}function iw(n,e,t,r){return Ri(n,"value",e,t,r)}function eb(n,e,t,r){return Ri(n,"child_added",e,t,r)}function tb(n,e,t,r){return Ri(n,"child_changed",e,t,r)}function sw(n,e,t,r){return Ri(n,"child_moved",e,t,r)}function nb(n,e,t,r){return Ri(n,"child_removed",e,t,r)}function rb(n,e,t){let r=null;const i=t?new KI(t):null;"value"===e?r=new E_(i):e&&(r=new Th(e,i)),ew(n._repo,n,r)}class lo{}class ib extends lo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Po("endAt",this._value,e._path,!0);const t=l0(e._queryParams,this._value,this._key);if(Dh(t),_l(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(e._repo,e._path,t,e._orderByCalled)}}class sb extends lo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Po("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===wa?("string"==typeof e&&(e=aI(e)),i=l0(n,e,t)):(r=null==t?Mo:aI(t),i=l0(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Dh(t),_l(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(e._repo,e._path,t,e._orderByCalled)}}class ab extends lo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Po("startAt",this._value,e._path,!0);const t=jm(e._queryParams,this._value,this._key);if(Dh(t),_l(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ts(e._repo,e._path,t,e._orderByCalled)}}class ub extends lo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Po("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===wa)"string"==typeof e&&(e=oI(e)),r=jm(n,e,t);else{let i;i=null==t?_a:oI(t),r=jm(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Dh(t),_l(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ts(e._repo,e._path,t,e._orderByCalled)}}class ow extends lo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class sS extends lo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class db extends lo{constructor(e){super(),this._path=e}_apply(e){nw(e,"orderByChild");const t=new un(this._path);if(jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new a0(t),i=bp(e._queryParams,r);return _l(i),new ts(e._repo,e._path,i,!0)}}class aS extends lo{_apply(e){nw(e,"orderByKey");const t=bp(e._queryParams,wa);return _l(t),new ts(e._repo,e._path,t,!0)}}class ON extends lo{_apply(e){nw(e,"orderByPriority");const t=bp(e._queryParams,En);return _l(t),new ts(e._repo,e._path,t,!0)}}class uS extends lo{_apply(e){nw(e,"orderByValue");const t=bp(e._queryParams,Vm);return _l(t),new ts(e._repo,e._path,t,!0)}}class cS extends lo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Po("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ib(this._value,this._key)._apply(new ab(this._value,this._key)._apply(e))}}function Da(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,O.hu)(!n_,"__referenceConstructor has already been defined"),n_=n})(uo),function(n){(0,O.hu)(!i_,"__referenceConstructor has already been defined"),i_=n}(uo);const fb={};function Zp(n,e,t,r,i){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||ma("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fr("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,C,c=__(u,i),p=c.repoInfo;"undefined"!=typeof process&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(y=!0,u=`http://${C}?ns=${p.namespace}`,c=__(u,i),p=c.repoInfo):y=!c.repoInfo.secure;const A=i&&y?new cp(cp.OWNER):new MC(n.name,n.options,e);K0("Invalid Firebase Database URL",c),jt(c.path)||ma("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,e,t,r){let i=fb[e.name];i||(i={},fb[e.name]=i);let u=i[n.toURLString()];return u&&ma("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new KA(n,false,t,r),i[n.toURLString()]=u,u}(p,n,A,new Pv(n.name,t));return new Fc(x,n)}class Fc{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=ir(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new $m(n.repoInfo_,(r,i,u,c)=>{HI(n,r,i,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>J0(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new hl(n.repoInfo_,e,(r,i,u,c)=>{HI(n,r,i,u,c)},r=>{J0(n,r)},r=>{!function(n,e){pr(e,(t,r)=>{d_(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return Bv[t]||(Bv[t]=e()),Bv[t]}(n.repoInfo_,()=>new hI(n.stats_,n.server_)),n.infoData_=new lA,n.infoSyncTree_=new MI({startListening:(r,i,u,c)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=es(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),d_(n,"connected",!1),n.serverSyncTree_=new MI({startListening:(r,i,u,c)=>(n.server_.listen(r,u,i,(p,y)=>{const C=c(p,y);Oo(n.eventQueue_,r._path,C)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new uo(this._repo,Jt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=fb[e];(!t||t[n.key]!==n)&&ma(`Database ${e}(${n.repoInfo_}) has already been deleted.`),GI(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ma("Cannot call "+e+" on a deleted database.")}}function lw(n,e){Sv(n,e)}class VN{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}hl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},hl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},bv(ga.SDK_VERSION),(0,ga._registerComponent)(new _u.wA("database",(e,{instanceIdentifier:t})=>Zp(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ga.registerVersion)(IC,"0.12.4",void 0),(0,ga.registerVersion)(IC,"0.12.4","esm2017");const _b=new oi.Yd("@firebase/database-compat"),yb=function(n){_b.warn("FIREBASE WARNING: "+n)};class vS{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),u=>r(u)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,yb("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class vb{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),jp("DataSnapshot.child","path",e,!1),new bu(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),jp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new bu(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ss(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Vr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var u;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const c=Vr.getCancelAndContextArgs_("Query.on",r,i),p=(C,A)=>{t.call(c.context,new bu(this.database,C),A)};p.userCallback=t,p.context=c.context;const y=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return iw(this._delegate,p,y),t;case"child_added":return eb(this._delegate,p,y),t;case"child_removed":return nb(this._delegate,p,y),t;case"child_changed":return tb(this._delegate,p,y),t;case"child_moved":return sw(this._delegate,p,y),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,rb(this._delegate,e,i)}else rb(this._delegate,e)}get(){return rS(this._delegate).then(e=>new bu(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const u=Vr.getCancelAndContextArgs_("Query.once",r,i),c=new O.BH,p=(C,A)=>{const x=new bu(this.database,C);t&&t.call(u.context,x,A),c.resolve(x)};p.userCallback=t,p.context=u.context;const y=C=>{u.cancel&&u.cancel.call(u.context,C),c.reject(C)};switch(e){case"value":iw(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":eb(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":nb(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":tb(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":sw(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Vr(this.database,Da(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ow(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Vr(this.database,Da(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sS(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Vr(this.database,Da(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jp("orderByChild","path",n,!1),new db(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Vr(this.database,Da(this._delegate,new aS))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Vr(this.database,Da(this._delegate,new ON))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Vr(this.database,Da(this._delegate,new uS))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Vr(this.database,Da(this._delegate,function(n=null,e){return Eh("startAt","key",e,!0),new ab(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Vr(this.database,Da(this._delegate,function(n,e){return Eh("startAfter","key",e,!0),new ub(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Vr(this.database,Da(this._delegate,function(n,e){return Eh("endAt","key",e,!0),new ib(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Vr(this.database,Da(this._delegate,function(n,e){return Eh("endBefore","key",e,!0),new sb(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Vr(this.database,Da(this._delegate,function(n,e){return Eh("equalTo","key",e,!0),new cS(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Vr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ss(this.database,new uo(this._delegate._repo,this._delegate._path))}}class Ss extends Vr{constructor(e,t){super(e,new ts(t._repo,t._path,new u0,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ss(this.database,kc(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ss(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Ss(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=w_(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,yb("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xi("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=XI(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(xi("setWithPriority",n._path),Po("setWithPriority",e,n._path,!1),LI("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return h_(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),u=>r(u)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return xi("remove",n._path),w_(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,O.m9)(n),xi("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new O.BH,p=iw(n,()=>{});return function(n,e,t,r,i,u){Wp(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:bC(),applyLocally:u,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=WI(n,e,void 0);c.currentInputSnapshot=p;const y=c.update(p.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{wh("transaction failed: Data returned ",y,c.path),c.status=0;const C=Lp(n.transactionQueueTree_,e),A=ml(C)||[];let x;A.push(c),W0(C,A),"object"==typeof y&&null!==y&&(0,O.r3)(y,".priority")?(x=(0,O.DV)(y,".priority"),(0,O.hu)(Nc(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(Rc(n.serverSyncTree_,e)||Dt.EMPTY_NODE).getPriority().val();const P=$p(n),V=$n(y,x),z=a_(V,p,P);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=z,c.currentWriteId=Gp(n);const ve=xc(n.serverSyncTree_,e,z,c.currentWriteId,c.applyLocally);Oo(n.eventQueue_,e,ve),Ih(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,C,A)=>{let x=null;y?u.reject(y):(x=new Tr(A,new uo(n._repo,n._path),En),u.resolve(new VN(C,x)))},p,i),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new vb(u.committed,new bu(this.database,u.snapshot)));return t&&i.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,O.m9)(n),xi("setPriority",n._path),LI("setPriority",e,!1);const t=new O.BH;return h_(n._repo,Vn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,O.m9)(n),xi("push",n._path),Po("push",e,n._path,!0);const t=Q0(n._repo),r=Cp(t),i=kc(n,r),u=kc(n,r);let c;return c=null!=e?w_(u,e).then(()=>u):Promise.resolve(u),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Ss(this.database,c));t&&i.then(()=>t(null),c=>t(c));const u=new Ss(this.database,r);return u.then=i.then.bind(i),u.catch=i.catch.bind(i,void 0),u}onDisconnect(){return xi("Reference.onDisconnect",this._delegate._path),new vS(new y_(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Kp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ma("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let u;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ma('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new cp(cp.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);u=new cp(c)}!function(n,e,t,r){n.repoInfo_=new Rm(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Ss){const t=v_(this._delegate,e.toString());return new Ss(this,t)}{const t=YI(this._delegate,e);return new Ss(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=v_(this._delegate,e);return new Ss(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),GI(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(Y0)}(n._repo)}(this._delegate)}}Kp.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var C_=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:u=!1}){bv(t);const c=new _u.zt("auth-internal",new _u.H0("database-standalone"));return c.setComponent(new _u.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Kp(Zp(n,c,void 0,e,u),n),namespace:i}}});const wS=Kp.ServerValue;!function(n){n.INTERNAL.registerComponent(new _u.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Kp(i,r)},"PUBLIC").setServiceProps({Reference:Ss,Query:Vr,Database:Kp,DataSnapshot:bu,enableLogging:lw,INTERNAL:C_,ServerValue:wS}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.4")}(VT.Z);var Lc=F(5363),ES=F(6063);class CS extends Ir.x{constructor(e=1/0,t=1/0,r=ES.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}function Cb(n,e,t){var r,i;let u,c=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,CC.B)({connector:()=>new CS(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function Ib(n,e){return(0,Do.m)(e)?Fn(()=>n,e):Fn(()=>n)}var bb=F(9468);F(5867);const s=new Map,o={activated:!1,tokenObservers:[]},a={initialized:!1,enabled:!1};function l(n){return s.get(n)||o}function d(n,e){s.set(n,e)}function m(){return a}class G{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Se=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Je(n){if(!l(n).activated)throw Se.create("use-before-activation",{appName:n.name})}function nn(n,e){return Mi.apply(this,arguments)}function Mi(){return Mi=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(x){throw Se.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw Se.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(x){throw Se.create("fetch-parse-error",{originalErrorMessage:x.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Se.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const C=1e3*Number(y[1]),A=Date.now();return{token:p.attestationToken,expireTimeMillis:A+C,issuedAtTimeMillis:A}}),Mi.apply(this,arguments)}function fw(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Uc="firebase-app-check-store";let Ah=null;function D_(){return Ah||(Ah=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Se.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Uc,{keyPath:"compositeKey"})}}catch(t){e(Se.create("storage-open",{originalErrorMessage:t.message}))}}),Ah)}function DS(){return DS=(0,me.Z)(function*(n,e){const r=(yield D_()).transaction(Uc,"readwrite"),u=r.objectStore(Uc).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var C;p(Se.create("storage-set",{originalErrorMessage:null===(C=y.target.error)||void 0===C?void 0:C.message}))}})}),DS.apply(this,arguments)}const _w=new oi.Yd("@firebase/app-check");function QN(n,e){return(0,O.hl)()?function(n,e){return function(n,e){return DS.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_w.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function JN(){return m().enabled}function XN(){return xS.apply(this,arguments)}function xS(){return xS=(0,me.Z)(function*(){const n=m();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),xS.apply(this,arguments)}const rL={error:"UNKNOWN_ERROR"};function iL(n){return O.US.encodeString(JSON.stringify(n),!1)}function Tb(n){return RS.apply(this,arguments)}function RS(){return RS=(0,me.Z)(function*(n,e=!1){const t=n.app;Je(t);const r=l(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&Ab(y)&&(i=y)}if(!e&&i&&Ab(i))return{token:i.token};let p,c=!1;if(JN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nn(fw(t,yield XN()),n.platformLoggerProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),c=!0);const y=yield r.exchangeTokenPromise;return yield QN(t,y),d(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?_w.warn(y.message):_w.error(y),u=y}return i?(p={token:i.token},d(t,Object.assign(Object.assign({},r),{token:i})),yield QN(t,i)):p=oL(u),c&&tP(t,p),p}),RS.apply(this,arguments)}function NS(n,e){const t=l(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),d(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function eP(n){const{app:e}=n,t=l(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new G((0,me.Z)(function*(){let r;if(r=l(e).token?yield Tb(n,!0):yield Tb(n),r.error)throw r.error}),()=>!0,()=>{const t=l(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),d(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tP(n,e){const t=l(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Ab(n){return n.expireTimeMillis-Date.now()>0}function oL(n){return{token:iL(rL),error:n}}class aL{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=l(this.app);for(const t of e)NS(this.app,t.next);return Promise.resolve()}}const lP="app-check-internal";(0,ga._registerComponent)(new _u.wA("app-check",n=>function(n,e){return new aL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lP).initialize()})),(0,ga._registerComponent)(new _u.wA(lP,n=>function(n){return{getToken:e=>Tb(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,u=l(i),c={next:t,error:r,type:e};if(d(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Ab(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),eP(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>eP(n))}(n,"INTERNAL",e),removeTokenListener:e=>NS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ga.registerVersion)("@firebase/app-check","0.5.2");class xb{constructor(){return(0,Ln.vb)("app-check")}}"undefined"!=typeof window&&window;var dP=F(127);const LS=new f.OlP("angularfire2.auth.use-emulator"),VS=new f.OlP("angularfire2.auth.settings"),US=new f.OlP("angularfire2.auth.tenant-id"),BS=new f.OlP("angularfire2.auth.langugage-code"),jS=new f.OlP("angularfire2.auth.use-device-language"),HS=new f.OlP("angularfire.auth.persistence"),$S=(n,e,t,r,i,u,c,p)=>(0,Ti.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[C,A]of Object.entries(c))y.settings[C]=A;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let GS=(()=>{class n{constructor(t,r,i,u,c,p,y,C,A,x,P,V){const z=new Ir.x,ve=Qe(void 0).pipe((0,Lc.Q)(c.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9259)))),(0,ct.U)(()=>(0,Ti.on)(t,u,r)),(0,ct.U)(ke=>$S(ke,u,p,C,A,x,y,P)),Cb({bufferSize:1,refCount:!1}));if(vr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{ve.pipe(So()).subscribe();const rt=ve.pipe(Fn(St=>St.getRedirectResult().then(qn=>qn,()=>null)),Ln.iC,Cb({bufferSize:1,refCount:!1})),It=ve.pipe(Fn(St=>new On.y(qn=>({unsubscribe:u.runOutsideAngular(()=>St.onAuthStateChanged(Au=>qn.next(Au),Au=>qn.error(Au),()=>qn.complete()))})))),Xt=ve.pipe(Fn(St=>new On.y(qn=>({unsubscribe:u.runOutsideAngular(()=>St.onIdTokenChanged(Au=>qn.next(Au),Au=>qn.error(Au),()=>qn.complete()))}))));this.authState=rt.pipe(Ib(It),(0,bb.R)(c.outsideAngular),(0,Lc.Q)(c.insideAngular)),this.user=rt.pipe(Ib(Xt),(0,bb.R)(c.outsideAngular),(0,Lc.Q)(c.insideAngular)),this.idToken=this.user.pipe(Fn(St=>St?(0,Tn.D)(St.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(Fn(St=>St?(0,Tn.D)(St.getIdTokenResult()):Qe(null))),this.credential=(0,vv.T)(rt,z,this.authState.pipe(Or(St=>!St))).pipe((0,ct.U)(St=>(null==St?void 0:St.user)?St:null),(0,bb.R)(c.outsideAngular),(0,Lc.Q)(c.insideAngular))}return(0,Ti.pX)(this,ve,u,{spy:{apply:(ke,rt,It)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&It.then(Xt=>z.next(Xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ti.Dh),f.LFG(Ti.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Ln.HU),f.LFG(LS,8),f.LFG(VS,8),f.LFG(US,8),f.LFG(BS,8),f.LFG(jS,8),f.LFG(HS,8),f.LFG(xb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function hP(n){return null==n}function fP(n){return"function"==typeof n.set}function pP(n,e){return fP(e)?e:n.ref(e)}function gP(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(fP(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function yw(n,e,t="on",r=yv.z){return new On.y(i=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,ct.U)(i=>{const{snapshot:u,prevKey:c}=i;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,CC.B)())}function mP(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function ML(n,e){const{payload:t,prevKey:r,key:i}=e,u=mP(n,i),c=function(n,e){if(hP(e))return 0;{const t=mP(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const C={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,C],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function _P(n){return(hP(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function yP(n,e,t){return function(n,e,t){return yw(n,"value","once",t).pipe(Fn(r=>{const i=[Qe(r)];return e.forEach(u=>i.push(yw(n,u,"on",t))),(0,vv.T)(...i).pipe(Zs(ML,[]))}),kT())}(n,e=_P(e),t)}function vP(n,e,t){const r=(e=_P(e)).map(i=>yw(n,i,"on",t));return(0,vv.T)(...r)}function wP(n,e){return function(r,i){return gP(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function kL(n){return function(t){return t?gP(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function EP(n,e){return function(){return yw(n,"value","on",e)}}const VL=new f.OlP("angularfire2.realtimeDatabaseURL"),UL=new f.OlP("angularfire2.database.use-emulator");let BL=(()=>{class n{constructor(t,r,i,u,c,p,y,C,A,x,P,V,z,ve,ke){this.schedulers=p;const rt=y,It=(0,Ti.on)(t,c,r);C&&$S(It,c,A,P,V,z,x,ve),this.database=(0,Ti.cc)(`${It.name}.database.${i}`,"AngularFireDatabase",It.name,()=>{const Xt=c.runOutsideAngular(()=>It.database(i||void 0));return rt&&Xt.useEmulator(...rt),Xt},[rt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>pP(this.database,t));let u=i;return r&&(u=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:wP(r,"update"),set:wP(r,"set"),push:i=>r.push(i),remove:kL(r),snapshotChanges:i=>yP(n,i,t).pipe(Ln.iC),stateChanges:i=>vP(n,i,t).pipe(Ln.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return yw(n,"value","on",e).pipe((0,ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){const e=(0,wi.jO)(n);return(0,At.e)((t,r)=>{const i=n.length,u=new Array(i);let c=n.map(()=>!1),p=!1;for(let y=0;y<i;y++)(0,Ci.Xf)(n[y]).subscribe(new kn.Q(r,C=>{u[y]=C,!p&&!c[y]&&(c[y]=!0,(p=c.every(Z.y))&&(c=null))},wv.Z));t.subscribe(new kn.Q(r,y=>{if(p){const C=[y,...u];r.next(e?e(...C):C)}}))})}(e),(0,ct.U)(([i,u])=>{const c=i.lastKeyToLoad,p=u.map(y=>y.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),(0,At.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,u=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(u)))&&t.next(u)))}),(0,ct.U)(i=>i.actions))}(n,vP(n,e).pipe(Zs((i,u)=>[...i,u],[])),t)}(n,i,t).pipe(Ln.iC),valueChanges:(i,u)=>yP(n,i,t).pipe((0,ct.U)(p=>p.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),Ln.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>EP(n,e.schedulers.outsideAngular)().pipe(Ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>EP(n,e.schedulers.outsideAngular)().pipe(Ln.iC,(0,ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>pP(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ti.Dh),f.LFG(Ti.xv,8),f.LFG(VL,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Ln.HU),f.LFG(UL,8),f.LFG(GS,8),f.LFG(LS,8),f.LFG(VS,8),f.LFG(US,8),f.LFG(BS,8),f.LFG(jS,8),f.LFG(HS,8),f.LFG(xb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jL=(()=>{class n{constructor(){dP.Z.registerVersion("angularfire",Ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[BL]}),n})();function WS(){return(0,At.e)((n,e)=>{let t,r=!1;n.subscribe(new kn.Q(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var tt,HL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bc={},qS=qS||{},Tt=HL||self;function Rb(){}function zS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ZS="closure_uid_"+(1e9*Math.random()>>>0),GL=0;function WL(n,e,t){return n.call.apply(n.bind,arguments)}function qL(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ni(n,e,t){return(Ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WL:qL).apply(null,arguments)}function Mb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Sh(){this.s=this.s,this.o=this.o}var ZL={};Sh.prototype.s=!1,Sh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,ZS)&&n[ZS]||(n[ZS]=++GL)}(this);delete ZL[n]}},Sh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const CP=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},IP=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function bP(n){return Array.prototype.concat.apply([],arguments)}function KS(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Nb(n){return/^[\s\xa0]*$/.test(n)}var Rs,DP=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xs(n,e){return-1!=n.indexOf(e)}function YS(n,e){return n<e?-1:n>e?1:0}e:{var TP=Tt.navigator;if(TP){var AP=TP.userAgent;if(AP){Rs=AP;break e}}Rs=""}function QS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function SP(n){const e={};for(const t in n)e[t]=n[t];return e}var xP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RP(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<xP.length;u++)t=xP[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function JS(n){return JS[" "](n),n}JS[" "]=Rb;var Pb,QL=xs(Rs,"Opera"),T_=xs(Rs,"Trident")||xs(Rs,"MSIE"),MP=xs(Rs,"Edge"),XS=MP||T_,NP=xs(Rs,"Gecko")&&!(xs(Rs.toLowerCase(),"webkit")&&!xs(Rs,"Edge"))&&!(xs(Rs,"Trident")||xs(Rs,"MSIE"))&&!xs(Rs,"Edge"),JL=xs(Rs.toLowerCase(),"webkit")&&!xs(Rs,"Edge");function PP(){var n=Tt.document;return n?n.documentMode:void 0}e:{var ex="",tx=function(){var n=Rs;return NP?/rv:([^\);]+)(\)|;)/.exec(n):MP?/Edge\/([\d\.]+)/.exec(n):T_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):JL?/WebKit\/(\S+)/.exec(n):QL?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(tx&&(ex=tx?tx[1]:""),T_){var nx=PP();if(null!=nx&&nx>parseFloat(ex)){Pb=String(nx);break e}}Pb=ex}var XL={};function eV(){return e=XL,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=DP(String(Pb)).split("."),t=DP("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=YS(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||YS(0==i[2].length,0==u[2].length)||YS(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n}();var e}var tV=Tt.document&&T_&&(PP()||parseInt(Pb,10))||void 0,nV=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",Rb,e),Tt.removeEventListener("test",Rb,e)}catch(t){}return n}();function ns(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ww(n,e){if(ns.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(NP){e:{try{JS(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rV[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ww.Z.h.call(this)}}ns.prototype.h=function(){this.defaultPrevented=!0},Pi(ww,ns);var rV={2:"touch",3:"pen",4:"mouse"};ww.prototype.h=function(){ww.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ew="closure_listenable_"+(1e6*Math.random()|0),iV=0;function sV(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++iV,this.ca=this.fa=!1}function Ob(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function kb(n){this.src=n,this.g={},this.h=0}function ix(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=CP(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Ob(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function sx(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}kb.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=sx(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new sV(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var ox="closure_lm_"+(1e6*Math.random()|0),ax={};function kP(n,e,t,r,i){if(r&&r.once)return LP(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)kP(n,e[u],t,r,i);return null}return t=dx(t),n&&n[Ew]?n.N(e,t,vw(r)?!!r.capture:!!r,i):FP(n,e,t,!1,r,i)}function FP(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=vw(i)?!!i.capture:!!i,p=lx(n);if(p||(n[ox]=p=new kb(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function(){var e=aV;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)nV||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(UP(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function LP(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)LP(n,e[u],t,r,i);return null}return t=dx(t),n&&n[Ew]?n.O(e,t,vw(r)?!!r.capture:!!r,i):FP(n,e,t,!0,r,i)}function VP(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)VP(n,e[u],t,r,i);else r=vw(r)?!!r.capture:!!r,t=dx(t),n&&n[Ew]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=sx(u=n.g[e],t,r,i))&&(Ob(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=lx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=sx(e,t,r,i)),(t=-1<n?e[n]:null)&&ux(t))}function ux(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ew])ix(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(UP(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lx(e))?(ix(t,n),0==t.h&&(t.src=null,e[ox]=null)):Ob(n)}}}function UP(n){return n in ax?ax[n]:ax[n]="on"+n}function aV(n,e){if(n.ca)n=!0;else{e=new ww(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ux(n),n=t.call(r,e)}return n}function lx(n){return(n=n[ox])instanceof kb?n:null}var cx="__closure_events_fn_"+(1e9*Math.random()>>>0);function dx(n){return"function"==typeof n?n:(n[cx]||(n[cx]=function(e){return n.handleEvent(e)}),n[cx])}function ai(){Sh.call(this),this.i=new kb(this),this.P=this,this.I=null}function Oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ns(e,n);else if(e instanceof ns)e.target=e.target||n;else{var i=e;RP(e=new ns(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Fb(c,r,!0,e)&&i}if(i=Fb(c=e.g=n,r,!0,e)&&i,i=Fb(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Fb(c=e.g=t[u],r,!1,e)&&i}function Fb(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&ix(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}Pi(ai,Sh),ai.prototype[Ew]=!0,ai.prototype.removeEventListener=function(n,e,t,r){VP(this,n,e,t,r)},ai.prototype.M=function(){if(ai.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ob(t[r]);delete n.g[e],n.h--}}this.I=null},ai.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ai.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var hx=Tt.JSON.stringify;function uV(){var n=jP;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var px,BP=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new cV,n=>n.reset());class cV{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dV(n){Tt.setTimeout(()=>{throw n},0)}function fx(n,e){px||function(){var n=Tt.Promise.resolve(void 0);px=function(){n.then(fV)}}(),gx||(px(),gx=!0),jP.add(n,e)}var gx=!1,jP=new class{constructor(){this.h=this.g=null}add(e,t){const r=BP.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fV(){for(var n;n=uV();){try{n.h.call(n.g)}catch(t){dV(t)}var e=BP;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}gx=!1}function Lb(n,e){ai.call(this),this.h=n||1,this.g=e||Tt,this.j=Ni(this.kb,this),this.l=Date.now()}function mx(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _x(n,e,t){if("function"==typeof n)t&&(n=Ni(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ni(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function HP(n){n.g=_x(()=>{n.g=null,n.i&&(n.i=!1,HP(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(Lb,ai),(tt=Lb.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Oi(this,"tick"),this.da&&(mx(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Lb.Z.M.call(this),mx(this),delete this.g};class pV extends Sh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:HP(this)}M(){super.M(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cw(n){Sh.call(this),this.h=n,this.g={}}Pi(Cw,Sh);var $P=[];function GP(n,e,t,r){Array.isArray(t)||(t&&($P[0]=t.toString()),t=$P);for(var i=0;i<t.length;i++){var u=kP(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function WP(n){QS(n.g,function(e,t){this.g.hasOwnProperty(t)&&ux(e)},n),n.g={}}function Vb(){this.g=!0}function A_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return hx(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Cw.prototype.M=function(){Cw.Z.M.call(this),WP(this)},Cw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vb.prototype.Aa=function(){this.g=!1},Vb.prototype.info=function(){};var Yp={},qP=null;function Ub(){return qP=qP||new ai}function zP(n){ns.call(this,Yp.Ma,n)}function Iw(n){const e=Ub();Oi(e,new zP(e,n))}function ZP(n,e){ns.call(this,Yp.STAT_EVENT,n),this.stat=e}function Ms(n){const e=Ub();Oi(e,new ZP(e,n))}function KP(n,e){ns.call(this,Yp.Na,n),this.size=e}function bw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}Yp.Ma="serverreachability",Pi(zP,ns),Yp.STAT_EVENT="statevent",Pi(ZP,ns),Yp.Na="timingevent",Pi(KP,ns);var Bb={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},YP={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yx(){}function JP(){}yx.prototype.h=null;var Ex,Dw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vx(){ns.call(this,"d")}function wx(){ns.call(this,"c")}function jb(){}function Tw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Cw(this),this.P=vV,this.W=new Lb(n=XS?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new XP}function XP(){this.i=null,this.g="",this.h=!1}Pi(vx,ns),Pi(wx,ns),Pi(jb,yx),jb.prototype.g=function(){return new XMLHttpRequest},jb.prototype.i=function(){return{}},Ex=new jb;var vV=45e3,Cx={},Hb={};function Ix(n,e,t){n.K=1,n.v=zb(jc(e)),n.s=t,n.U=!0,eO(n,null)}function eO(n,e){n.F=Date.now(),Aw(n),n.A=jc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),lO(t.h,"t",r),n.C=0,t=n.l.H,n.h=new XP,n.g=NO(n.l,t?e:null,!n.s),0<n.O&&(n.L=new pV(Ni(n.Ia,n,n.g),n.O)),GP(n.V,n.g,"readystatechange",n.gb),e=n.H?SP(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Iw(1),function(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var C=p[y].split("=");if(1<C.length){var A=C[0];C=C[1];var x=A.split("_");c=2<=x.length&&"type"==x[1]?c+(A+"=")+C+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function tO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function nO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=wV(n,t),i==Hb){4==e&&(n.o=4,Ms(14),r=!1),A_(n.j,n.m,null,"[Incomplete Response]");break}if(i==Cx){n.o=4,Ms(15),A_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}A_(n.j,n.m,i,null),bx(n,i)}tO(n)&&i!=Hb&&i!=Cx&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ms(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),kx(e),e.L=!0,Ms(11))):(A_(n.j,n.m,t,"[Invalid Chunked Response]"),Qp(n),Sw(n))}function wV(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Hb:(t=Number(e.substring(t,r)),isNaN(t)?Cx:(r+=1)+t>e.length?Hb:(e=e.substr(r,t),n.C=r+t,e))}function Aw(n){n.Y=Date.now()+n.P,rO(n,n.P)}function rO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bw(Ni(n.eb,n),e)}function $b(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Sw(n){0==n.l.G||n.I||SO(n.l,n)}function Qp(n){$b(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mx(n.W),WP(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function bx(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ax(t.i,n)))if(t.I=n.N,!n.J&&Ax(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=bw(Ni(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Xb(t),Qb(t)}Ox(t),Ms(18)}if(1>=hO(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else eg(t,11)}else if((n.J||t.g==n)&&Xb(t),!Nb(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const A=C[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=C[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const P=C[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(xs(z,"spdy")||xs(z,"quic")||xs(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Sx(u,u.h),u.h=null))}if(r.D){const ve=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(r.sa=ve,Xn(r.F,r.D,ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=MO(r,r.H?r.la:null,r.W),c.J){fO(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&($b(p),Aw(p)),r.g=c}else TO(r);0<t.l.length&&Jb(t)}else"stop"!=C[0]&&"close"!=C[0]||eg(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?eg(t,7):Nx(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Iw(4)}catch(C){}}function Dx(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zS(n)||"string"==typeof n)IP(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(zS(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(zS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function S_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof S_)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Tx(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Jp(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Jp(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Jp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Tw.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Hc(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const A=Hc(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||XS||this.g&&(this.h.h||this.g.ga()||EO(this.g)))){this.I||4!=A||7==e||Iw(8==e||0>=x?3:2),$b(this);var t=this.g.ba();this.N=t;t:if(tO(this)){var r=EO(this.g);n="";var i=r.length,u=4==Hc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qp(this),Sw(this);var c="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nb(p)){var C=p;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Ms(12),Qp(this),Sw(this);break e}A_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bx(this,t)}this.U?(nO(this,A,c),XS&&this.i&&3==A&&(GP(this.V,this.W,"tick",this.fb),this.W.start())):(A_(this.j,this.m,c,null),bx(this,c)),4==A&&Qp(this),this.i&&!this.I&&(4==A?SO(this.l,this):(this.i=!1,Aw(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ms(12)):(this.o=0,Ms(13)),Qp(this),Sw(this)}}}catch(A){}},tt.fb=function(){if(this.g){var n=Hc(this.g),e=this.g.ga();this.C<e.length&&($b(this),nO(this,n,e),this.i&&4!=n&&Aw(this))}},tt.cancel=function(){this.I=!0,Qp(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Iw(3),Ms(17)),Qp(this),this.o=2,Sw(this)):rO(this,this.Y-n)},(tt=S_.prototype).R=function(){Tx(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return Tx(this),this.g.concat()},tt.get=function(n,e){return Jp(this.h,n)?this.h[n]:e},tt.set=function(n,e){Jp(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var iO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Xp){this.g=void 0!==e?e:n.g,Gb(this,n.j),this.s=n.s,Wb(this,n.i),qb(this,n.m),this.l=n.l,e=n.h;var t=new Mw;t.i=e.i,e.g&&(t.g=new S_(e.g),t.h=e.h),sO(this,t),this.o=n.o}else n&&(t=String(n).match(iO))?(this.g=!!e,Gb(this,t[1]||"",!0),this.s=xw(t[2]||""),Wb(this,t[3]||"",!0),qb(this,t[4]),this.l=xw(t[5]||"",!0),sO(this,t[6]||"",!0),this.o=xw(t[7]||"")):(this.g=!!e,this.h=new Mw(null,this.g))}function jc(n){return new Xp(n)}function Gb(n,e,t){n.j=t?xw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wb(n,e,t){n.i=t?xw(e,!0):e}function qb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function sO(n,e,t){e instanceof Mw?(n.h=e,function(n,e){e&&!n.j&&(xh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(aO(this,r),lO(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Rw(e,SV)),n.h=new Mw(e,n.g))}function Xn(n,e,t){n.h.set(e,t)}function zb(n){return Xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function xw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,DV),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function DV(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rw(e,oO,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rw(e,oO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rw(t,"/"==t.charAt(0)?AV:TV,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rw(t,xV)),n.join("")};var oO=/[#\/\?@]/g,TV=/[#\?:]/g,AV=/[#\?]/g,SV=/[#\?@]/g,xV=/#/g;function Mw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xh(n){n.g||(n.g=new S_,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function aO(n,e){xh(n),e=x_(n,e),Jp(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Jp((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Tx(n)))}function uO(n,e){return xh(n),e=x_(n,e),Jp(n.g.h,e)}function lO(n,e,t){aO(n,e),0<t.length&&(n.i=null,n.g.set(x_(n,e),KS(t)),n.h+=t.length)}function x_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function cO(n){this.l=n||NV,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ea&&Tt.g.Ea()&&Tt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=Mw.prototype).add=function(n,e){xh(this),this.i=null,n=x_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){xh(this),this.g.forEach(function(t,r){IP(t,function(i){n.call(e,i,r,this)},this)},this)},tt.T=function(){xh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},tt.R=function(n){xh(this);var e=[];if("string"==typeof n)uO(this,n)&&(e=bP(e,this.g.get(x_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=bP(e,n[t])}return e},tt.set=function(n,e){return xh(this),this.i=null,uO(this,n=x_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var NV=10;function dO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function hO(n){return n.h?1:n.g?n.g.size:0}function Ax(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sx(n,e){n.g?n.g.add(e):n.h=e}function fO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function pO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return KS(n.i)}function xx(){}function PV(){this.g=new xx}function OV(n,e,t){const r=t||"";try{Dx(n,function(i,u){let c=i;vw(i)&&(c=hx(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zb(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function Nw(n){this.l=n.$b||null,this.j=n.ib||!1}function Kb(n,e){ai.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Rx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cO.prototype.cancel=function(){if(this.i=pO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xx.prototype.stringify=function(n){return Tt.JSON.stringify(n,void 0)},xx.prototype.parse=function(n){return Tt.JSON.parse(n,void 0)},Pi(Nw,yx),Nw.prototype.g=function(){return new Kb(this.l,this.j)},Nw.prototype.i=function(n){return function(){return n}}({}),Pi(Kb,ai);var Rx=0;function gO(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ow(n)}function Ow(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Kb.prototype).open=function(n,e){if(this.readyState!=Rx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ow(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pw(this)),this.readyState=Rx},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ow(this)),this.g&&(this.readyState=3,Ow(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gO(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pw(this):Ow(this),3==this.readyState&&gO(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Pw(this))},tt.Ta=function(n){this.g&&(this.response=n,Pw(this))},tt.ha=function(){this.g&&Pw(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Kb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var FV=Tt.JSON.parse;function Ur(n){ai.call(this),this.headers=new S_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=mO,this.K=this.L=!1}Pi(Ur,ai);var mO="",LV=/^https?$/i,VV=["POST","PUT"];function BV(n){return"content-type"==n.toLowerCase()}function _O(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,yO(n),Yb(n)}function yO(n){n.D||(n.D=!0,Oi(n,"complete"),Oi(n,"error"))}function vO(n){if(n.h&&void 0!==qS&&(!n.C[1]||4!=Hc(n)||2!=n.ba()))if(n.v&&4==Hc(n))_x(n.Fa,0,n);else if(Oi(n,"readystatechange"),4==Hc(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(iO)[1]||null;if(!i&&Tt.self&&Tt.self.location){var u=Tt.self.location.protocol;i=u.substr(0,u.length-1)}r=!LV.test(i?i.toLowerCase():"")}t=r}if(t)Oi(n,"complete"),Oi(n,"success");else{n.m=6;try{var c=2<Hc(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",yO(n)}}finally{Yb(n)}}}function Yb(n,e){if(n.g){wO(n);const t=n.g,r=n.C[0]?Rb:null;n.g=null,n.C=null,e||Oi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function wO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function Hc(n){return n.g?n.g.readyState:0}function EO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case mO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return QS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xn(n,e,t))}function kw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function CO(n){this.za=0,this.l=[],this.h=new Vb,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kw("baseRetryDelayMs",5e3,n),this.$a=kw("retryDelaySeedMs",1e4,n),this.Ya=kw("forwardChannelMaxRetries",2,n),this.ra=kw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new cO(n&&n.concurrentRequestLimit),this.Ca=new PV,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Nx(n){if(IO(n),3==n.G){var e=n.V++,t=jc(n.F);Xn(t,"SID",n.J),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),Fw(n,t),(e=new Tw(n,n.h,e,void 0)).K=2,e.v=zb(jc(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(t=Tt.navigator.sendBeacon(e.v.toString(),"")),!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=NO(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Aw(e)}RO(n)}function Qb(n){n.g&&(kx(n),n.g.cancel(),n.g=null)}function IO(n){Qb(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),Xb(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function Px(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Jb(n)}function Jb(n){dO(n.i)||n.m||(n.m=!0,fx(n.Ha,n),n.C=0)}function bO(n,e){var t;t=e?e.m:n.V++;const r=jc(n.F);Xn(r,"SID",n.J),Xn(r,"RID",t),Xn(r,"AID",n.U),Fw(n,r),n.o&&n.s&&Mx(r,n.o,n.s),t=new Tw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=DO(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Sx(n.i,t),Ix(t,r,e)}function Fw(n,e){n.j&&Dx({},function(t,r){Xn(e,r,t)})}function DO(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ni(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let C=i[y].h;const A=i[y].g;if(C-=u,0>C)u=Math.max(0,i[y].h-100),p=!1;else try{OV(A,c,"req"+C+"_")}catch(x){r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function TO(n){n.g||n.u||(n.Y=1,fx(n.Ga,n),n.A=0)}function Ox(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=bw(Ni(n.Ga,n),xO(n,n.A)),n.A++,0))}function kx(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function AO(n){n.g=new Tw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=jc(n.oa);Xn(e,"RID","rpc"),Xn(e,"SID",n.J),Xn(e,"CI",n.N?"0":"1"),Xn(e,"AID",n.U),Fw(n,e),Xn(e,"TYPE","xmlhttp"),n.o&&n.s&&Mx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=zb(jc(e)),t.s=null,t.U=!0,eO(t,n)}function Xb(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function SO(n,e){var t=null;if(n.g==e){Xb(n),kx(n),n.g=null;var r=2}else{if(!Ax(n.i,e))return;t=e.D,fO(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Oi(r=Ub(),new KP(r,t,e,i)),Jb(n)}else TO(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(hO(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=bw(Ni(n.Ha,n,e),xO(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ox(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:eg(n,5);break;case 4:eg(n,10);break;case 3:eg(n,6);break;default:eg(n,2)}}function xO(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function eg(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ni(n.jb,n);t||(t=new Xp("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||Gb(t,"https"),zb(t)),function(n,e){const t=new Vb;if(Tt.Image){const r=new Image;r.onload=Mb(Zb,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Mb(Zb,t,r,"TestLoadImage: error",!1,e),r.onabort=Mb(Zb,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Mb(Zb,t,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ms(2);n.G=0,n.j&&n.j.va(e),RO(n),IO(n)}function RO(n){n.G=0,n.I=-1,n.j&&((0!=pO(n.i).length||0!=n.l.length)&&(n.i.i.length=0,KS(n.l),n.l.length=0),n.j.ua())}function MO(n,e,t){let r=function(n){return n instanceof Xp?jc(n):new Xp(n,void 0)}(t);if(""!=r.i)e&&Wb(r,e+"."+r.i),qb(r,r.m);else{const i=Tt.location;r=function(n,e,t,r){var i=new Xp(null,void 0);return n&&Gb(i,n),e&&Wb(i,e),t&&qb(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&QS(n.aa,function(i,u){Xn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Xn(r,e,t),Xn(r,"VER",n.ma),Fw(n,r),r}function NO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ur(t&&n.Ba&&!n.qa?new Nw({ib:!0}):n.qa)).L=n.H,e}function PO(){}function eD(){if(T_&&!(10<=Number(tV)))throw Error("Environmental error: no available transport.")}function ko(n,e){ai.call(this),this.g=new CO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Nb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new R_(this)}function OO(n){vx.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function kO(){wx.call(this),this.status=1}function R_(n){this.g=n}(tt=Ur.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ex.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Ex),this.g.onreadystatechange=Ni(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void _O(this,u)}n=t||"";const i=new S_(this.headers);r&&Dx(r,function(u,c){i.set(c,u)}),r=function(n){e:{var e=BV;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Tt.FormData&&n instanceof Tt.FormData,!(0<=CP(VV,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wO(this),0<this.B&&((this.K=function(n){return T_&&eV()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ni(this.pa,this)):this.A=_x(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){_O(this,u)}},tt.pa=function(){void 0!==qS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oi(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Oi(this,"complete"),Oi(this,"abort"),Yb(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yb(this,!0)),Ur.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?vO(this):this.cb())},tt.cb=function(){vO(this)},tt.ba=function(){try{return 2<Hc(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),FV(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=CO.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Tw(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=SP(u),RP(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=DO(this,i,e),Xn(t=jc(this.F),"RID",n),Xn(t,"CVER",22),this.D&&Xn(t,"X-HTTP-Session-Id",this.D),Fw(this,t),this.o&&u&&Mx(t,this.o,u),Sx(this.i,i),this.Ra&&Xn(t,"TYPE","init"),this.ja?(Xn(t,"$req",e),Xn(t,"SID","null"),i.$=!0,Ix(i,t,null)):Ix(i,t,e),this.G=2}}else 3==this.G&&(n?bO(this,n):0==this.l.length||dO(this.i)||bO(this))},tt.Ga=function(){if(this.u=null,AO(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=bw(Ni(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ms(10),Qb(this),AO(this))},tt.ab=function(){null!=this.v&&(this.v=null,Qb(this),Ox(this),Ms(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ms(2)):(this.h.info("Failed to ping google.com"),Ms(1))},(tt=PO.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},eD.prototype.g=function(n,e){return new ko(n,e)},Pi(ko,ai),ko.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),fx(Ni(n.hb,n,e))),Ms(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=MO(n,null,n.W),Jb(n)},ko.prototype.close=function(){Nx(this.g)},ko.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Px(this.g,e)}else this.v?((e={}).__data__=hx(n),Px(this.g,e)):Px(this.g,n)},ko.prototype.M=function(){this.g.j=null,delete this.j,Nx(this.g),delete this.g,ko.Z.M.call(this)},Pi(OO,vx),Pi(kO,wx),Pi(R_,PO),R_.prototype.xa=function(){Oi(this.g,"a")},R_.prototype.wa=function(n){Oi(this.g,new OO(n))},R_.prototype.va=function(n){Oi(this.g,new kO(n))},R_.prototype.ua=function(){Oi(this.g,"b")},eD.prototype.createWebChannel=eD.prototype.g,ko.prototype.send=ko.prototype.u,ko.prototype.open=ko.prototype.m,ko.prototype.close=ko.prototype.close,Bb.NO_ERROR=0,Bb.TIMEOUT=8,Bb.HTTP_ERROR=6,YP.COMPLETE="complete",JP.EventType=Dw,Dw.OPEN="a",Dw.CLOSE="b",Dw.ERROR="c",Dw.MESSAGE="d",ai.prototype.listen=ai.prototype.N,Ur.prototype.listenOnce=Ur.prototype.O,Ur.prototype.getLastError=Ur.prototype.La,Ur.prototype.getLastErrorCode=Ur.prototype.Da,Ur.prototype.getStatus=Ur.prototype.ba,Ur.prototype.getResponseJson=Ur.prototype.Qa,Ur.prototype.getResponseText=Ur.prototype.ga,Ur.prototype.send=Ur.prototype.ea;var $V=Bc.createWebChannelTransport=function(){return new eD},GV=Bc.getStatEventTarget=function(){return Ub()},Fx=Bc.ErrorCode=Bb,WV=Bc.EventType=YP,qV=Bc.Event=Yp,FO=Bc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zV=Bc.FetchXmlHttpFactory=Nw,tD=Bc.WebChannel=JP,ZV=Bc.XhrIo=Ur;const LO="@firebase/firestore";class ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ki.UNAUTHENTICATED=new ki(null),ki.GOOGLE_CREDENTIALS=new ki("google-credentials-uid"),ki.FIRST_PARTY=new ki("first-party-uid"),ki.MOCK_USER=new ki("mock-user");let M_="9.6.1";const Rh=new oi.Yd("@firebase/firestore");function Lx(){return Rh.logLevel}function Fe(n,...e){if(Rh.logLevel<=oi.in.DEBUG){const t=e.map(Vx);Rh.debug(`Firestore (${M_}): ${n}`,...t)}}function Br(n,...e){if(Rh.logLevel<=oi.in.ERROR){const t=e.map(Vx);Rh.error(`Firestore (${M_}): ${n}`,...t)}}function Lw(n,...e){if(Rh.logLevel<=oi.in.WARN){const t=e.map(Vx);Rh.warn(`Firestore (${M_}): ${n}`,...t)}}function Vx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${M_}) INTERNAL ASSERTION FAILED: `+n;throw Br(e),new Error(e)}function vt(n,e){n||dt()}function Ge(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class VO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ki.UNAUTHENTICATED))}shutdown(){}}class JV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XV{constructor(e){this.t=e,this.currentUser=ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let c=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ui,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const C=c;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},y=C=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(C=>y(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?y(C):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ui)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new VO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new ki(e)}}class eU{constructor(e,t,r){this.type="FirstParty",this.user=ki.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class tU{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new eU(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nU{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=i=>{e.enqueueRetryable(()=>{return null!=(u=i).error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`),t(u.token);var u})};const r=i=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?r(i):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),new UO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function rU(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Fo.I=-1;class BO{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=rU(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function N_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function jO(n){return n+"\0"}class li{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return li.fromMillis(Date.now())}static fromDate(e){return li.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new li(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new li(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function HO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $O(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vw{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gn extends Vw{construct(e,t,r){return new gn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new gn(t)}static emptyPath(){return new gn([])}}const iU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fi extends Vw{construct(e,t,r){return new Fi(e,t,r)}static isValidIdentifier(e){return iU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Ne(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ne(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Ne(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fi(t)}static emptyPath(){return new Fi([])}}class P_{constructor(e){this.fields=e,e.sort(Fi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return N_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ci(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new ci(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ci.EMPTY_BYTE_STRING=new ci("");const oU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mh(n){if(vt(!!n),"string"==typeof n){let e=0;const t=oU.exec(n);if(vt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jr(n.seconds),nanos:jr(n.nanos)}}function jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function O_(n){return"string"==typeof n?ci.fromBase64String(n):ci.fromUint8Array(n)}function Ux(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function GO(n){const e=n.mapValue.fields.__previous_value__;return Ux(e)?GO(e):e}function Uw(n){const e=Mh(n.mapValue.fields.__local_write_time__.timestampValue);return new li(e.seconds,e.nanos)}function ng(n){return null==n}function nD(n){return 0===n&&1/n==-1/0}function WO(n){return"number"==typeof n&&Number.isInteger(n)&&!nD(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(gn.fromString(e))}static fromName(e){return new ot(gn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new gn(e.slice()))}}function rg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ux(n)?4:10:dt()}function yl(n,e){const t=rg(n);if(t!==rg(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uw(n).isEqual(Uw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Mh(r.timestampValue),c=Mh(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,O_(n.bytesValue).isEqual(O_(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return jr(r.geoPointValue.latitude)===jr(i.geoPointValue.latitude)&&jr(r.geoPointValue.longitude)===jr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jr(r.integerValue)===jr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=jr(r.doubleValue),c=jr(i.doubleValue);return u===c?nD(u)===nD(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return N_(n.arrayValue.values||[],e.arrayValue.values||[],yl);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(HO(u)!==HO(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!yl(u[p],c[p])))return!1;return!0}(n,e);default:return dt()}var i}function Bw(n,e){return void 0!==(n.values||[]).find(t=>yl(t,e))}function k_(n,e){const t=rg(n),r=rg(e);if(t!==r)return Zt(t,r);switch(t){case 0:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=jr(i.integerValue||i.doubleValue),p=jr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return qO(n.timestampValue,e.timestampValue);case 4:return qO(Uw(n),Uw(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=O_(i),p=O_(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const C=Zt(c[y],p[y]);if(0!==C)return C}return Zt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Zt(jr(i.latitude),jr(u.latitude));return 0!==c?c:Zt(jr(i.longitude),jr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const C=k_(c[y],p[y]);if(C)return C}return Zt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},p=Object.keys(c),y=u.fields||{},C=Object.keys(y);p.sort(),C.sort();for(let A=0;A<p.length&&A<C.length;++A){const x=Zt(p[A],C[A]);if(0!==x)return x;const P=k_(c[p[A]],y[C[A]]);if(0!==P)return P}return Zt(p.length,C.length)}(n.mapValue,e.mapValue);default:throw dt()}}function qO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Mh(n),r=Mh(e),i=Zt(t.seconds,r.seconds);return 0!==i?i:Zt(t.nanos,r.nanos)}function Bx(n){return jx(n)}function jx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Mh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?O_(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=jx(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${jx(r.fields[p])}`;return u+"}"}(n.mapValue):dt();var e}function rD(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hx(n){return!!n&&"integerValue"in n}function $x(n){return!!n&&"arrayValue"in n}function zO(n){return!!n&&"nullValue"in n}function ZO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function iD(n){return!!n&&"mapValue"in n}function jw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jw(n.arrayValue.values[t]);return e}return Object.assign({},n)}class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!iD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jw(t)}setAll(e){let t=Fi.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=jw(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());iD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];iD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){tg(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new rs(jw(this.value))}}function KO(n){const e=[];return tg(n.fields,(t,r)=>{const i=new Fi([t]);if(iD(r)){const u=KO(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new P_(e)}class er{constructor(e,t,r,i,u){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=u}static newInvalidDocument(e){return new er(e,0,Lt.min(),rs.empty(),0)}static newFoundDocument(e,t,r){return new er(e,1,t,r,0)}static newNoDocument(e,t){return new er(e,2,t,rs.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,rs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new er(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class aU{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.R=null}}function YO(n,e=null,t=[],r=[],i=null,u=null,c=null){return new aU(n,e,t,r,i,u,c)}function Hw(n){const e=Ge(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+Bx(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ng(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=aD(e.startAt)),e.endAt&&(t+="|ub:",t+=aD(e.endAt)),e.R=t}return e.R}function sD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!_U(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!yl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XO(n.startAt,e.startAt)&&XO(n.endAt,e.endAt)}function oD(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ns extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new cU(e,t,r):"array-contains"===t?new fU(e,r):"in"===t?new pU(e,r):"not-in"===t?new gU(e,r):"array-contains-any"===t?new mU(e,r):new Ns(e,t,r)}static P(e,t,r){return"in"===t?new dU(e,r):new hU(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(k_(t,this.value)):null!==t&&rg(this.value)===rg(t)&&this.v(k_(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class cU extends Ns{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.v(t)}}class dU extends Ns{constructor(e,t){super(e,"in",t),this.keys=QO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hU extends Ns{constructor(e,t){super(e,"not-in",t),this.keys=QO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ot.fromName(r.referenceValue))}class fU extends Ns{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $x(t)&&Bw(t.arrayValue,this.value)}}class pU extends Ns{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bw(this.value.arrayValue,t)}}class gU extends Ns{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bw(this.value.arrayValue,t)}}class mU extends Ns{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$x(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bw(this.value.arrayValue,r))}}class $w{constructor(e,t){this.position=e,this.before=t}}function aD(n){return`${n.before?"b":"a"}:${n.position.map(e=>Bx(e)).join(",")}`}class F_{constructor(e,t="asc"){this.field=e,this.dir=t}}function _U(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function JO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?ot.comparator(ot.fromName(c.referenceValue),t.key):k_(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function XO(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yl(n.position[t],e.position[t]))return!1;return!0}class $c{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.S=null,this.D=null}}function ek(n,e,t,r,i,u,c,p){return new $c(n,e,t,r,i,u,c,p)}function L_(n){return new $c(n)}function uD(n){return!ng(n.limit)&&"F"===n.limitType}function lD(n){return!ng(n.limit)&&"L"===n.limitType}function Gx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Wx(n){for(const e of n.filters)if(e.V())return e.field;return null}function qx(n){return null!==n.collectionGroup}function V_(n){const e=Ge(n);if(null===e.S){e.S=[];const t=Wx(e),r=Gx(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new F_(t)),e.S.push(new F_(Fi.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.S.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new F_(Fi.keyField(),u))}}}return e.S}function Ta(n){const e=Ge(n);if(!e.D)if("F"===e.limitType)e.D=YO(e.path,e.collectionGroup,V_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of V_(e))t.push(new F_(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new $w(e.endAt.position,!e.endAt.before):null,i=e.startAt?new $w(e.startAt.position,!e.startAt.before):null;e.D=YO(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.D}function tk(n,e,t){return new $c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gw(n,e){return sD(Ta(n),Ta(e))&&n.limitType===e.limitType}function nk(n){return`${Hw(Ta(n))}|lt:${n.limitType}`}function zx(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bx(r.value)}`;var r}).join(", ")}]`),ng(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+aD(n.startAt)),n.endAt&&(e+=", endAt: "+aD(n.endAt)),`Target(${e})`}(Ta(n))}; limitType=${n.limitType})`}function Ww(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ot.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!JO(t.startAt,V_(t),r)||t.endAt&&JO(t.endAt,V_(t),r)));var t,r}function rk(n){return(e,t)=>{let r=!1;for(const i of V_(n)){const u=yU(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function yU(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?k_(p,y):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function ik(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nD(e)?"-0":e}}function sk(n){return{integerValue:""+n}}function ok(n,e){return WO(e)?sk(e):ik(n,e)}class cD{constructor(){this._=void 0}}function vU(n,e,t){return n instanceof U_?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof ig?uk(n,e):n instanceof sg?lk(n,e):function(r,i){const u=ak(r,i),c=ck(u)+ck(r.N);return Hx(u)&&Hx(r.N)?sk(c):ik(r.k,c)}(n,e)}function wU(n,e,t){return n instanceof ig?uk(n,e):n instanceof sg?lk(n,e):t}function ak(n,e){return n instanceof B_?Hx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class U_ extends cD{}class ig extends cD{constructor(e){super(),this.elements=e}}function uk(n,e){const t=dk(e);for(const r of n.elements)t.some(i=>yl(i,r))||t.push(r);return{arrayValue:{values:t}}}class sg extends cD{constructor(e){super(),this.elements=e}}function lk(n,e){let t=dk(e);for(const r of n.elements)t=t.filter(i=>!yl(i,r));return{arrayValue:{values:t}}}class B_ extends cD{constructor(e,t){super(),this.k=e,this.N=t}}function ck(n){return jr(n.integerValue||n.doubleValue)}function dk(n){return $x(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qw{constructor(e,t){this.field=e,this.transform=t}}class CU{constructor(e,t){this.version=e,this.transformResults=t}}class Hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hD{}function IU(n,e,t){n instanceof zw?function(r,i,u){const c=r.value.clone(),p=gk(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Nh?function(r,i,u){if(!dD(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=gk(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(pk(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zx(n,e,t){var i;n instanceof zw?function(r,i,u){if(!dD(r.precondition,i))return;const c=r.value.clone(),p=mk(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(fk(i),c).setHasLocalMutations()}(n,e,t):n instanceof Nh?function(r,i,u){if(!dD(r.precondition,i))return;const c=mk(r.fieldTransforms,u,i),p=i.data;p.setAll(pk(r)),p.setAll(c),i.convertToFoundDocument(fk(i),p).setHasLocalMutations()}(n,e,t):dD(n.precondition,i=e)&&i.convertToNoDocument(Lt.min())}function bU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=ak(r.transform,i||null);null!=u&&(null==t&&(t=rs.empty()),t.set(r.field,u))}return t||null}function hk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&N_(t,r,(i,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ig&&r instanceof ig||t instanceof sg&&r instanceof sg?N_(t.elements,r.elements,yl):t instanceof B_&&r instanceof B_?yl(t.N,r.N):t instanceof U_&&r instanceof U_);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function fk(n){return n.isFoundDocument()?n.version:Lt.min()}class zw extends hD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Nh extends hD{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function pk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gk(n,e,t){const r=new Map;vt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,wU(c,p,t[i]))}return r}function mk(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,vU(u,c,e))}return r}class Zw extends hD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Kx extends hD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class DU{constructor(e){this.count=e}}var $r,rn;function _k(n){switch(n){default:return dt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function yk(n){if(void 0===n)return Br("GRPC error has no .code"),he.UNKNOWN;switch(n){case $r.OK:return he.OK;case $r.CANCELLED:return he.CANCELLED;case $r.UNKNOWN:return he.UNKNOWN;case $r.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case $r.INTERNAL:return he.INTERNAL;case $r.UNAVAILABLE:return he.UNAVAILABLE;case $r.UNAUTHENTICATED:return he.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case $r.NOT_FOUND:return he.NOT_FOUND;case $r.ALREADY_EXISTS:return he.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return he.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case $r.ABORTED:return he.ABORTED;case $r.OUT_OF_RANGE:return he.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return he.UNIMPLEMENTED;case $r.DATA_LOSS:return he.DATA_LOSS;default:return dt()}}(rn=$r||($r={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class Zr{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new Zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new Zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fD(this.root,e,this.comparator,!1)}getReverseIterator(){return new fD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fD(this.root,e,this.comparator,!0)}}class fD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Li{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Li.RED,this.left=null!=i?i:Li.EMPTY,this.right=null!=u?u:Li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Li(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Li.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1,Li.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Li(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gr{constructor(e){this.comparator=e,this.data=new Zr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vk(this.data.getIterator())}getIteratorFrom(e){return new vk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof gr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gr(this.comparator);return t.data=e,t}}class vk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const TU=new Zr(ot.comparator);function Aa(){return TU}const AU=new Zr(ot.comparator);function Yx(){return AU}const SU=new Zr(ot.comparator);function wk(){return SU}const xU=new gr(ot.comparator);function In(...n){let e=xU;for(const t of n)e=e.add(t);return e}const RU=new gr(Zt);function pD(){return RU}class Kw{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Kw(Lt.min(),r,pD(),Aa(),In())}}class Yw{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yw(ci.EMPTY_BYTE_STRING,t,In(),In(),In())}}class gD{constructor(e,t,r,i){this.$=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Ek{constructor(e,t){this.targetId=e,this.O=t}}class Ck{constructor(e,t,r=ci.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ik{constructor(){this.M=0,this.L=Dk(),this.B=ci.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=In(),t=In(),r=In();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Yw(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=Dk()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class MU{constructor(e){this.et=e,this.nt=new Map,this.st=Aa(),this.it=bk(),this.rt=new gr(Zt)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,i)=>{this.lt(i)&&t(i)})}dt(e){const t=e.targetId,r=e.O.count,i=this.wt(t);if(i){const u=i.target;if(oD(u))if(0===r){const c=new ot(u.path);this.ct(t,c,er.newNoDocument(c,Lt.min()))}else vt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&oD(p.target)){const y=new ot(p.target.path);null!==this.st.get(y)||this.yt(c,y)||this.ct(c,y,er.newNoDocument(y,e))}u.j&&(t.set(c,u.G()),u.H())}});let r=In();this.it.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const C=this.wt(y);return!C||2===C.purpose||(p=!1,!1)}),p&&(r=r.add(u))});const i=new Kw(e,t,this.rt,this.st,r);return this.st=Aa(),this.it=bk(),this.rt=new gr(Zt),i}at(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.lt(e))return;const i=this.ht(e);this.yt(e,t)?i.J(t,1):i.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Ik,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new gr(Zt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Ik),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function bk(){return new Zr(ot.comparator)}function Dk(){return new Zr(ot.comparator)}const NU={asc:"ASCENDING",desc:"DESCENDING"},PU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class OU{constructor(e,t){this.databaseId=e,this.C=t}}function Qw(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tk(n,e){return n.C?e.toBase64():e.toUint8Array()}function kU(n,e){return Qw(n,e.toTimestamp())}function di(n){return vt(!!n),Lt.fromTimestamp(function(e){const t=Mh(e);return new li(t.seconds,t.nanos)}(n))}function Qx(n,e){return(t=n,new gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ak(n){const e=gn.fromString(n);return vt(Uk(e)),e}function Jw(n,e){return Qx(n.databaseId,e.path)}function vl(n,e){const t=Ak(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(xk(t))}function Jx(n,e){return Qx(n.databaseId,e)}function Sk(n){const e=Ak(n);return 4===e.length?gn.emptyPath():xk(e)}function Xw(n){return new gn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xk(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Rk(n,e,t){return{name:Jw(n,e),fields:t.value.mapValue.fields}}function Mk(n,e,t){const r=vl(n,e.name),i=di(e.updateTime),u=new rs({mapValue:{fields:e.fields}}),c=er.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function mD(n,e){let t;if(e instanceof zw)t={update:Rk(n,e.key,e.value)};else if(e instanceof Zw)t={delete:Jw(n,e.key)};else if(e instanceof Nh)t={update:Rk(n,e.key,e.data),updateMask:GU(e.fieldMask)};else{if(!(e instanceof Kx))return dt();t={verify:Jw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof U_)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ig)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof sg)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof B_)return{fieldPath:u.field.canonicalString(),increment:c.N};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:kU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function Nk(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Hr.updateTime(di(i.updateTime)):void 0!==i.exists?Hr.exists(i.exists):Hr.none():Hr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(vt("REQUEST_TIME"===c.setToServerValue),p=new U_):"appendMissingElements"in c?p=new ig(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new sg(c.removeAllFromArray.values||[]):"increment"in c?p=new B_(u,c.increment):dt();const y=Fi.fromServerFormat(c.fieldPath);return new qw(y,p)}(n,i)):[];var i;if(e.update){const i=vl(n,e.update.name),u=new rs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new P_((e.updateMask.fieldPaths||[]).map(C=>Fi.fromServerFormat(C)));return new Nh(i,u,c,t,r)}return new zw(i,u,t,r)}if(e.delete){const i=vl(n,e.delete);return new Zw(i,t)}if(e.verify){const i=vl(n,e.verify);return new Kx(i,t)}return dt()}function Pk(n,e){return{documents:[Jx(n,e.path)]}}function Ok(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Jx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Jx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(C=>function(A){if("=="===A.op){if(ZO(A.value))return{unaryFilter:{field:j_(A.field),op:"IS_NAN"}};if(zO(A.value))return{unaryFilter:{field:j_(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(ZO(A.value))return{unaryFilter:{field:j_(A.field),op:"IS_NOT_NAN"}};if(zO(A.value))return{unaryFilter:{field:j_(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:j_(A.field),op:jU(A.op),value:A.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(p){if(0!==p.length)return p.map(y=>{return{field:j_((C=y).field),direction:BU(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(y=e.limit,n.C||ng(y)?y:{value:y});var y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=Lk(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Lk(e.endAt)),t}function kk(n){let e=Sk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){vt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=Fk(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new F_(H_((x=A).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(A){let x;return x="object"==typeof A?A.value:A,ng(x)?null:x}(t.limit));let y=null;t.startAt&&(y=Vk(t.startAt));let C=null;return t.endAt&&(C=Vk(t.endAt)),ek(e,i,c,u,p,"F",y,C)}function Fk(n){return n?void 0!==n.unaryFilter?[$U(n)]:void 0!==n.fieldFilter?[HU(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Fk(e)).reduce((e,t)=>e.concat(t)):dt():[]}function Lk(n){return{before:n.before,values:n.position}}function Vk(n){return new $w(n.values||[],!!n.before)}function BU(n){return NU[n]}function jU(n){return PU[n]}function j_(n){return{fieldPath:n.canonicalString()}}function H_(n){return Fi.fromServerFormat(n.fieldPath)}function HU(n){return Ns.create(H_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function $U(n){switch(n.unaryFilter.op){case"IS_NAN":const e=H_(n.unaryFilter.field);return Ns.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=H_(n.unaryFilter.field);return Ns.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=H_(n.unaryFilter.field);return Ns.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=H_(n.unaryFilter.field);return Ns.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function GU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uk(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Du(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bk(e)),e=WU(n.get(t),e);return Bk(e)}function WU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Bk(n){return n+"\x01\x01"}function Gc(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),gn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:dt()}u=c+2}return new gn(r)}class qU{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Lo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Lo.store="owner",Lo.key="owner";class Ph{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Ph.store="mutationQueues",Ph.keyPath="userId";class Gn{constructor(e,t,r,i,u){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=u}}Gn.store="mutations",Gn.keyPath="batchId",Gn.userMutationsIndex="userMutationsIndex",Gn.userMutationsKeyPath=["userId","batchId"];class is{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Du(t)]}static key(e,t,r){return[e,Du(t),r]}}is.store="documentMutations",is.PLACEHOLDER=new is;class zU{constructor(e,t){this.path=e,this.readTime=t}}class ZU{constructor(e,t){this.path=e,this.version=t}}class mr{constructor(e,t,r,i,u,c){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=u,this.parentPath=c}}mr.store="remoteDocuments",mr.readTimeIndex="readTimeIndex",mr.readTimeIndexPath="readTime",mr.collectionReadTimeIndex="collectionReadTimeIndex",mr.collectionReadTimeIndexPath=["parentPath","readTime"];class wl{constructor(e){this.byteSize=e}}wl.store="remoteDocumentGlobal",wl.key="remoteDocumentGlobalKey";class co{constructor(e,t,r,i,u,c,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=c,this.query=p}}co.store="targets",co.keyPath="targetId",co.queryTargetsIndexName="queryTargetsIndex",co.queryTargetsKeyPath=["canonicalId","targetId"];class Vi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Vi.store="targetDocuments",Vi.keyPath=["targetId","path"],Vi.documentTargetsIndex="documentTargetsIndex",Vi.documentTargetsKeyPath=["path","targetId"];class Vo{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Vo.key="targetGlobalKey",Vo.store="targetGlobal";class og{constructor(e,t){this.collectionId=e,this.parent=t}}og.store="collectionParents",og.keyPath=["collectionId","parent"];class Wc{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Wc.store="clientMetadata",Wc.keyPath="clientId";class $_{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}$_.store="bundles",$_.keyPath="bundleId";class G_{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}G_.store="namedQueries",G_.keyPath="name";const KU=[Ph.store,Gn.store,is.store,mr.store,co.store,Lo.store,Vo.store,Vi.store,Wc.store,wl.store,og.store,$_.store,G_.store],jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Re((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Re?t:Re.resolve(t)}catch(t){return Re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.reject(t)}static resolve(e){return new Re((t,r)=>{t(e)})}static reject(e){return new Re((t,r)=>{r(e)})}static waitFor(e){return new Re((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=Re.resolve(!1);for(const r of e)t=t.next(i=>i?Re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class _D{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new ui,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new eE(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const i=Xx(r.target.error);this.It.reject(new eE(e,i))}}static open(e,t,r,i){try{return new _D(t,e.transaction(i,r))}catch(u){throw new eE(t,u)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new QU(t)}}class Tu{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Tu.Pt((0,O.z$)())&&Br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),ug(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,O.hl)())return!1;if(Tu.vt())return!0;const e=(0,O.z$)(),t=Tu.Pt(e),r=0<t&&t<10,i=Tu.Vt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,me.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new eE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Ne(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ne(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new eE(e,p))},u.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Rt.Nt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Ct(e);const y=_D.open(u.db,e,c?"readonly":"readwrite",r),C=i(y).catch(A=>(y.abort(A),Re.reject(A))).toPromise();return C.catch(()=>{}),yield y.At,C}catch(y){const C="FirebaseError"!==y.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),u.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class YU{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return ug(this.$t.delete())}}class eE extends Ne{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ag(n){return"IndexedDbTransactionError"===n.name}class QU{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ug(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),ug(this.store.add(e))}get(e){return ug(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),ug(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),ug(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),i=[];return this.Ut(r,(u,c)=>{i.push(c)}).next(()=>i)}qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const i=this.cursor(r);return this.Ut(i,(u,c,p)=>p.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Ut(i,t)}Qt(e){const t=this.cursor({});return new Re((r,i)=>{t.onerror=u=>{const c=Xx(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Ut(e,t){const r=[];return new Re((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new YU(p),C=t(p.primaryKey,p.value,y);if(C instanceof Re){const A=C.catch(x=>(y.done(),Re.reject(x)));r.push(A)}y.isDone?i():null===y.Mt?p.continue():p.continue(y.Mt)}}).next(()=>Re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ug(n){return new Re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Xx(r.target.error);t(i)}})}let $k=!1;function Xx(n){const e=Tu.Pt((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $k||($k=!0,setTimeout(()=>{throw r},0)),r}}return n}class Gk extends Hk{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function ho(n,e){const t=Ge(n);return Tu.Dt(t.Wt,e)}class eR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&IU(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Zx(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Zx(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Lt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),In())}isEqual(e){return this.batchId===e.batchId&&N_(this.mutations,e.mutations,(t,r)=>hk(t,r))&&N_(this.baseMutations,e.baseMutations,(t,r)=>hk(t,r))}}class tR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){vt(e.mutations.length===r.length);let i=wk();const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new tR(e,t,r,i)}}class Oh{constructor(e,t,r,i,u=Lt.min(),c=Lt.min(),p=ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Oh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Oh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Oh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Wk{constructor(e){this.Gt=e}}function nR(n,e){if(e.document)return Mk(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=ot.fromSegments(e.noDocument.path),r=q_(e.noDocument.readTime),i=er.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=ot.fromSegments(e.unknownDocument.path),r=q_(e.unknownDocument.version);return er.newUnknownDocument(t,r)}return dt()}function qk(n,e,t){const r=rR(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const u={name:Jw(p=n.Gt,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:Qw(p,y.version.toTimestamp())};return new mr(null,null,u,e.hasCommittedMutations,r,i)}var p,y;if(e.isNoDocument()){const u=e.key.path.toArray(),c=W_(e.version),p=e.hasCommittedMutations;return new mr(null,new zU(u,c),null,p,r,i)}if(e.isUnknownDocument()){const u=e.key.path.toArray(),c=W_(e.version);return new mr(new ZU(u,c),null,null,!0,r,i)}return dt()}function rR(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zk(n){const e=new li(n[0],n[1]);return Lt.fromTimestamp(e)}function W_(n){const e=n.toTimestamp();return new qU(e.seconds,e.nanoseconds)}function q_(n){const e=new li(n.seconds,n.nanoseconds);return Lt.fromTimestamp(e)}function z_(n,e){const t=(e.baseMutations||[]).map(u=>Nk(n.Gt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Nk(n.Gt,u)),i=li.fromMillis(e.localWriteTimeMs);return new eR(e.batchId,i,t,r)}function tE(n){const e=q_(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?q_(n.lastLimboFreeSnapshotVersion):Lt.min();let r;var i;return void 0!==n.query.documents?(vt(1===(i=n.query).documents.length),r=Ta(L_(Sk(i.documents[0])))):r=Ta(kk(n.query)),new Oh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ci.fromBase64String(n.resumeToken))}function Zk(n,e){const t=W_(e.snapshotVersion),r=W_(e.lastLimboFreeSnapshotVersion);let i;i=oD(e.target)?Pk(n.Gt,e.target):Ok(n.Gt,e.target);const u=e.resumeToken.toBase64();return new co(e.targetId,Hw(e.target),t,u,e.sequenceNumber,r,i)}function iR(n){const e=kk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tk(e,e.limit,"L"):e}class JU{getBundleMetadata(e,t){return Kk(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:q_(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Kk(e).put({bundleId:(r=t).id,createTime:W_(di(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Yk(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:iR(i.bundledQuery),readTime:q_(i.readTime)};var i})}saveNamedQuery(e,t){return Yk(e).put({name:(r=t).name,readTime:W_(di(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Kk(n){return ho(n,$_.store)}function Yk(n){return ho(n,G_.store)}class XU{constructor(){this.zt=new sR}addToCollectionParentIndex(e,t){return this.zt.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.zt.getEntries(t))}}class sR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new gr(gn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gr(gn.comparator)).toArray()}}class eB{constructor(){this.Ht=new sR}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const u={collectionId:r,parent:Du(i)};return Qk(e).put(u)}return Re.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[jO(t),""],!1,!0);return Qk(e).Bt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Gc(c.parent))}return r})}}function Qk(n){return ho(n,og.store)}const Jk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fo(e,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xk(n,e,t){const r=n.store(Gn.store),i=n.store(is.store),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.jt({range:c},(A,x,P)=>(p++,P.delete()));u.push(y.next(()=>{vt(1===p)}));const C=[];for(const A of t.mutations){const x=is.key(e,A.key.path,t.batchId);u.push(i.delete(x)),C.push(A.key)}return Re.waitFor(u).next(()=>C)}function yD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}fo.DEFAULT_COLLECTION_PERCENTILE=10,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fo.DEFAULT=new fo(41943040,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fo.DISABLED=new fo(-1,0,0);class oR{constructor(e,t,r,i){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=i,this.Yt={}}static Xt(e,t,r,i){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new oR(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kh(e).jt({index:Gn.userMutationsIndex,range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Z_(e),c=kh(e);return c.add({}).next(p=>{vt("number"==typeof p);const y=new eR(p,t,r,i),C=function(P,V,z){const ve=z.baseMutations.map(rt=>mD(P.Gt,rt)),ke=z.mutations.map(rt=>mD(P.Gt,rt));return new Gn(V,z.batchId,z.localWriteTime.toMillis(),ve,ke)}(this.k,this.userId,y),A=[];let x=new gr((P,V)=>Zt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=is.key(this.userId,P.key.path,p);x=x.add(P.key.path.popLast()),A.push(c.put(C)),A.push(u.put(V,is.PLACEHOLDER))}return x.forEach(P=>{A.push(this.Jt.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Yt[p]=y.keys()}),Re.waitFor(A).next(()=>y)})}lookupMutationBatch(e,t){return kh(e).get(t).next(r=>r?(vt(r.userId===this.userId),z_(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Re.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Yt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return kh(e).jt({index:Gn.userMutationsIndex,range:i},(c,p,y)=>{p.userId===this.userId&&(vt(p.batchId>=r),u=z_(this.k,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return kh(e).jt({index:Gn.userMutationsIndex,range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kh(e).Bt(Gn.userMutationsIndex,t).next(r=>r.map(i=>z_(this.k,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=is.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Z_(e).jt({range:i},(c,p,y)=>{const[C,A,x]=c,P=Gc(A);if(C===this.userId&&t.path.isEqual(P))return kh(e).get(x).next(V=>{if(!V)throw dt();vt(V.userId===this.userId),u.push(z_(this.k,V))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gr(Zt);const i=[];return t.forEach(u=>{const c=is.prefixForPath(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=Z_(e).jt({range:p},(C,A,x)=>{const[P,V,z]=C,ve=Gc(V);P===this.userId&&u.path.isEqual(ve)?r=r.add(z):x.done()});i.push(y)}),Re.waitFor(i).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=is.prefixForPath(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new gr(Zt);return Z_(e).jt({range:c},(y,C,A)=>{const[x,P,V]=y,z=Gc(P);x===this.userId&&r.isPrefixOf(z)?z.length===i&&(p=p.add(V)):A.done()}).next(()=>this.te(e,p))}te(e,t){const r=[],i=[];return t.forEach(u=>{i.push(kh(e).get(u).next(c=>{if(null===c)throw dt();vt(c.userId===this.userId),r.push(z_(this.k,c))}))}),Re.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Xk(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Re.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Re.resolve();const r=IDBKeyRange.lowerBound(is.prefixForUser(this.userId)),i=[];return Z_(e).jt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=Gc(u[1]);i.push(y)}else p.done()}).next(()=>{vt(0===i.length)})})}containsKey(e,t){return e1(e,this.userId,t)}ne(e){return t1(e).get(this.userId).next(t=>t||new Ph(this.userId,-1,""))}}function e1(n,e,t){const r=is.prefixForPath(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Z_(n).jt({range:u,Kt:!0},(p,y,C)=>{const[A,x,P]=p;A===e&&x===i&&(c=!0),C.done()}).next(()=>c)}function kh(n){return ho(n,Gn.store)}function Z_(n){return ho(n,is.store)}function t1(n){return ho(n,Ph.store)}class lg{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new lg(0)}static re(){return new lg(-1)}}class tB{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new lg(t.highestTargetId);return t.highestTargetId=r.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Lt.fromTimestamp(new li(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.ae(e,i)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ae(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>K_(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.ae(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return K_(e).jt((c,p)=>{const y=tE(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>Re.waitFor(u)).next(()=>i)}forEachTarget(e,t){return K_(e).jt((r,i)=>{const u=tE(i);t(u)})}oe(e){return n1(e).get(Vo.key).next(t=>(vt(null!==t),t))}ae(e,t){return n1(e).put(Vo.key,t)}ce(e,t){return K_(e).put(Zk(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Hw(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return K_(e).jt({range:i,index:co.queryTargetsIndexName},(c,p,y)=>{const C=tE(p);sD(t,C.target)&&(u=C,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Fh(e);return t.forEach(c=>{const p=Du(c.path);i.push(u.put(new Vi(r,p))),i.push(this.referenceDelegate.addReference(e,r,c))}),Re.waitFor(i)}removeMatchingKeys(e,t,r){const i=Fh(e);return Re.forEach(t,u=>{const c=Du(u.path);return Re.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Fh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Fh(e);let u=In();return i.jt({range:r,Kt:!0},(c,p,y)=>{const C=Gc(c[1]),A=new ot(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Du(t.path),i=IDBKeyRange.bound([r],[jO(r)],!1,!0);let u=0;return Fh(e).jt({index:Vi.documentTargetsIndex,Kt:!0,range:i},([c,p],y,C)=>{0!==c&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return K_(e).get(t).next(r=>r?tE(r):null)}}function K_(n){return ho(n,co.store)}function n1(n){return ho(n,Vo.store)}function Fh(n){return ho(n,Vi.store)}function cg(n){return aR.apply(this,arguments)}function aR(){return aR=(0,me.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==jk)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),aR.apply(this,arguments)}function r1([n,e],[t,r]){const i=Zt(n,t);return 0===i?Zt(e,r):i}class nB{constructor(e){this.he=e,this.buffer=new gr(r1),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();r1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rB{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){ag(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield cg(i)}yield t.me(e)}))}}class iB{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Re.resolve(Fo.I);const r=new nB(t);return this.ge.forEachTarget(e,i=>r.de(i.sequenceNumber)).next(()=>this.ge.pe(e,i=>r.de(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(Jk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jk):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,i,u,c,p,y,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(C=Date.now(),Lx()<=oi.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${x} documents in `+(C-y)+`ms\nTotal Duration: ${C-A}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class sB{constructor(e,t){this.db=e,this.garbageCollector=new iB(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,i)=>t(i))}addReference(e,t,r){return vD(e,r)}removeReference(e,t,r){return vD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return vD(e,t)}Ae(e,t){return function(r,i){let u=!1;return t1(r).Qt(c=>e1(r,c,i).next(p=>(p&&(u=!0),Re.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Ie(e,(c,p)=>{if(p<=t){const y=this.Ae(e,c).next(C=>{if(!C)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c),Fh(e).delete([0,Du(c.path)])))});i.push(y)}}).next(()=>Re.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return vD(e,t)}Ie(e,t){const r=Fh(e);let i,u=Fo.I;return r.jt({index:Vi.documentTargetsIndex},([c,p],{path:y,sequenceNumber:C})=>{0===c?(u!==Fo.I&&t(new ot(Gc(i)),u),u=C,i=y):u=Fo.I}).next(()=>{u!==Fo.I&&t(new ot(Gc(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vD(n,e){return Fh(n).put((r=n.currentSequenceNumber,new Vi(0,Du(e.path),r)));var r}class Y_{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){tg(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return $O(this.inner)}}class i1{constructor(){this.changes=new Y_(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Lt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:er.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Re.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oB{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return Lh(e).put(wD(t),r)}removeEntry(e,t){const r=Lh(e),i=wD(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return Lh(e).get(wD(t)).next(r=>this.Pe(t,r))}be(e,t){return Lh(e).get(wD(t)).next(r=>({document:this.Pe(t,r),size:yD(r)}))}getEntries(e,t){let r=Aa();return this.ve(e,t,(i,u)=>{const c=this.Pe(i,u);r=r.insert(i,c)}).next(()=>r)}Ve(e,t){let r=Aa(),i=new Zr(ot.comparator);return this.ve(e,t,(u,c)=>{const p=this.Pe(u,c);r=r.insert(u,p),i=i.insert(u,yD(c))}).next(()=>({documents:r,Se:i}))}ve(e,t,r){if(t.isEmpty())return Re.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),u=t.getIterator();let c=u.getNext();return Lh(e).jt({range:i},(p,y,C)=>{const A=ot.fromSegments(p);for(;c&&ot.comparator(c,A)<0;)r(c,null),c=u.getNext();c&&c.isEqual(A)&&(r(c,y),c=u.hasNext()?u.getNext():null),c?C.Lt(c.path.toArray()):C.done()}).next(()=>{for(;c;)r(c,null),c=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r){let i=Aa();const u=t.path.length+1,c={};if(r.isEqual(Lt.min())){const p=t.path.toArray();c.range=IDBKeyRange.lowerBound(p)}else{const p=t.path.toArray(),y=rR(r);c.range=IDBKeyRange.lowerBound([p,y],!0),c.index=mr.collectionReadTimeIndex}return Lh(e).jt(c,(p,y,C)=>{if(p.length!==u)return;const A=nR(this.k,y);t.path.isPrefixOf(A.key.path)?Ww(t,A)&&(i=i.insert(A.key,A)):C.done()}).next(()=>i)}newChangeBuffer(e){return new aB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return s1(e).get(wl.key).next(t=>(vt(!!t),t))}Re(e,t){return s1(e).put(wl.key,t)}Pe(e,t){if(t){const r=nR(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(Lt.min()))return r}return er.newInvalidDocument(e)}}class aB extends i1{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Y_(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new gr((u,c)=>Zt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Ce.get(u);if(c.document.isValidDocument()){const y=qk(this.De.k,c.document,this.getReadTime(u));i=i.add(u.path.popLast()),r+=yD(y)-p,t.push(this.De.addEntry(e,u,y))}else if(r-=p,this.trackRemovals){const y=qk(this.De.k,er.newNoDocument(u,Lt.min()),this.getReadTime(u));t.push(this.De.addEntry(e,u,y))}else t.push(this.De.removeEntry(e,u))}),i.forEach(u=>{t.push(this.De.Jt.addToCollectionParentIndex(e,u))}),t.push(this.De.updateMetadata(e,r)),Re.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:i})=>(i.forEach((u,c)=>{this.Ce.set(u,c)}),r))}}function s1(n){return ho(n,wl.store)}function Lh(n){return ho(n,mr.store)}function wD(n){return n.path.toArray()}class uB{constructor(e){this.k=e}Nt(e,t,r,i){vt(r<i&&r>=0&&i<=11);const u=new _D("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore(Lo.store),(p=e).createObjectStore(Ph.store,{keyPath:Ph.keyPath}),p.createObjectStore(Gn.store,{keyPath:Gn.keyPath,autoIncrement:!0}).createIndex(Gn.userMutationsIndex,Gn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(is.store),o1(e),function(p){p.createObjectStore(mr.store)}(e));let c=Re.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore(Vi.store),p.deleteObjectStore(co.store),p.deleteObjectStore(Vo.store)}(e),o1(e)),c=c.next(()=>function(p){const y=p.store(Vo.store),C=new Vo(0,0,Lt.min().toTimestamp(),0);return y.put(Vo.key,C)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store(Gn.store).Bt().next(C=>{p.deleteObjectStore(Gn.store),p.createObjectStore(Gn.store,{keyPath:Gn.keyPath,autoIncrement:!0}).createIndex(Gn.userMutationsIndex,Gn.userMutationsKeyPath,{unique:!0});const A=y.store(Gn.store),x=C.map(P=>A.put(P));return Re.waitFor(x)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore(Wc.store,{keyPath:Wc.keyPath})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ne(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore(wl.store)}(e),this.ke(u)))),r<7&&i>=7&&(c=c.next(()=>this.xe(u))),r<8&&i>=8&&(c=c.next(()=>this.$e(e,u))),r<9&&i>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const y=p.objectStore(mr.store);y.createIndex(mr.readTimeIndex,mr.readTimeIndexPath,{unique:!1}),y.createIndex(mr.collectionReadTimeIndex,mr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Fe(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore($_.store,{keyPath:$_.keyPath})})(e),function(p){p.createObjectStore(G_.store,{keyPath:G_.keyPath})}(e)})),c}ke(e){let t=0;return e.store(mr.store).jt((r,i)=>{t+=yD(i)}).next(()=>{const r=new wl(t);return e.store(wl.store).put(wl.key,r)})}Ne(e){const t=e.store(Ph.store),r=e.store(Gn.store);return t.Bt().next(i=>Re.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.Bt(Gn.userMutationsIndex,c).next(p=>Re.forEach(p,y=>{vt(y.userId===u.userId);const C=z_(this.k,y);return Xk(e,u.userId,C).next(()=>{})}))}))}xe(e){const t=e.store(Vi.store),r=e.store(mr.store);return e.store(Vo.store).get(Vo.key).next(i=>{const u=[];return r.jt((c,p)=>{const y=new gn(c),C=[0,Du(y)];u.push(t.get(C).next(A=>A?Re.resolve():t.put(new Vi(0,Du(y),i.highestListenSequenceNumber))))}).next(()=>Re.waitFor(u))})}$e(e,t){e.createObjectStore(og.store,{keyPath:og.keyPath});const r=t.store(og.store),i=new sR,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:Du(y)})}};return t.store(mr.store).jt({Kt:!0},(c,p)=>{const y=new gn(c);return u(y.popLast())}).next(()=>t.store(is.store).jt({Kt:!0},([c,p,y],C)=>{const A=Gc(p);return u(A.popLast())}))}Fe(e){const t=e.store(co.store);return t.jt((r,i)=>{const u=tE(i),c=Zk(this.k,u);return t.put(c)})}}function o1(n){n.createObjectStore(Vi.store,{keyPath:Vi.keyPath}).createIndex(Vi.documentTargetsIndex,Vi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(co.store,{keyPath:co.keyPath}).createIndex(co.queryTargetsIndexName,co.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Vo.store)}const uR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lR{constructor(e,t,r,i,u,c,p,y,C,A){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=u,this.window=c,this.document=p,this.Me=C,this.Le=A,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=x=>Promise.resolve(),!lR.bt())throw new Ne(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sB(this,i),this.Ge=t+"main",this.k=new Wk(y),this.ze=new Tu(this.Ge,11,new uB(this.k)),this.He=new tB(this.referenceDelegate,this.k),this.Jt=new eB,this.Je=new oB(this.k,this.Jt),this.Ye=new JU,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===A&&Br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,uR);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Fo(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ED(e).put(new Wc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(ag(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return nE(e).get(Lo.key).next(t=>Re.resolve(this.un(t)))}hn(e){return ED(e).delete(this.clientId)}ln(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ho(r,Wc.store);return i.Bt().next(u=>{const c=e.dn(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return Re.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Re.resolve(!0):nE(e).get(Lo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,uR);return!1}}return!(!this.networkEnabled||!this.inForeground)||ED(e).Bt().next(r=>void 0===this.dn(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Lo.store,Wc.store],t=>{const r=new Gk(t,Fo.I);return e.an(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>ED(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return oR.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let u;return Fe("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",KU,c=>(u=new Gk(c,this.Be?this.Be.next():Fo.I),"readwrite-primary"===t?this.rn(u).next(p=>!!p||this.on(u)).next(p=>{if(!p)throw Br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Ne(he.FAILED_PRECONDITION,jk);return r(u)}).next(p=>this.cn(u).next(()=>p)):this.En(u).next(()=>r(u)))).then(c=>(u.raiseOnCommittedEvent(),c))}En(e){return nE(e).get(Lo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(he.FAILED_PRECONDITION,uR)})}cn(e){const t=new Lo(this.clientId,this.allowTabSynchronization,Date.now());return nE(e).put(Lo.key,t)}static bt(){return Tu.bt()}an(e){const t=nE(e);return t.get(Lo.key).next(r=>this.un(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete(Lo.key)):Re.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Br(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Br("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nE(n){return ho(n,Lo.store)}function ED(n){return ho(n,Wc.store)}function cR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lB{constructor(e,t){this.progress=e,this.In=t}}class a1{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Pn(e,t,r))}Pn(e,t,r){return this.Je.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}bn(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return ot.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Sn(e,t.path):qx(t)?this.Dn(e,t,r):this.Cn(e,t,r);var i}Sn(e,t){return this.Rn(e,new ot(t)).next(r=>{let i=Yx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Dn(e,t,r){const i=t.collectionGroup;let u=Yx();return this.Jt.getCollectionParents(e,i).next(c=>Re.forEach(c,p=>{const y=(C=t,A=p.child(i),new $c(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.Cn(e,y,r).next(C=>{C.forEach((A,x)=>{u=u.insert(A,x)})})}).next(()=>u))}Cn(e,t,r){let i,u;return this.Je.getDocumentsMatchingQuery(e,t,r).next(c=>(i=c,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(c=>(u=c,this.Nn(e,u,i).next(p=>{i=p;for(const y of u)for(const C of y.mutations){const A=C.key;let x=i.get(A);null==x&&(x=er.newInvalidDocument(A),i=i.insert(A,x)),Zx(C,x,y.localWriteTime),x.isFoundDocument()||(i=i.remove(A))}}))).next(()=>(i.forEach((c,p)=>{Ww(t,p)||(i=i.remove(c))}),i))}Nn(e,t,r){let i=In();for(const c of t)for(const p of c.mutations)p instanceof Nh&&null===r.get(p.key)&&(i=i.add(p.key));let u=r;return this.Je.getEntries(e,i).next(c=>(c.forEach((p,y)=>{y.isFoundDocument()&&(u=u.insert(p,y))}),u))}}class dR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=i}static $n(e,t){let r=In(),i=In();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new dR(e,t.fromCache,r,i)}}class u1{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Lt.min())?this.Mn(e,t):this.On.vn(e,i).next(u=>{const c=this.Ln(t,u);return(uD(t)||lD(t))&&this.Bn(t.limitType,c,i,r)?this.Mn(e,t):(Lx()<=oi.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zx(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(p=>(c.forEach(y=>{p=p.insert(y.key,y)}),p)))});var u}Ln(e,t){let r=new gr(rk(e));return t.forEach((i,u)=>{Ww(e,u)&&(r=r.add(u))}),r}Bn(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mn(e,t){return Lx()<=oi.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",zx(t)),this.On.getDocumentsMatchingQuery(e,t,Lt.min())}}class cB{constructor(e,t,r,i){this.persistence=e,this.Un=t,this.k=i,this.qn=new Zr(Zt),this.Kn=new Y_(u=>Hw(u),sD),this.jn=Lt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new a1(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function l1(n,e,t,r){return new cB(n,e,t,r)}function c1(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,me.Z)(function*(n,e){const t=Ge(n);let r=t.An,i=t.Wn;const u=yield t.persistence.runTransaction("Handle user change","readonly",c=>{let p;return t.An.getAllMutationBatches(c).next(y=>(p=y,r=t.persistence.getMutationQueue(e),i=new a1(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(c))).next(y=>{const C=[],A=[];let x=In();for(const P of p){C.push(P.batchId);for(const V of P.mutations)x=x.add(V.key)}for(const P of y){A.push(P.batchId);for(const V of P.mutations)x=x.add(V.key)}return i.vn(c,x).next(P=>({Gn:P,removedBatchIds:C,addedBatchIds:A}))})});return t.An=r,t.Wn=i,t.Un.Fn(t.Wn),u}),hR.apply(this,arguments)}function dB(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Qn.newChangeBuffer({trackRemovals:!0});return function(c,p,y,C){const A=y.batch,x=A.keys();let P=Re.resolve();return x.forEach(V=>{P=P.next(()=>C.getEntry(p,V)).next(z=>{const ve=y.docVersions.get(V);vt(null!==ve),z.version.compareTo(ve)<0&&(A.applyToRemoteDocument(z,y),z.isValidDocument()&&C.addEntry(z,y.commitVersion))})}),P.next(()=>c.An.removeMutationBatch(p,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,i))})}function d1(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function hB(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Qn.newChangeBuffer({trackRemovals:!0});i=t.qn;const p=[];e.targetChanges.forEach((C,A)=>{const x=i.get(A);if(!x)return;p.push(t.He.removeMatchingKeys(u,C.removedDocuments,A).next(()=>t.He.addMatchingKeys(u,C.addedDocuments,A)));const P=C.resumeToken;if(P.approximateByteSize()>0){const V=x.withResumeToken(P,r).withSequenceNumber(u.currentSequenceNumber);i=i.insert(A,V),z=x,ke=C,vt((ve=V).resumeToken.approximateByteSize()>0),(0===z.resumeToken.approximateByteSize()||ve.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&p.push(t.He.updateTargetData(u,V))}var z,ve,ke});let y=Aa();if(e.documentUpdates.forEach((C,A)=>{e.resolvedLimboDocuments.has(C)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),p.push(h1(u,c,e.documentUpdates,r,void 0).next(C=>{y=C})),!r.isEqual(Lt.min())){const C=t.He.getLastRemoteSnapshotVersion(u).next(A=>t.He.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(C)}return Re.waitFor(p).next(()=>c.apply(u)).next(()=>t.Wn.Vn(u,y)).next(()=>y)}).then(u=>(t.qn=i,u))}function h1(n,e,t,r,i){let u=In();return t.forEach(c=>u=u.add(c)),e.getEntries(n,u).next(c=>{let p=Aa();return t.forEach((y,C)=>{const A=c.get(y),x=(null==i?void 0:i.get(y))||r;C.isNoDocument()&&C.version.isEqual(Lt.min())?(e.removeEntry(y,x),p=p.insert(y,C)):!A.isValidDocument()||C.version.compareTo(A.version)>0||0===C.version.compareTo(A.version)&&A.hasPendingWrites?(e.addEntry(C,x),p=p.insert(y,C)):Fe("LocalStore","Ignoring outdated watch update for ",y,". Current version:",A.version," Watch version:",C.version)}),p})}function fB(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function Q_(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.He.getTargetData(r,e).next(u=>u?(i=u,Re.resolve(i)):t.He.allocateTargetId(r).next(c=>(i=new Oh(e,c,0,r.currentSequenceNumber),t.He.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qn.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function J_(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=r.qn.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ag(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)}),fR.apply(this,arguments)}function CD(n,e,t){const r=Ge(n);let i=Lt.min(),u=In();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,C){const A=Ge(p),x=A.Kn.get(C);return void 0!==x?Re.resolve(A.qn.get(x)):A.He.getTargetData(y,C)}(r,c,Ta(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.Un.getDocumentsMatchingQuery(c,e,t?i:Lt.min(),t?u:In())).next(p=>({documents:p,zn:u})))}function f1(n,e){const t=Ge(n),r=Ge(t.He),i=t.qn.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function p1(n){const e=Ge(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,u){const c=Ge(r);let p=Aa(),y=rR(u);const C=Lh(i),A=IDBKeyRange.lowerBound(y,!0);return C.jt({index:mr.readTimeIndex,range:A},(x,P)=>{const V=nR(c.k,P);p=p.insert(V.key,V),y=P.readTime}).next(()=>({In:p,readTime:zk(y)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function pR(){return pR=(0,me.Z)(function*(n){const e=Ge(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Lh(r);let u=Lt.min();return i.jt({index:mr.readTimeIndex,reverse:!0},(c,p,y)=>{p.readTime&&(u=zk(p.readTime)),y.done()}).next(()=>u)}(t)).then(t=>{e.jn=t})}),pR.apply(this,arguments)}function gR(){return gR=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);let u=In(),c=Aa(),p=wk();for(const A of t){const x=e.Hn(A.metadata.name);A.document&&(u=u.add(x)),c=c.insert(x,e.Jn(A)),p=p.insert(x,e.Yn(A.metadata.readTime))}const y=i.Qn.newChangeBuffer({trackRemovals:!0}),C=yield Q_(i,(A=r,Ta(L_(gn.fromString(`__bundle__/docs/${A}`)))));var A;return i.persistence.runTransaction("Apply bundle documents","readwrite",A=>h1(A,y,c,Lt.min(),p).next(x=>(y.apply(A),x)).next(x=>i.He.removeMatchingKeysForTargetId(A,C.targetId).next(()=>i.He.addMatchingKeys(A,u,C.targetId)).next(()=>i.Wn.Vn(A,x)).next(()=>x)))}),gR.apply(this,arguments)}function mB(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,me.Z)(function*(n,e,t=In()){const r=yield Q_(n,Ta(iR(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=di(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ye.saveNamedQuery(u,e);const p=r.withResumeToken(ci.EMPTY_BYTE_STRING,c);return i.qn=i.qn.insert(p.targetId,p),i.He.updateTargetData(u,p).next(()=>i.He.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.He.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ye.saveNamedQuery(u,e))})}),mR.apply(this,arguments)}class _B{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Re.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:di(r.createTime)}),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:iR(r.bundledQuery),readTime:di(r.readTime)}),Re.resolve();var r}}class _R{constructor(){this.ts=new gr(hi.es),this.ns=new gr(hi.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new hi(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new hi(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new ot(new gn([])),r=new hi(t,e),i=new hi(t,e+1),u=[];return this.ns.forEachInRange([r,i],c=>{this.os(c),u.push(c.key)}),u}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new ot(new gn([])),r=new hi(t,e),i=new hi(t,e+1);let u=In();return this.ns.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new hi(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return ot.comparator(e.key,t.key)||Zt(e.fs,t.fs)}static ss(e,t){return Zt(e.fs,t.fs)||ot.comparator(e.key,t.key)}}class yB{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new gr(hi.es)}checkEmpty(e){return Re.resolve(0===this.An.length)}addMutationBatch(e,t,r,i){const u=this.ds;this.ds++;const c=new eR(u,t,r,i);this.An.push(c);for(const p of i)this.ws=this.ws.add(new hi(p.key,u)),this.Jt.addToCollectionParentIndex(e,p.key.path.popLast());return Re.resolve(c)}lookupMutationBatch(e,t){return Re.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.gs(t+1),u=i<0?0:i;return Re.resolve(this.An.length>u?this.An[u]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Re.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),i=new hi(t,Number.POSITIVE_INFINITY),u=[];return this.ws.forEachInRange([r,i],c=>{const p=this._s(c.fs);u.push(p)}),Re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gr(Zt);return t.forEach(i=>{const u=new hi(i,0),c=new hi(i,Number.POSITIVE_INFINITY);this.ws.forEachInRange([u,c],p=>{r=r.add(p.fs)})}),Re.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;ot.isDocumentKey(u)||(u=u.child(""));const c=new hi(new ot(u),0);let p=new gr(Zt);return this.ws.forEachWhile(y=>{const C=y.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(p=p.add(y.fs)),!0)},c),Re.resolve(this.ys(p))}ys(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){vt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Re.forEach(t.mutations,i=>{const u=new hi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new hi(t,0),i=this.ws.firstAfterOrEqual(r);return Re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Re.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class vB{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Zr(ot.comparator),this.size=0}addEntry(e,t,r){const i=t.key,u=this.docs.get(i),c=u?u.size:0,p=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.clone(),size:p,readTime:r}),this.size+=p-c,this.Jt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Re.resolve(r?r.document.clone():er.newInvalidDocument(t))}getEntries(e,t){let r=Aa();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.clone():er.newInvalidDocument(i))}),Re.resolve(r)}getDocumentsMatchingQuery(e,t,r){let i=Aa();const u=new ot(t.path.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y,readTime:C}}=c.getNext();if(!t.path.isPrefixOf(p.path))break;C.compareTo(r)<=0||Ww(t,y)&&(i=i.insert(y.key,y.clone()))}return Re.resolve(i)}Es(e,t){return Re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wB(this)}getSize(e){return Re.resolve(this.size)}}class wB extends i1{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?t.push(this.De.addEntry(e,i.document,this.getReadTime(r))):this.De.removeEntry(r)}),Re.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class EB{constructor(e){this.persistence=e,this.Is=new Y_(t=>Hw(t),sD),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.As=0,this.Rs=new _R,this.targetCount=0,this.Ps=lg.ie()}forEachTarget(e,t){return this.Is.forEach((r,i)=>t(i)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Re.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new lg(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.ce(t),Re.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Is.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Is.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),Re.waitFor(u).next(()=>i)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Re.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Re.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),Re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Re.resolve(r)}containsKey(e,t){return Re.resolve(this.Rs.containsKey(t))}}class CB{constructor(e,t){this.bs={},this.Be=new Fo(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new EB(this),this.Jt=new XU,this.Je=new vB(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new Wk(t),this.Ye=new _B(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new yB(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new IB(this.Be.next());return this.referenceDelegate.Vs(),r(i).next(u=>this.referenceDelegate.Ss(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ds(e,t){return Re.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class IB extends Hk{constructor(e){super(),this.currentSequenceNumber=e}}class yR{constructor(e){this.persistence=e,this.Cs=new _R,this.Ns=null}static ks(e){return new yR(e)}get xs(){if(this.Ns)return this.Ns;throw dt()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Re.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(i=>this.xs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.xs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.xs,r=>{const i=ot.fromPath(r);return this.$s(e,i).next(u=>{u||t.removeEntry(i)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Re.or([()=>Re.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function g1(n,e){return`firestore_clients_${n}_${e}`}function m1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function vR(n,e){return`firestore_targets_${n}_${e}`}class ID{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Fs(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Ne(i.error.code,i.error.message))),c?new ID(e,t,i.state,u):(Br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Fs(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Ne(r.error.code,r.error.message))),u?new rE(e,r.state,i):(Br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=pD();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=WO(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new bD(e,u):(Br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wR{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wR(t.clientId,t.onlineState):(Br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ER{constructor(){this.activeTargetIds=pD()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CR{constructor(e,t,r,i,u){this.window=e,this.Oe=t,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Zr(Zt),this.started=!1,this.js=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Qs=g1(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new ER),this.Gs=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Tn();for(const i of t){if(i===e.Bs)continue;const u=e.getItem(g1(e.persistenceKey,i));if(u){const c=bD.Fs(i,u);c&&(e.Ks=e.Ks.insert(c.clientId,c))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const i=e.Zs(r);i&&e.ti(i)}for(const i of e.js)e.qs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(vR(this.persistenceKey,e));if(r){const i=rE.Fs(e,r);i&&(t=i.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vR(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.si(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const i=t.ci(r.key);return t.ui(i,null)}{const i=t.hi(r.key,r.newValue);if(i)return t.ui(i.clientId,i)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const i=t.li(r.key,r.newValue);if(i)return t.fi(i)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const i=t.di(r.key,r.newValue);if(i)return t.wi(i)}}else if(r.key===t.Js){if(null!==r.newValue){const i=t.Zs(r.newValue);if(i)return t.ti(i)}}else if(r.key===t.Ws){const i=function(u){let c=Fo.I;if(null!=u)try{const p=JSON.parse(u);vt("number"==typeof p),c=p}catch(p){Br("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Fo.I&&t.sequenceNumberHandler(i)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,r){const i=new ID(this.currentUser,e,t,r),u=m1(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Os())}si(e){const t=m1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const i=vR(this.persistenceKey,e),u=new rE(e,t,r);this.setItem(i,u.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ci(e);return bD.Fs(r,t)}li(e,t){const r=this.zs.exec(e),i=Number(r[1]);return ID.Fs(new ki(void 0!==r[2]?r[2]:null),i,t)}di(e,t){const r=this.Hs.exec(e),i=Number(r[1]);return rE.Fs(i,t)}Zs(e){return wR.Fs(e)}fi(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),u=this.ei(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.yi(c,p).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=pD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class _1{constructor(){this.pi=new ER,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new ER,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class bB{Ei(e){}shutdown(){}}class y1{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const DB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class TB{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class AB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,i,u){const c=this.Ui(e,t);Fe("RestConnection","Sending: ",c,r);const p={};return this.qi(p,i,u),this.Ki(e,c,p,r).then(y=>(Fe("RestConnection","Received: ",y),y),y=>{throw Lw("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}ji(e,t,r,i,u){return this.Bi(e,t,r,i,u)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+M_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}Ui(e,t){return`${this.Mi}/v1/${t}:${DB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,i){return new Promise((u,c)=>{const p=new ZV;p.listenOnce(WV.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Fx.NO_ERROR:const C=p.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Fx.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new Ne(he.DEADLINE_EXCEEDED,"Request time out"));break;case Fx.HTTP_ERROR:const A=p.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const P=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(z)>=0?z:he.UNKNOWN}(x.status);c(new Ne(P,x.message))}else c(new Ne(he.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Ne(he.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}Qi(e,t,r){const i=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=$V(),c=GV(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new zV({})),this.qi(p.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Fe("Connection","Creating WebChannel: "+y,p);const C=u.createWebChannel(y,p);let A=!1,x=!1;const P=new TB({Vi:z=>{x?Fe("Connection","Not sending because WebChannel is closed:",z):(A||(Fe("Connection","Opening WebChannel transport."),C.open(),A=!0),Fe("Connection","WebChannel sending:",z),C.send(z))},Si:()=>C.close()}),V=(z,ve,ke)=>{z.listen(ve,rt=>{try{ke(rt)}catch(It){setTimeout(()=>{throw It},0)}})};return V(C,tD.EventType.OPEN,()=>{x||Fe("Connection","WebChannel transport opened.")}),V(C,tD.EventType.CLOSE,()=>{x||(x=!0,Fe("Connection","WebChannel transport closed"),P.Fi())}),V(C,tD.EventType.ERROR,z=>{x||(x=!0,Lw("Connection","WebChannel transport errored:",z),P.Fi(new Ne(he.UNAVAILABLE,"The operation could not be completed")))}),V(C,tD.EventType.MESSAGE,z=>{var ve;if(!x){const ke=z.data[0];vt(!!ke);const rt=ke,It=rt.error||(null===(ve=rt[0])||void 0===ve?void 0:ve.error);if(It){Fe("Connection","WebChannel received error:",It);const Xt=It.status;let St=function(Au){const BD=$r[Au];if(void 0!==BD)return yk(BD)}(Xt),qn=It.message;void 0===St&&(St=he.INTERNAL,qn="Unknown error status: "+Xt+" with message "+It.message),x=!0,P.Fi(new Ne(St,qn)),C.close()}else Fe("Connection","WebChannel received:",ke),P.Oi(ke)}}),V(c,qV.STAT_EVENT,z=>{z.stat===FO.PROXY?Fe("Connection","Detected buffering proxy"):z.stat===FO.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.$i()},0),P}}function v1(){return"undefined"!=typeof window?window:null}function DD(){return"undefined"!=typeof document?document:null}function iE(n){return new OU(n,!0)}class IR{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Oe=e,this.timerId=t,this.Wi=r,this.Gi=i,this.zi=u,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class w1{constructor(e,t,r,i,u,c,p,y){this.Oe=e,this.nr=r,this.sr=i,this.ir=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new IR(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,me.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,me.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.rr===t&&this.Ir(r,i)},r=>{e(()=>{const i=new Ne(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(i)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(i=>{r(()=>this.Ar(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}dr(){var e=this;this.state=5,this.ur.Zi((0,me.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SB extends w1{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.k=u}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:dt(),i=e.targetChange.targetIds||[],u=function(y,C){return y.C?(vt(void 0===C||"string"==typeof C),ci.fromBase64String(C||"")):(vt(void 0===C||C instanceof Uint8Array),ci.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const C=void 0===y.code?he.UNKNOWN:yk(y.code);return new Ne(C,y.message||"")}(c);t=new Ck(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=vl(n,r.document.name),u=di(r.document.updateTime),c=new rs({mapValue:{fields:r.document.fields}}),p=er.newFoundDocument(i,u,c);t=new gD(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=vl(n,r.document),u=r.readTime?di(r.readTime):Lt.min(),c=er.newNoDocument(i,u);t=new gD([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=vl(n,r.document);t=new gD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,u=new DU(r.count||0);t=new Ek(r.targetId,u)}}var y;return t}(this.k,e),r=function(i){if(!("targetChange"in i))return Lt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Lt.min():u.readTime?di(u.readTime):Lt.min()}(e);return this.listener.Pr(t,r)}br(e){const t={};t.database=Xw(this.k),t.addTarget=function(i,u){let c;const p=u.target;return c=oD(p)?{documents:Pk(i,p)}:{query:Ok(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Tk(i,u.resumeToken):u.snapshotVersion.compareTo(Lt.min())>0&&(c.readTime=Qw(i,u.snapshotVersion.toTimestamp())),c}(this.k,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=Xw(this.k),t.removeTarget=e,this.gr(t)}}class xB extends w1{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.k=u,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,i){let u=di(r.updateTime?r.updateTime:i);return u.isEqual(Lt.min())&&(u=di(i)),new CU(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.Cr(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Xw(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>mD(this.k,r))};this.gr(t)}}class RB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=i,this.$r=!1}Fr(){if(this.$r)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.ir.Bi(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(he.UNKNOWN,i.toString())})}ji(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.ir.ji(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(he.UNKNOWN,i.toString())})}terminate(){this.$r=!0}}class MB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Br(t),this.Lr=!1):Fe("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class NB{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=u,this.Hr.Ei(p=>{r.enqueueAndForget((0,me.Z)(function*(){var y;Vh(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,me.Z)(function*(C){const A=Ge(C);A.Gr.add(4),yield X_(A),A.Jr.set("Unknown"),A.Gr.delete(4),yield sE(A)}),function(C){return y.apply(this,arguments)})(c))}))}),this.Jr=new MB(r,i)}}function sE(n){return bR.apply(this,arguments)}function bR(){return bR=(0,me.Z)(function*(n){if(Vh(n))for(const e of n.zr)yield e(!0)}),bR.apply(this,arguments)}function X_(n){return DR.apply(this,arguments)}function DR(){return DR=(0,me.Z)(function*(n){for(const e of n.zr)yield e(!1)}),DR.apply(this,arguments)}function TD(n,e){const t=Ge(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),SR(t)?AR(t):ty(t).lr()&&TR(t,e))}function oE(n,e){const t=Ge(n),r=ty(t);t.Wr.delete(e),r.lr()&&E1(t,e),0===t.Wr.size&&(r.lr()?r._r():Vh(t)&&t.Jr.set("Unknown"))}function TR(n,e){n.Yr.X(e.targetId),ty(n).br(e)}function E1(n,e){n.Yr.X(e),ty(n).vr(e)}function AR(n){n.Yr=new MU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),ty(n).start(),n.Jr.Br()}function SR(n){return Vh(n)&&!ty(n).hr()&&n.Wr.size>0}function Vh(n){return 0===Ge(n).Gr.size}function C1(n){n.Yr=void 0}function PB(n){return xR.apply(this,arguments)}function xR(){return xR=(0,me.Z)(function*(n){n.Wr.forEach((e,t)=>{TR(n,e)})}),xR.apply(this,arguments)}function OB(n,e){return RR.apply(this,arguments)}function RR(){return RR=(0,me.Z)(function*(n,e){C1(n),SR(n)?(n.Jr.Kr(e),AR(n)):n.Jr.set("Unknown")}),RR.apply(this,arguments)}function kB(n,e,t){return MR.apply(this,arguments)}function MR(){return MR=(0,me.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof Ck&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.Wr.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.Wr.delete(p),i.Yr.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield AD(n,r)}else if(e instanceof gD?n.Yr.ot(e):e instanceof Ek?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Lt.min()))try{const r=yield d1(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.Yr.gt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const C=i.Wr.get(y);C&&i.Wr.set(y,C.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i.Wr.get(p);if(!y)return;i.Wr.set(p,y.withResumeToken(ci.EMPTY_BYTE_STRING,y.snapshotVersion)),E1(i,p);const C=new Oh(y.target,p,1,y.sequenceNumber);TR(i,C)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield AD(n,r)}var r}),MR.apply(this,arguments)}function AD(n,e,t){return NR.apply(this,arguments)}function NR(){return NR=(0,me.Z)(function*(n,e,t){if(!ag(e))throw e;n.Gr.add(1),yield X_(n),n.Jr.set("Offline"),t||(t=()=>d1(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield sE(n)}))}),NR.apply(this,arguments)}function I1(n,e){return e().catch(t=>AD(n,t,e))}function ey(n){return PR.apply(this,arguments)}function PR(){return PR=(0,me.Z)(function*(n){const e=Ge(n),t=Uh(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;FB(e);)try{const i=yield fB(e.localStore,r);if(null===i){0===e.Qr.length&&t._r();break}r=i.batchId,LB(e,i)}catch(i){yield AD(e,i)}b1(e)&&D1(e)}),PR.apply(this,arguments)}function FB(n){return Vh(n)&&n.Qr.length<10}function LB(n,e){n.Qr.push(e);const t=Uh(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function b1(n){return Vh(n)&&!Uh(n).hr()&&n.Qr.length>0}function D1(n){Uh(n).start()}function VB(n){return OR.apply(this,arguments)}function OR(){return OR=(0,me.Z)(function*(n){Uh(n).kr()}),OR.apply(this,arguments)}function UB(n){return kR.apply(this,arguments)}function kR(){return kR=(0,me.Z)(function*(n){const e=Uh(n);for(const t of n.Qr)e.Dr(t.mutations)}),kR.apply(this,arguments)}function BB(n,e,t){return FR.apply(this,arguments)}function FR(){return FR=(0,me.Z)(function*(n,e,t){const r=n.Qr.shift(),i=tR.from(r,e,t);yield I1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ey(n)}),FR.apply(this,arguments)}function jB(n,e){return LR.apply(this,arguments)}function LR(){return LR=(0,me.Z)(function*(n,e){var t;e&&Uh(n).Sr&&(yield(t=(0,me.Z)(function*(r,i){if(_k(u=i.code)&&u!==he.ABORTED){const c=r.Qr.shift();Uh(r).wr(),yield I1(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ey(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),b1(n)&&D1(n)}),LR.apply(this,arguments)}function VR(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t.Gr.delete(2),yield sE(t)):e||(t.Gr.add(2),yield X_(t),t.Jr.set("Unknown"))}),UR.apply(this,arguments)}function ty(n){return n.Xr||(n.Xr=function(e,t,r){const i=Ge(e);return i.Fr(),new SB(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:PB.bind(null,n),Ni:OB.bind(null,n),Pr:kB.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Xr.wr(),SR(n)?AR(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),C1(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Uh(n){return n.Zr||(n.Zr=function(e,t,r){const i=Ge(e);return i.Fr(),new xB(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:VB.bind(null,n),Ni:jB.bind(null,n),Nr:UB.bind(null,n),Cr:BB.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Zr.wr(),yield ey(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class BR{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new BR(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(n,e){if(Br("AsyncQueue",`${e}: ${n}`),ag(n))return new Ne(he.UNAVAILABLE,`${e}: ${n}`);throw n}class ry{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=Yx(),this.sortedSet=new Zr(this.comparator)}static emptySet(e){return new ry(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ry)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ry;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class T1{constructor(){this.eo=new Zr(ot.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):dt():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class iy{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new iy(e,t,ry.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class HB{constructor(){this.so=void 0,this.listeners=[]}}class $B{constructor(){this.queries=new Y_(e=>nk(e),Gw),this.onlineState="Unknown",this.io=new Set}}function jR(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new HB),i)try{u.so=yield t.onListen(r)}catch(c){const p=ny(c,`Initialization of query '${zx(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.ro(t.onlineState),u.so&&e.oo(u.so)&&WR(t)}),HR.apply(this,arguments)}function $R(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),GR.apply(this,arguments)}function GB(n,e){const t=Ge(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.oo(i)&&(r=!0);c.so=i}}r&&WR(t)}function WB(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function WR(n){n.io.forEach(e=>{e.next()})}class qR{constructor(e,t,r){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class qB{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class A1{constructor(e){this.k=e}Hn(e){return vl(this.k,e)}Jn(e){return e.metadata.exists?Mk(this.k,e.document,!1):er.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return di(e)}}class zB{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=S1(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new A1(this.k);for(const i of e)if(i.metadata.queries){const u=r.Hn(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||In()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function(n,e,t,r){return gR.apply(this,arguments)}(e.localStore,new A1(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const i of e.queries)yield mB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new lB(Object.assign({},e.progress),t)})()}}function S1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class x1{constructor(e){this.key=e}}class R1{constructor(e){this.key=e}}class M1{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=In(),this.mutatedKeys=In(),this.Ao=rk(e),this.Ro=new ry(this.Ao)}get Po(){return this.To}bo(e,t){const r=t?t.vo:new T1,i=t?t.Ro:this.Ro;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y=uD(this.query)&&i.size===this.query.limit?i.last():null,C=lD(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const P=i.get(A),V=Ww(this.query,x)?x:null,z=!!P&&this.mutatedKeys.has(P.key),ve=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ke=!1;P&&V?P.data.isEqual(V.data)?z!==ve&&(r.track({type:3,doc:V}),ke=!0):this.Vo(P,V)||(r.track({type:2,doc:V}),ke=!0,(y&&this.Ao(V,y)>0||C&&this.Ao(V,C)<0)&&(p=!0)):!P&&V?(r.track({type:0,doc:V}),ke=!0):P&&!V&&(r.track({type:1,doc:P}),ke=!0,(y||C)&&(p=!0)),ke&&(V?(c=c.add(V),u=ve?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),uD(this.query)||lD(this.query))for(;c.size>this.query.limit;){const A=uD(this.query)?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Ro:c,vo:r,Bn:p,mutatedKeys:u}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const u=e.vo.no();u.sort((C,A)=>function(x,P){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return V(x)-V(P)}(C.type,A.type)||this.Ao(C.doc,A.doc)),this.So(r);const c=t?this.Do():[],p=0===this.Io.size&&this.current?1:0,y=p!==this.Eo;return this.Eo=p,0!==u.length||y?{snapshot:new iy(this.query,e.Ro,i,u,e.mutatedKeys,0===p,y,!1),Co:c}:{Co:c}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new T1,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=In(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new R1(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new x1(r))}),t}ko(e){this.To=e.zn,this.Io=In();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return iy.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class ZB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KB{constructor(e){this.key=e,this.$o=!1}}class YB{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Fo={},this.Oo=new Y_(p=>nk(p),Gw),this.Mo=new Map,this.Lo=new Set,this.Bo=new Zr(ot.comparator),this.Uo=new Map,this.qo=new _R,this.Ko={},this.jo=new Map,this.Qo=lg.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function QB(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,me.Z)(function*(n,e){const t=mM(n);let r,i;const u=t.Oo.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.xo();else{const c=yield Q_(t.localStore,Ta(e)),p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield ZR(t,e,r,"current"===p),t.isPrimaryClient&&TD(t.remoteStore,c)}return i}),zR.apply(this,arguments)}function ZR(n,e,t,r){return KR.apply(this,arguments)}function KR(){return KR=(0,me.Z)(function*(n,e,t,r){n.Go=(A,x,P)=>{return(V=(0,me.Z)(function*(z,ve,ke,rt){let It=ve.view.bo(ke);It.Bn&&(It=yield CD(z.localStore,ve.query,!1).then(({documents:qn})=>ve.view.bo(qn,It)));const Xt=rt&&rt.targetChanges.get(ve.targetId),St=ve.view.applyChanges(It,z.isPrimaryClient,Xt);return sM(z,ve.targetId,St.Co),St.snapshot}),function(z,ve,ke,rt){return V.apply(this,arguments)})(n,A,x,P);var V};const i=yield CD(n.localStore,e,!0),u=new M1(e,i.zn),c=u.bo(i.documents),p=Yw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);sM(n,t,y.Co);const C=new ZB(e,t,u);return n.Oo.set(e,C),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),y.snapshot}),KR.apply(this,arguments)}function JB(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.Oo.get(e),i=t.Mo.get(r.targetId);if(i.length>1)return t.Mo.set(r.targetId,i.filter(u=>!Gw(u,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield J_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),oE(t.remoteStore,r.targetId),sy(t,r.targetId)}).catch(cg))):(sy(t,r.targetId),yield J_(t.localStore,r.targetId,!0))}),YR.apply(this,arguments)}function QR(){return QR=(0,me.Z)(function*(n,e,t){const r=_M(n);try{const i=yield function(u,c){const p=Ge(u),y=li.now(),C=c.reduce((x,P)=>x.add(P.key),In());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.Wn.vn(x,C).next(P=>{A=P;const V=[];for(const z of c){const ve=bU(z,A.get(z.key));null!=ve&&V.push(new Nh(z.key,ve,KO(ve.value.mapValue),Hr.exists(!0)))}return p.An.addMutationBatch(x,y,V,c)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.Ko[u.currentUser.toKey()];y||(y=new Zr(Zt)),y=y.insert(c,p),u.Ko[u.currentUser.toKey()]=y}(r,i.batchId,t),yield qc(r,i.changes),yield ey(r.remoteStore)}catch(i){const u=ny(i,"Failed to persist write");t.reject(u)}}),QR.apply(this,arguments)}function N1(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield hB(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.Uo.get(u);c&&(vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.$o=!0:i.modifiedDocuments.size>0?vt(c.$o):i.removedDocuments.size>0&&(vt(c.$o),c.$o=!1))}),yield qc(t,r,e)}catch(r){yield cg(r)}}),JR.apply(this,arguments)}function P1(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Oo.forEach((u,c)=>{const p=c.view.ro(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ge(u);p.onlineState=c;let y=!1;p.queries.forEach((C,A)=>{for(const x of A.listeners)x.ro(c)&&(y=!0)}),y&&WR(p)}(r.eventManager,e),i.length&&r.Fo.Pr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function e2(n,e,t){return XR.apply(this,arguments)}function XR(){return XR=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Uo.get(e),u=i&&i.key;if(u){let c=new Zr(ot.comparator);c=c.insert(u,er.newNoDocument(u,Lt.min()));const p=In().add(u),y=new Kw(Lt.min(),new Map,new gr(Zt),c,p);yield N1(r,y),r.Bo=r.Bo.remove(u),r.Uo.delete(e),oM(r)}else yield J_(r.localStore,e,!1).then(()=>sy(r,e,t)).catch(cg)}),XR.apply(this,arguments)}function t2(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield dB(t.localStore,e);iM(t,r,null),rM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qc(t,i)}catch(i){yield cg(i)}}),eM.apply(this,arguments)}function n2(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(u,c){const p=Ge(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let C;return p.An.lookupMutationBatch(y,c).next(A=>(vt(null!==A),C=A.keys(),p.An.removeMutationBatch(y,A))).next(()=>p.An.performConsistencyCheck(y)).next(()=>p.Wn.vn(y,C))})}(r.localStore,e);iM(r,e,t),rM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qc(r,i)}catch(i){yield cg(i)}}),tM.apply(this,arguments)}function nM(){return nM=(0,me.Z)(function*(n,e){const t=Ge(n);Vh(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ge(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.An.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.jo.get(r)||[];i.push(e),t.jo.set(r,i)}catch(r){const i=ny(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),nM.apply(this,arguments)}function rM(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function iM(n,e,t){const r=Ge(n);let i=r.Ko[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Mo.get(e))n.Oo.delete(r),t&&n.Fo.zo(r,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||O1(n,r)})}function O1(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(oE(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),oM(n))}function sM(n,e,t){for(const r of t)r instanceof x1?(n.qo.addReference(r.key,e),i2(n,r)):r instanceof R1?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||O1(n,r.key)):dt()}function i2(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.Lo.add(r),oM(n))}function oM(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new ot(gn.fromString(e)),r=n.Qo.next();n.Uo.set(r,new KB(t)),n.Bo=n.Bo.insert(t,r),TD(n.remoteStore,new Oh(Ta(L_(t.path)),r,2,Fo.I))}}function qc(n,e,t){return aM.apply(this,arguments)}function aM(){return aM=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[],c=[];var p;r.Oo.isEmpty()||(r.Oo.forEach((p,y)=>{c.push(r.Go(y,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,C.fromCache?"not-current":"current"),i.push(C);const A=dR.$n(y.targetId,C);u.push(A)}}))}),yield Promise.all(c),r.Fo.Pr(i),yield(p=(0,me.Z)(function*(y,C){const A=Ge(y);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Re.forEach(C,P=>Re.forEach(P.kn,V=>A.persistence.referenceDelegate.addReference(x,P.targetId,V)).next(()=>Re.forEach(P.xn,V=>A.persistence.referenceDelegate.removeReference(x,P.targetId,V)))))}catch(x){if(!ag(x))throw x;Fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of C){const P=x.targetId;if(!x.fromCache){const V=A.qn.get(P),ve=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);A.qn=A.qn.insert(P,ve)}}}),function(y,C){return p.apply(this,arguments)})(r.localStore,u))}),aM.apply(this,arguments)}function s2(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield c1(t.localStore,e);t.currentUser=e,(i=t).jo.forEach(c=>{c.forEach(p=>{p.reject(new Ne(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qc(t,r.Gn)}var i}),uM.apply(this,arguments)}function o2(n,e){const t=Ge(n),r=t.Uo.get(e);if(r&&r.$o)return In().add(r.key);{let i=In();const u=t.Mo.get(e);if(!u)return i;for(const c of u){const p=t.Oo.get(c);i=i.unionWith(p.view.Po)}return i}}function a2(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield CD(t.localStore,e.query,!0),i=e.view.ko(r);return t.isPrimaryClient&&sM(t,e.targetId,i.Co),i}),lM.apply(this,arguments)}function u2(n){return cM.apply(this,arguments)}function cM(){return cM=(0,me.Z)(function*(n){const e=Ge(n);return p1(e.localStore).then(t=>qc(e,t))}),cM.apply(this,arguments)}function l2(n,e,t,r){return dM.apply(this,arguments)}function dM(){return dM=(0,me.Z)(function*(n,e,t,r){const i=Ge(n),u=yield function(c,p){const y=Ge(c),C=Ge(y.An);return y.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Zt(A,p).next(x=>x?y.Wn.vn(A,x):Re.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield ey(i.remoteStore):"acknowledged"===t||"rejected"===t?(iM(i,e,r||null),rM(i,e),p=e,Ge(Ge(i.localStore).An).ee(p)):dt(),yield qc(i,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),dM.apply(this,arguments)}function hM(){return hM=(0,me.Z)(function*(n,e){const t=Ge(n);if(mM(t),_M(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield k1(t,r.toArray());t.Wo=!0,yield VR(t.remoteStore,!0);for(const u of i)TD(t.remoteStore,u)}else if(!1===e&&!1!==t.Wo){const r=[];let i=Promise.resolve();t.Mo.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(sy(t,c),J_(t.localStore,c,!0))),oE(t.remoteStore,c)}),yield i,yield k1(t,r),function(u){const c=Ge(u);c.Uo.forEach((p,y)=>{oE(c.remoteStore,y)}),c.qo.hs(),c.Uo=new Map,c.Bo=new Zr(ot.comparator)}(t),t.Wo=!1,yield VR(t.remoteStore,!1)}}),hM.apply(this,arguments)}function k1(n,e,t){return fM.apply(this,arguments)}function fM(){return fM=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[];for(const c of e){let p;const y=r.Mo.get(c);if(y&&0!==y.length){p=yield Q_(r.localStore,Ta(y[0]));for(const C of y){const A=r.Oo.get(C),x=yield a2(r,A);x.snapshot&&u.push(x.snapshot)}}else{const C=yield f1(r.localStore,c);p=yield Q_(r.localStore,C),yield ZR(r,F1(C),c,!1)}i.push(p)}return r.Fo.Pr(u),i}),fM.apply(this,arguments)}function F1(n){return ek(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function d2(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Tn()}function h2(n,e,t,r){return pM.apply(this,arguments)}function pM(){return pM=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);if(i.Wo)Fe("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(e))switch(t){case"current":case"not-current":{const u=yield p1(i.localStore),c=Kw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield qc(i,u,c);break}case"rejected":yield J_(i.localStore,e,!0),sy(i,e,r);break;default:dt()}}),pM.apply(this,arguments)}function f2(n,e,t){return gM.apply(this,arguments)}function gM(){return gM=(0,me.Z)(function*(n,e,t){const r=mM(n);if(r.Wo){for(const i of e){if(r.Mo.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const u=yield f1(r.localStore,i),c=yield Q_(r.localStore,u);yield ZR(r,F1(u),c.targetId,!1),TD(r.remoteStore,c)}for(const i of t)r.Mo.has(i)&&(yield J_(r.localStore,i,!1).then(()=>{oE(r.remoteStore,i),sy(r,i)}).catch(cg))}}),gM.apply(this,arguments)}function mM(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e2.bind(null,e),e.Fo.Pr=GB.bind(null,e.eventManager),e.Fo.zo=WB.bind(null,e.eventManager),e}function _M(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n2.bind(null,e),e}class L1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.k=iE(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return l1(this.persistence,new u1,e.initialUser,this.k)}Yo(e){return new CB(yR.ks,this.k)}Jo(e){return new _1}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class V1 extends L1{constructor(e,t,r){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield function(n){return pR.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,e),yield _M(r.ta.syncEngine),yield ey(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return l1(this.persistence,new u1,e.initialUser,this.k)}Xo(e){return new rB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=cR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fo.withCacheSize(this.cacheSizeBytes):fo.DEFAULT;return new lR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,v1(),DD(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new _1}}class g2 extends V1{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.ta.syncEngine;r.sharedClientState instanceof CR&&(r.sharedClientState.syncEngine={mi:l2.bind(null,i),gi:h2.bind(null,i),yi:f2.bind(null,i),Tn:d2.bind(null,i),_i:u2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var u=(0,me.Z)(function*(c){yield function(n,e){return hM.apply(this,arguments)}(r.ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}Jo(e){const t=v1();if(!CR.bt(t))throw new Ne(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class yM{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>P1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=s2.bind(null,r.syncEngine),yield VR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $B}createDatastore(e){const t=iE(e.databaseInfo.databaseId),r=new AB(e.databaseInfo);return new RB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>P1(this.syncEngine,p,0),c=y1.bt()?new y1:new bB,new NB(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,C){const A=new YB(r,i,u,c,p,y);return C&&(A.Wo=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Fe("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield X_(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function U1(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class SD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class m2{constructor(e,t){this.sa=e,this.k=t,this.metadata=new ui,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,me.Z)(function*(){const t=yield e.oa();if(null===t)return null;const r=e.ia.decode(t),i=Number(r);isNaN(i)&&e.aa(`length string (${r}) is not valid number`);const u=yield e.ca(i);return new qB(JSON.parse(u),t.length+i)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,me.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ca(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const r=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,me.Z)(function*(){const t=yield e.sa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class _2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const p=Ge(u),y=Xw(p.k)+"/documents",C={documents:c.map(V=>Jw(p.k,V))},A=yield p.ji("BatchGetDocuments",y,C),x=new Map;A.forEach(V=>{const z=function(n,e){return"found"in e?function(t,r){vt(!!r.found);const i=vl(t,r.found.name),u=di(r.found.updateTime),c=new rs({mapValue:{fields:r.found.fields}});return er.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const i=vl(t,r.missing),u=di(r.readTime);return er.newNoDocument(i,u)}(n,e):dt()}(p.k,V);x.set(z.key.toString(),z)});const P=[];return c.forEach(V=>{const z=x.get(V.toString());vt(!!z),P.push(z)}),P}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=ot.fromPath(i);e.mutations.push(new Kx(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=Ge(i),p=Xw(c.k)+"/documents",y={writes:u.map(C=>mD(c.k,C))};yield c.Bi("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Hr.updateTime(t):Hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lt.min()))throw new Ne(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hr.updateTime(t)}return Hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class y2{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new IR(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,me.Z)(function*(){const t=new _2(e.datastore),r=e.da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.wa(u)}))}).catch(i=>{e.wa(i)})}))}da(e){try{const t=this.updateFunction(e);return!ng(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!_k(t)}return!1}}class v2{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ki.UNAUTHENTICATED,this.clientId=BO.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ny(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function B1(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield c1(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),vM.apply(this,arguments)}function j1(n,e){return wM.apply(this,arguments)}function wM(){return wM=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield EM(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>{return(u=(0,me.Z)(function*(c,p){const y=Ge(c);y.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const C=Vh(y);y.Gr.add(3),yield X_(y),C&&y.Jr.set("Unknown"),yield y.remoteSyncer.handleCredentialChange(p),y.Gr.delete(3),yield sE(y)}),function(c,p){return u.apply(this,arguments)})(e.remoteStore,i);var u}),n.onlineComponents=e}),wM.apply(this,arguments)}function EM(n){return CM.apply(this,arguments)}function CM(){return CM=(0,me.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield B1(n,new L1)),n.offlineComponents}),CM.apply(this,arguments)}function xD(n){return IM.apply(this,arguments)}function IM(){return IM=(0,me.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield j1(n,new yM)),n.onlineComponents}),IM.apply(this,arguments)}function H1(n){return EM(n).then(e=>e.persistence)}function bM(n){return EM(n).then(e=>e.localStore)}function $1(n){return xD(n).then(e=>e.remoteStore)}function DM(n){return xD(n).then(e=>e.syncEngine)}function oy(n){return TM.apply(this,arguments)}function TM(){return TM=(0,me.Z)(function*(n){const e=yield xD(n),t=e.eventManager;return t.onListen=QB.bind(null,e.syncEngine),t.onUnlisten=JB.bind(null,e.syncEngine),t}),TM.apply(this,arguments)}function G1(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,p,y){const C=new SD({next:x=>{u.enqueueAndForget(()=>$R(i,A));const P=x.docs.has(c);!P&&x.fromCache?y.reject(new Ne(he.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&p&&"server"===p.source?y.reject(new Ne(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),A=new qR(L_(c.path),C,{includeMetadataChanges:!0,wo:!0});return jR(i,A)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}function W1(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,p,y){const C=new SD({next:x=>{u.enqueueAndForget(()=>$R(i,A)),x.fromCache&&"server"===p.source?y.reject(new Ne(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),A=new qR(c,C,{includeMetadataChanges:!0,wo:!0});return jR(i,A)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}class S2{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class ay{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ay&&e.projectId===this.projectId&&e.database===this.database}}const q1=new Map;function AM(n,e,t){if(!t)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z1(n,e,t,r){if(!0===e&&!0===r)throw new Ne(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Z1(n){if(!ot.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function K1(n){if(ot.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=RD(n);throw new Ne(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Y1(n,e){if(e<=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Q1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,z1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q1({}),this._settingsFrozen=!1,e instanceof ay?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ay(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new QV;switch(t.type){case"gapi":const r=t.client;return vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new tU(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=q1.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),q1.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new El(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class ss{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class El extends ss{constructor(e,t,r){super(e,t,L_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new ot(e))}withConverter(e){return new El(this.firestore,e,this._path)}}function J1(n,e,...t){if(n=(0,O.m9)(n),AM("collection","path",e),n instanceof aE){const r=gn.fromString(e,...t);return K1(r),new El(n,null,r)}{if(!(n instanceof Wn||n instanceof El))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return K1(r),new El(n.firestore,null,r)}}function MD(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=BO.A()),AM("doc","path",e),n instanceof aE){const r=gn.fromString(e,...t);return Z1(r),new Wn(n,null,new ot(r))}{if(!(n instanceof Wn||n instanceof El))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return Z1(r),new Wn(n.firestore,n instanceof El?n.converter:null,new ot(r))}}function X1(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof Wn||n instanceof El)&&(e instanceof Wn||e instanceof El)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eF(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof ss&&e instanceof ss&&n.firestore===e.firestore&&Gw(n._query,e._query)&&n.converter===e.converter}class M2{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new IR(this,"async_queue_retry"),this.Ra=()=>{const t=DD();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=DD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=DD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new ui;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,me.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!ag(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(r=>{throw this.Ta=r,this.Ea=!1,Br("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=t,t}enqueueAfterDelay(e,t,r){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const i=BR.createAndSchedule(this,e,t,r,u=>this.Va(u));return this.pa.push(i),i}Pa(){this.Ta&&dt()}verifyOperationInProgress(){}Sa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function SM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class N2{constructor(){this._progressObserver={},this._taskCompletionResolver=new ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sr extends aE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new M2,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tF(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||tF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tF(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new S2(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new v2(n._authCredentials,n._appCheckCredentials,n._queue,r)}function nF(n,e,t){const r=new ui;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield B1(n,t),yield j1(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===he.FAILED_PRECONDITION||u.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function rF(n){if(n._initialized||n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cl(ci.fromBase64String(e))}catch(t){throw new Ne(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cl(ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dg{constructor(e){this._methodName=e}}class ND{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const H2=/^__.*__$/;class $2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Nh(e,this.data,this.fieldMask,t,this.fieldTransforms):new zw(e,this.data,t,this.fieldTransforms)}}class iF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class PD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ka(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new PD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$a({path:r,Oa:!1});return i.Ma(e),i}La(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$a({path:r,Oa:!1});return i.ka(),i}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return kD(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(sF(this.xa)&&H2.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class G2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||iE(e)}ja(e,t,r,i=!1){return new PD({xa:e,methodName:t,Ka:r,path:Fi.emptyPath(),Oa:!1,qa:i},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function hg(n){const e=n._freezeSettings(),t=iE(n._databaseId);return new G2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OD(n,e,t,r,i,u={}){const c=n.ja(u.merge||u.mergeFields?2:0,e,t,i);NM("Data must be an object, but it was:",c,r);const p=uF(r,c);let y,C;if(u.merge)y=new P_(c.fieldMask),C=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const x of u.mergeFields){const P=PM(e,x,t);if(!c.contains(P))throw new Ne(he.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);cF(A,P)||A.push(P)}y=new P_(A),C=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,C=c.fieldTransforms;return new $2(new rs(p),y,C)}class uE extends dg{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uE}}function oF(n,e,t){return new PD({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class xM extends dg{_toFieldTransform(e){return new qw(e.path,new U_)}isEqual(e){return e instanceof xM}}class W2 extends dg{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=oF(this,e,!0),r=this.Qa.map(u=>fg(u,t)),i=new ig(r);return new qw(e.path,i)}isEqual(e){return this===e}}class q2 extends dg{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=oF(this,e,!0),r=this.Qa.map(u=>fg(u,t)),i=new sg(r);return new qw(e.path,i)}isEqual(e){return this===e}}class z2 extends dg{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new B_(e.k,ok(e.k,this.Wa));return new qw(e.path,t)}isEqual(e){return this===e}}function RM(n,e,t,r){const i=n.ja(1,e,t);NM("Data must be an object, but it was:",i,r);const u=[],c=rs.empty();tg(r,(y,C)=>{const A=OM(e,y,t);C=(0,O.m9)(C);const x=i.La(A);if(C instanceof uE)u.push(A);else{const P=fg(C,x);null!=P&&(u.push(A),c.set(A,P))}});const p=new P_(u);return new iF(c,p,i.fieldTransforms)}function MM(n,e,t,r,i,u){const c=n.ja(1,e,t),p=[PM(e,r,t)],y=[i];if(u.length%2!=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)p.push(PM(e,u[P])),y.push(u[P+1]);const C=[],A=rs.empty();for(let P=p.length-1;P>=0;--P)if(!cF(C,p[P])){const V=p[P];let z=y[P];z=(0,O.m9)(z);const ve=c.La(V);if(z instanceof uE)C.push(V);else{const ke=fg(z,ve);null!=ke&&(C.push(V),A.set(V,ke))}}const x=new P_(C);return new iF(A,x,c.fieldTransforms)}function aF(n,e,t,r=!1){return fg(t,n.ja(r?4:3,e))}function fg(n,e){if(lF(n=(0,O.m9)(n)))return NM("Unsupported field value:",e,n),uF(n,e);if(n instanceof dg)return function(t,r){if(!sF(r.xa))throw r.Ua(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=fg(c,r.Ba(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ok(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=li.fromDate(t);return{timestampValue:Qw(r.k,i)}}if(t instanceof li){const i=new li(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qw(r.k,i)}}if(t instanceof ND)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cl)return{bytesValue:Tk(r.k,t._byteString)};if(t instanceof Wn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.Ua(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ua(`Unsupported field value: ${RD(t)}`)}(n,e)}function uF(n,e){const t={};return $O(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tg(n,(r,i)=>{const u=fg(i,e.Fa(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function lF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof li||n instanceof ND||n instanceof Cl||n instanceof Wn||n instanceof dg)}function NM(n,e,t){if(!lF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=RD(t);throw e.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function PM(n,e,t){if((e=(0,O.m9)(e))instanceof zc)return e._internalPath;if("string"==typeof e)return OM(n,e);throw kD("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const Z2=new RegExp("[~\\*/\\[\\]]");function OM(n,e,t){if(e.search(Z2)>=0)throw kD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch(r){throw kD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Ne(he.INVALID_ARGUMENT,p+n+y)}function cF(n,e){return n.some(t=>t.isEqual(e))}class lE{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new K2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class K2 extends lE{data(){return super.data()}}function FD(n,e){return"string"==typeof e?OM(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}class pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zc extends lE{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(FD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cE extends Zc{data(e={}){return super.data(e)}}class Bh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cE(this._firestore,this._userDataWriter,r.key,r,new pg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new cE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new cE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,C=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),C=u.indexOf(c.doc.key)),{type:Y2(c.type),doc:p,oldIndex:y,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Y2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function dF(n,e){return n instanceof Zc&&e instanceof Zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bh&&e instanceof Bh&&n._firestore===e._firestore&&eF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hF(n){if(lD(n)&&0===n.explicitOrderBy.length)throw new Ne(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dE{}function jh(n,...e){for(const t of e)n=t._apply(n);return n}class Q2 extends dE{constructor(e,t,r){super(),this.Ga=e,this.za=t,this.Ha=r,this.type="where"}_apply(e){const t=hg(e.firestore),r=function(i,u,c,p,y,C,A){let x;if(y.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on FieldPath.documentId().`);if("in"===C||"not-in"===C){yF(A,C);const V=[];for(const z of A)V.push(_F(p,i,z));x={arrayValue:{values:V}}}else x=_F(p,i,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||yF(A,C),x=aF(c,"where",A,"in"===C||"not-in"===C);const P=Ns.create(y,C,x);return function(V,z){if(z.V()){const ke=Wx(V);if(null!==ke&&!ke.isEqual(z.field))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ke.toString()}' and '${z.field.toString()}'`);const rt=Gx(V);null!==rt&&vF(0,z.field,rt)}const ve=function(ke,rt){for(const It of ke.filters)if(rt.indexOf(It.op)>=0)return It.op;return null}(V,function(ke){switch(ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ve)throw new Ne(he.INVALID_ARGUMENT,ve===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ve.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new ss(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new $c(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class X2 extends dE{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new F_(i,u);return function(p,y){if(null===Gx(p)){const C=Wx(p);null!==C&&vF(0,C,y.field)}}(r,c),c}(e._query,this.Ga,this.Ja);return new ss(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new $c(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fF extends dE{constructor(e,t,r){super(),this.type=e,this.Ya=t,this.Xa=r}_apply(e){return new ss(e.firestore,e.converter,tk(e._query,this.Ya,this.Xa))}}class pF extends dE{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=mF(e,this.type,this.Za,this.tc);return new ss(e.firestore,e.converter,(i=t,new $c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class gF extends dE{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=mF(e,this.type,this.Za,this.tc);return new ss(e.firestore,e.converter,(i=t,new $c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function mF(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof lE)return function(i,u,c,p,y){if(!p)throw new Ne(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const C=[];for(const A of V_(i))if(A.field.isKeyField())C.push(rD(u,p.key));else{const x=p.data.field(A.field);if(Ux(x))throw new Ne(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const P=A.field.canonicalString();throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}C.push(x)}return new $w(C,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=hg(n.firestore);return function(u,c,p,y,C,A){const x=u.explicitOrderBy;if(C.length>x.length)throw new Ne(he.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<C.length;V++){const z=C[V];if(x[V].field.isKeyField()){if("string"!=typeof z)throw new Ne(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof z}`);if(!qx(u)&&-1!==z.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${y}() must be a plain document ID, but '${z}' contains a slash.`);const ve=u.path.child(gn.fromString(z));if(!ot.isDocumentKey(ve))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${y}() must result in a valid document path, but '${ve}' is not because it contains an odd number of segments.`);const ke=new ot(ve);P.push(rD(c,ke))}else{const ve=aF(p,y,z);P.push(ve)}}return new $w(P,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _F(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!qx(e)&&-1!==t.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gn.fromString(t));if(!ot.isDocumentKey(r))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rD(n,new ot(r))}if(t instanceof Wn)return rD(n,t._key);throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${RD(t)}.`)}function yF(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vF(n,e,t){if(!t.isEqual(e))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class kM{convertValue(e,t="none"){switch(rg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(O_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return tg(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ND(jr(e.latitude),jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=GO(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uw(e));default:return null}}convertTimestamp(e){const t=Mh(e);return new li(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gn.fromString(e);vt(Uk(r));const i=new ay(r.get(1),r.get(3)),u=new ot(r.popFirst(5));return i.isEqual(t)||Br(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function LD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class aj extends kM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class wF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hg(e)}set(e,t,r){this._verifyNotCommitted();const i=Hh(e,this._firestore),u=LD(i.converter,t,r),c=OD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Hr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Hh(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof zc?MM(this._dataReader,"WriteBatch.update",u._key,t,r,i):RM(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hh(e,this._firestore);return this._mutations=this._mutations.concat(new Zw(t._key,Hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hh(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ne(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gg extends kM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function EF(n,e,t){n=sn(n,Wn);const r=sn(n.firestore,sr),i=LD(n.converter,e,t);return uy(r,[OD(hg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Hr.none())])}function CF(n,e,t,...r){n=sn(n,Wn);const i=sn(n.firestore,sr),u=hg(i);let c;return c="string"==typeof(e=(0,O.m9)(e))||e instanceof zc?MM(u,"updateDoc",n._key,e,t,r):RM(u,"updateDoc",n._key,e),uy(i,[c.toMutation(n._key,Hr.exists(!0))])}function IF(n,...e){var t,r,i;n=(0,O.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||SM(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(SM(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let y,C,A;if(n instanceof Wn)C=sn(n.firestore,sr),A=L_(n._key.path),y={next:x=>{e[c]&&e[c](FM(C,n,x))},error:e[c+1],complete:e[c+2]};else{const x=sn(n,ss);C=sn(x.firestore,sr),A=x._query;const P=new gg(C);y={next:V=>{e[c]&&e[c](new Bh(C,P,x,V))},error:e[c+1],complete:e[c+2]},hF(n._query)}return function(x,P,V,z){const ve=new SD(z),ke=new qR(P,ve,V);return x.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return jR(yield oy(x),ke)})),()=>{ve.na(),x.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return $R(yield oy(x),ke)}))}}(Kr(C),A,p,y)}function uy(n,e){return function(t,r){const i=new ui;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(n,e,t){return QR.apply(this,arguments)}(yield DM(t),r,i)})),i.promise}(Kr(n),e)}function FM(n,e,t){const r=t.docs.get(e._key),i=new gg(n);return new Zc(n,i,e._key,r,new pg(t.hasPendingWrites,t.fromCache),e.converter)}class _j extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hg(e)}get(e){const t=Hh(e,this._firestore),r=new aj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const u=i[0];if(u.isFoundDocument())return new lE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new lE(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=Hh(e,this._firestore),u=LD(i.converter,t,r),c=OD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Hh(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof zc?MM(this._dataReader,"Transaction.update",u._key,t,r,i):RM(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Hh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hh(e,this._firestore),r=new gg(this._firestore);return super.get(e).then(i=>new Zc(this._firestore,r,t._key,i._document,new pg(!1,!1),t.converter))}}function LM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bF(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function DF(){if("undefined"==typeof atob)throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){M_=ga.SDK_VERSION,(0,ga._registerComponent)(new _u.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new sr(i,new XV(t.getProvider("auth-internal")),new nU(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ga.registerVersion)(LO,"3.4.1",n),(0,ga.registerVersion)(LO,"3.4.1","esm2017")}();class hE{constructor(e){this._delegate=e}static fromBase64String(e){return DF(),new hE(Cl.fromBase64String(e))}static fromUint8Array(e){return bF(),new hE(Cl.fromUint8Array(e))}toBase64(){return DF(),this._delegate.toBase64()}toUint8Array(){return bF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VM(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class Aj{enableIndexedDbPersistence(e,t){return function(n,e){rF(n=sn(n,sr));const t=Kr(n),r=n._freezeSettings(),i=new yM;return nF(t,i,new V1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){rF(n=sn(n,sr));const e=Kr(n),t=n._freezeSettings(),r=new yM;return nF(e,r,new g2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ui;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Tu.bt())return Promise.resolve();const i=r+"main";yield Tu.delete(i)}),function(r){return t.apply(this,arguments)})(cR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ay||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const u=(n=sn(n,aE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Lw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=ki.MOCK_USER;else{c=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ne(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ki(y)}n._authCredentials=new JV(new VO(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield H1(n),t=yield $1(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i.Gr.delete(0),sE(i)}(t)}))}(Kr(n=sn(n,sr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield H1(n),t=yield $1(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=Ge(i);u.Gr.add(0),yield X_(u),u.Jr.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=sn(n,sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,z1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new ui;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(n,e){return nM.apply(this,arguments)}(yield DM(e),t)})),t.promise}(Kr(n=sn(n,sr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new SD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield oy(n),i=t,Ge(r).io.add(i),void i.next();var r,i})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield oy(n),i=t,void Ge(r).io.delete(i);var r,i}))}}(Kr(n=sn(n,sr)),SM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ly(this,J1(this._delegate,e))}catch(t){throw Ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,MD(this._delegate,e))}catch(t){throw Ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Os(this,function(n,e){if(n=sn(n,aE),AM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ss(n,null,(t=e,new $c(gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const r=yield(i=n,xD(i).then(u=>u.datastore));var i;new y2(n.asyncQueue,r,e,t).run()})),t.promise}(Kr(n=sn(n,sr)),t=>e(new _j(n,t)))}(this._delegate,t=>e(new AF(this,t)))}batch(){return Kr(this._delegate),new SF(new wF(this._delegate,e=>uy(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Kr(n=sn(n,sr)),r=new N2;return function(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,C){if(y instanceof Uint8Array)return U1(y,C);if(y instanceof ArrayBuffer)return U1(new Uint8Array(y),C);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new m2(y,c);var y}(t,iE(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function(n,e,t){const r=Ge(n);var i;(i=(0,me.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(P,V){const z=Ge(P),ve=di(V.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",ke=>z.Ye.getBundleMetadata(ke,V.id)).then(ke=>!!ke&&ke.createTime.compareTo(ve)>=0)}(u.localStore,y))return yield c.close(),void p._completeWith((P=y,{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}));p._updateProgress(S1(y));const C=new zB(y,u.localStore,c.k);let A=yield c.Ho();for(;A;){const P=yield C.yo(A);P&&p._updateProgress(P),A=yield c.Ho()}const x=yield C.complete();yield qc(u,x.In,void 0),yield function(P,V){const z=Ge(P);return z.persistence.runTransaction("Save bundle","readwrite",ve=>z.Ye.saveBundleMetadata(ve,V))}(u.localStore,y),p._completeWith(x.progress)}catch(y){Lw("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y)}var P}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield DM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ye.getNamedQuery(u,r))}(yield bM(n),e)}))}(Kr(n=sn(n,sr)),e).then(t=>t?new ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Os(this,t):null)}}class VD extends kM{constructor(e){super(),this.firestore=e}convertBytes(e){return new hE(new Cl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class AF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}get(e){const t=_g(e);return this._delegate.get(t).then(r=>new fE(this._firestore,new Zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_g(e);return r?(LM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=_g(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=_g(e);return this._delegate.delete(t),this}}class SF{constructor(e){this._delegate=e}set(e,t,r){const i=_g(e);return r?(LM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=_g(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=_g(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new cE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new mg(e,new VD(e),t),i.set(t,u)),u}}mg.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new Wn(t._delegate,r,new ot(e)))}static forKey(e,t,r){return new Sa(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ly(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ly(this.firestore,J1(this._delegate,e))}catch(t){throw Ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof Wn&&X1(this._delegate,e)}set(e,t){t=LM("DocumentReference.set",t);try{return t?EF(this._delegate,e,t):EF(this._delegate,e)}catch(r){throw Ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?CF(this._delegate,e):CF(this._delegate,e,t,...r)}catch(i){throw Ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return uy(sn(n.firestore,sr),[new Zw(n._key,Hr.none())])}(this._delegate)}onSnapshot(...e){const t=xF(e),r=RF(e,i=>new fE(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return IF(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=sn(n,Wn);const e=sn(n.firestore,sr),t=Kr(e),r=new gg(e);return function(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const p=yield function(y,C){const A=Ge(y);return A.persistence.runTransaction("read document","readonly",x=>A.Wn.Rn(x,C))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Ne(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=ny(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield bM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Zc(e,r,n._key,i,new pg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=sn(n,Wn);const e=sn(n.firestore,sr);return G1(Kr(e),n._key,{source:"server"}).then(t=>FM(e,n,t))}(this._delegate):function(n){n=sn(n,Wn);const e=sn(n.firestore,sr);return G1(Kr(e),n._key).then(t=>FM(e,n,t))}(this._delegate),t.then(r=>new fE(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?mg.getInstance(this.firestore,e):null))}}function Ps(n,e,t){return n.message=n.message.replace(e,t),n}function xF(n){for(const e of n)if("object"==typeof e&&!VM(e))return e;return{}}function RF(n,e){var t,r;let i;return i=VM(n[0])?n[0]:VM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class fE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dF(this._delegate,e._delegate)}}class pE extends fE{data(e){const t=this._delegate.data(e);return function(n,e){n||dt()}(void 0!==t),t}}class Os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}where(e,t,r){try{return new Os(this.firestore,jh(this._delegate,function(n,e,t){const r=e,i=FD("where",n);return new Q2(i,r,t)}(e,t,r)))}catch(i){throw Ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Os(this.firestore,jh(this._delegate,function(n,e="asc"){const t=e,r=FD("orderBy",n);return new X2(r,t)}(e,t)))}catch(r){throw Ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Os(this.firestore,jh(this._delegate,function(n){return Y1("limit",n),new fF("limit",n,"F")}(e)))}catch(t){throw Ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Os(this.firestore,jh(this._delegate,function(n){return Y1("limitToLast",n),new fF("limitToLast",n,"L")}(e)))}catch(t){throw Ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Os(this.firestore,jh(this._delegate,function(...n){return new pF("startAt",n,!0)}(...e)))}catch(t){throw Ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Os(this.firestore,jh(this._delegate,function(...n){return new pF("startAfter",n,!1)}(...e)))}catch(t){throw Ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Os(this.firestore,jh(this._delegate,function(...n){return new gF("endBefore",n,!0)}(...e)))}catch(t){throw Ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Os(this.firestore,jh(this._delegate,function(...n){return new gF("endAt",n,!1)}(...e)))}catch(t){throw Ps(t,"endAt()","Query.endAt()")}}isEqual(e){return eF(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=sn(n,ss);const e=sn(n.firestore,sr),t=Kr(e),r=new gg(e);return function(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const p=yield CD(i,u,!0),y=new M1(u,p.zn),C=y.bo(p.documents),A=y.applyChanges(C,!1);c.resolve(A.snapshot)}catch(p){const y=ny(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield bM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Bh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=sn(n,ss);const e=sn(n.firestore,sr),t=Kr(e),r=new gg(e);return W1(t,n._query,{source:"server"}).then(i=>new Bh(e,r,n,i))}(this._delegate):function(n){n=sn(n,ss);const e=sn(n.firestore,sr),t=Kr(e),r=new gg(e);return hF(n._query),W1(t,n._query).then(i=>new Bh(e,r,n,i))}(this._delegate),t.then(r=>new UM(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xF(e),r=RF(e,i=>new UM(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return IF(this._delegate,t,r)}withConverter(e){return new Os(this.firestore,this._delegate.withConverter(e?mg.getInstance(this.firestore,e):null))}}class xj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new pE(this._firestore,r))})}isEqual(e){return dF(this._delegate,e._delegate)}}class ly extends Os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?MD(this._delegate):MD(this._delegate,e))}catch(t){throw Ps(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=sn(n.firestore,sr),r=MD(n),i=LD(n.converter,e);return uy(t,[OD(hg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Hr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return X1(this._delegate,e._delegate)}withConverter(e){return new ly(this.firestore,this._delegate.withConverter(e?mg.getInstance(this.firestore,e):null))}}function _g(n){return sn(n,Wn)}class BM{constructor(...e){this._delegate=new zc(...e)}static documentId(){return new BM(Fi.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class yg{constructor(e){this._delegate=e}static serverTimestamp(){const e=new xM("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new yg(e)}static delete(){const e=new uE("deleteField");return e._methodName="FieldValue.delete",new yg(e)}static arrayUnion(...e){const t=function(...n){return new W2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yg(t)}static arrayRemove(...e){const t=function(...n){return new q2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yg(t)}static increment(e){const t=function(n){return new z2("increment",n)}(e);return t._methodName="FieldValue.increment",new yg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Rj={Firestore:TF,GeoPoint:ND,Timestamp:li,Blob:hE,Transaction:AF,WriteBatch:SF,DocumentReference:Sa,DocumentSnapshot:fE,Query:Os,QueryDocumentSnapshot:pE,QuerySnapshot:UM,CollectionReference:ly,FieldPath:BM,FieldValue:yg,setLogLevel:function(n){!function(n){Rh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function MF(n,e){return function(n,e=yv.z){return new On.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function jM(n,e){return MF(n,e).pipe((0,ct.U)(t=>({payload:t,type:"query"})))}function UD(n,e){return jM(n,e).pipe(wd(void 0),WS(),(0,ct.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(A=>A.doc.ref.isEqual(c.ref)),C=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&C&&JSON.stringify(C.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function NF(n,e,t){return UD(n,t).pipe(Zs((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return HM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return HM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return HM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),kT(),(0,ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function HM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function PF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new _u.wA("firestore-compat",t=>((e,t)=>new TF(e,t,new Aj))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Rj)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.10")}(VT.Z);class OF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=UD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wd(void 0),WS(),Or(([r,i])=>i.length>0||!r),(0,ct.U)(([r,i])=>i),Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PF(e);return NF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return jM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ln.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(Ln.iC)}add(e){return this.ref.add(e)}doc(e){return new kF(this.ref.doc(e),this.afs)}}class kF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=VF(r,t);return new OF(i,u,this.afs)}snapshotChanges(){return function(n,e){return MF(n,e).pipe(wd(void 0),WS(),(0,ct.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(Ln.iC)}}class Lj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?UD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Or(t=>t.length>0),Ln.iC):UD(this.query,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PF(e);return NF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return jM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ln.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(Ln.iC)}}const FF=new f.OlP("angularfire2.enableFirestorePersistence"),LF=new f.OlP("angularfire2.firestore.persistenceSettings"),Vj=new f.OlP("angularfire2.firestore.settings"),Uj=new f.OlP("angularfire2.firestore.use-emulator");function VF(n,e=(t=>t)){return{query:e(n),ref:n}}let Bj=(()=>{class n{constructor(t,r,i,u,c,p,y,C,A,x,P,V,z,ve,ke,rt,It){this.schedulers=y;const Xt=(0,Ti.on)(t,p,r),St=A;x&&$S(Xt,p,P,z,ve,ke,V,rt),[this.firestore,this.persistenceEnabled$]=(0,Ti.cc)(`${Xt.name}.firestore`,"AngularFirestore",Xt.name,()=>{const qn=p.runOutsideAngular(()=>Xt.firestore());if(u&&qn.settings(u),St&&qn.useEmulator(...St),i&&!vr(c)){const Au=()=>{try{return(0,Tn.D)(qn.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(BD){return"undefined"!=typeof console&&console.warn(BD),Qe(!1)}};return[qn,p.runOutsideAngular(Au)]}return[qn,Qe(!1)]},[u,St,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=VF(i,r),p=this.schedulers.ngZone.run(()=>u);return new OF(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new Lj(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new kF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ti.Dh),f.LFG(Ti.xv,8),f.LFG(FF,8),f.LFG(Vj,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Ln.HU),f.LFG(LF,8),f.LFG(Uj,8),f.LFG(GS,8),f.LFG(LS,8),f.LFG(VS,8),f.LFG(US,8),f.LFG(BS,8),f.LFG(jS,8),f.LFG(HS,8),f.LFG(xb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jj=(()=>{class n{constructor(){dP.Z.registerVersion("angularfire",Ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:FF,useValue:!0},{provide:LF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Bj]}),n})();const UF_firebase={apiKey:"AIzaSyDOkhLawxvzv_fva4Xoxi7uVRjSXs_MRdE",authDomain:"movies-app-angular-d0598.firebaseapp.com",projectId:"movies-app-angular-d0598",storageBucket:"movies-app-angular-d0598.appspot.com",messagingSenderId:"1098514623202",appId:"1:1098514623202:web:6526f0c03511afcd138cbb",measurementId:"G-XC64LFHS67"};let Hj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[om]}),n.\u0275inj=f.cJS({providers:[om,_v,ip],imports:[[nu,qa,zs,EC,Ti.hO.initializeApp(UF_firebase),jL,jj,Jd],nu]}),n})();(0,f.G48)(),Zo().bootstrapModule(Hj).catch(n=>console.error(n))},5867:(nt,Ee,F)=>{"use strict";F.d(Ee,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=F(9681);(0,f.registerVersion)("firebase","9.6.1","app")},127:(nt,Ee,F)=>{"use strict";F.d(Ee,{Z:()=>f.Z});var f=F(3942);f.Z.registerVersion("firebase","9.6.1","app-compat")},9259:(nt,Ee,F)=>{"use strict";F.r(Ee);var f=F(5861),Q=F(3942),k=F(2090),ue=F(9681);function se(_,h){var g={};for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&h.indexOf(w)<0&&(g[w]=_[w]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(w=Object.getOwnPropertySymbols(_);T<w.length;T++)h.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(_,w[T])&&(g[w[T]]=_[w[T]])}return g}var Oe=F(1877),de=F(4859);const _r=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ar=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},cn=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),An=new Oe.Yd("@firebase/auth");function Yr(_,...h){An.logLevel<=Oe.in.ERROR&&An.error(`Auth (${ue.SDK_VERSION}): ${_}`,...h)}function $t(_,...h){throw Ui(_,...h)}function bn(_,...h){return Ui(_,...h)}function Bo(_,h,g){const w=Object.assign(Object.assign({},Ar()),{[h]:g});return new k.LL("auth","Firebase",w).create(h,{appName:_.name})}function fi(_,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&$t(_,"argument-error"),Bo(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ui(_,...h){if("string"!=typeof _){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(g,...w)}return cn.create(_,...h)}function Te(_,h,...g){if(!_)throw Ui(h,...g)}function tr(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Yr(h),new Error(h)}function Bn(_,h){_||tr(h)}const ht=new Map;function Gt(_){Bn(_ instanceof Function,"Expected a class definition");let h=ht.get(_);return h?(Bn(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,ht.set(_,h),h)}function it(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ft(){return"http:"===xt()||"https:"===xt()}function xt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class qt{constructor(h,g){this.shortDelay=h,this.longDelay=g,Bn(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ze(_,h){Bn(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class st{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Il={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ks=new qt(3e4,6e4);function Kt(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function mt(_,h,g,w){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(_,h,g,w,T={}){return bl(_,T,(0,f.Z)(function*(){let R={},j={};w&&("GET"===h?j=w:R={body:JSON.stringify(w)});const J=(0,k.xO)(Object.assign({key:_.config.apiKey},j)).slice(1),Pe=yield _._getAdditionalHeaders();return Pe["Content-Type"]="application/json",_.languageCode&&(Pe["X-Firebase-Locale"]=_.languageCode),st.fetch()(ye(_,_.config.apiHost,g,J),Object.assign({method:h,headers:Pe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function bl(_,h,g){return W.apply(this,arguments)}function W(){return(W=(0,f.Z)(function*(_,h,g){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},Il),h);try{const T=new te(_),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const j=yield R.json();if("needConfirmation"in j)throw Ze(_,"account-exists-with-different-credential",j);if(R.ok&&!("errorMessage"in j))return j;{const J=R.ok?j.errorMessage:j.error.message,[Pe,Me]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw Ze(_,"credential-already-in-use",j);if("EMAIL_EXISTS"===Pe)throw Ze(_,"email-already-in-use",j);const Xe=w[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(Me)throw Bo(_,Xe,Me);$t(_,Xe)}}catch(T){if(T instanceof k.ZR)throw T;$t(_,"network-request-failed")}})).apply(this,arguments)}function B(_,h,g,w){return q.apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(_,h,g,w,T={}){const R=yield mt(_,h,g,w,T);return"mfaPendingCredential"in R&&$t(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function ye(_,h,g,w){const T=`${h}${g}?${w}`;return _.config.emulator?ze(_.config,T):`${_.config.apiScheme}://${T}`}class te{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(bn(this.auth,"timeout")),ks.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ze(_,h,g){const w={appName:_.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const T=bn(_,h,w);return T.customData._tokenResponse=g,T}function Yt(){return(Yt=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function or(_,h){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Gr(_,h){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ar(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function jo(){return(jo=(0,f.Z)(function*(_,h=!1){const g=(0,k.m9)(_),w=yield g.getIdToken(h),T=go(w);Te(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,j=null==R?void 0:R.sign_in_provider;return{claims:T,token:w,authTime:ar(Su(T.auth_time)),issuedAtTime:ar(Su(T.iat)),expirationTime:ar(Su(T.exp)),signInProvider:j||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Su(_){return 1e3*Number(_)}function go(_){const[h,g,w]=_.split(".");if(void 0===h||void 0===g||void 0===w)return Yr("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,k.tV)(g);return T?JSON.parse(T):(Yr("Failed to decode base64 JWT payload"),null)}catch(T){return Yr("Caught error parsing JWT payload as JSON",T),null}}function dn(_,h){return gi.apply(this,arguments)}function gi(){return(gi=(0,f.Z)(function*(_,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof k.ZR&&Qr(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Qr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class ur{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class xu{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ar(this.lastLoginAt),this.creationTime=ar(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function os(_){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,f.Z)(function*(_){var h;const g=_.auth,w=yield _.getIdToken(),T=yield dn(_,Gr(g,{idToken:w}));Te(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];_._notifyReloadListener(R);const j=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Kc(R.providerUserInfo):[],J=Mn(_.providerData,j),Xe=!!_.isAnonymous&&!(_.email&&R.passwordHash||(null==J?void 0:J.length)),et={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:J,metadata:new xu(R.createdAt,R.lastLoginAt),isAnonymous:Xe};Object.assign(_,et)})).apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(_){const h=(0,k.m9)(_);yield os(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Mn(_,h){return[..._.filter(w=>!h.some(T=>T.providerId===w.providerId)),...h]}function Kc(_){return _.map(h=>{var{providerId:g}=h,w=se(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function je(){return(je=(0,f.Z)(function*(_,h){const g=yield bl(_,{},(0,f.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=_.config,j=ye(_,T,"/v1/token",`key=${R}`),J=yield _._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",st.fetch()(j,{method:"POST",headers:J,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Te(h.idToken,"internal-error"),Te(void 0!==h.idToken,"internal-error"),Te(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(_){const h=go(_);return Te(h,"internal-error"),Te(void 0!==h.exp,"internal-error"),Te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,f.Z)(function*(){return Te(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:j}=yield function(_,h){return je.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(T,R,Number(j))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:T,expirationTime:R}=g,j=new _t;return w&&(Te("string"==typeof w,"internal-error",{appName:h}),j.refreshToken=w),T&&(Te("string"==typeof T,"internal-error",{appName:h}),j.accessToken=T),R&&(Te("number"==typeof R,"internal-error",{appName:h}),j.expirationTime=R),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return tr("not implemented")}}function zt(_,h){Te("string"==typeof _||void 0===_,"internal-error",{appName:h})}class Sn{constructor(h){var{uid:g,auth:w,stsTokenManager:T}=h,R=se(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.metadata=new xu(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const w=yield dn(g,g.stsTokenManager.getToken(g.auth,h));return Te(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function(_){return jo.apply(this,arguments)}(this,h)}reload(){return function(_){return as.apply(this,arguments)}(this)}_assign(h){this!==h&&(Te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Sn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),T=!0),g&&(yield os(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield dn(h,function(_,h){return Yt.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,T,R,j,J,Pe,Me,Xe;const et=null!==(w=g.displayName)&&void 0!==w?w:void 0,Mt=null!==(T=g.email)&&void 0!==T?T:void 0,Qn=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,to=null!==(j=g.photoURL)&&void 0!==j?j:void 0,ii=null!==(J=g.tenantId)&&void 0!==J?J:void 0,lc=null!==(Pe=g._redirectEventId)&&void 0!==Pe?Pe:void 0,ol=null!==(Me=g.createdAt)&&void 0!==Me?Me:void 0,Pf=null!==(Xe=g.lastLoginAt)&&void 0!==Xe?Xe:void 0,{uid:al,emailVerified:Jg,isAnonymous:Of,providerData:Bd,stsTokenManager:kf}=g;Te(al&&kf,h,"internal-error");const cc=_t.fromJSON(this.name,kf);Te("string"==typeof al,h,"internal-error"),zt(et,h.name),zt(Mt,h.name),Te("boolean"==typeof Jg,h,"internal-error"),Te("boolean"==typeof Of,h,"internal-error"),zt(Qn,h.name),zt(to,h.name),zt(ii,h.name),zt(lc,h.name),zt(ol,h.name),zt(Pf,h.name);const jd=new Sn({uid:al,auth:h,email:Mt,emailVerified:Jg,displayName:et,isAnonymous:Of,photoURL:to,phoneNumber:Qn,tenantId:ii,stsTokenManager:cc,createdAt:ol,lastLoginAt:Pf});return Bd&&Array.isArray(Bd)&&(jd.providerData=Bd.map(dc=>Object.assign({},dc))),lc&&(jd._redirectEventId=lc),jd}static _fromIdTokenResponse(h,g,w=!1){return(0,f.Z)(function*(){const T=new _t;T.updateFromServerResponse(g);const R=new Sn({uid:g.localId,auth:h,stsTokenManager:T,isAnonymous:w});return yield os(R),R})()}}const mn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,w){var T=this;return(0,f.Z)(function*(){T.storage[g]=w})()}_get(g){var w=this;return(0,f.Z)(function*(){const T=w.storage[g];return void 0===T?null:T})()}_remove(g){var w=this;return(0,f.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return _.type="NONE",_})();function nr(_,h,g){return`firebase:${_}:${h}:${g}`}class on{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:T,name:R}=this.auth;this.fullUserKey=nr(this.userKey,T.apiKey,R),this.fullPersistenceKey=nr("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Sn._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,f.Z)(function*(){if(!g.length)return new on(Gt(mn),h,w);const T=(yield Promise.all(g.map(function(){var Me=(0,f.Z)(function*(Xe){if(yield Xe._isAvailable())return Xe});return function(Xe){return Me.apply(this,arguments)}}()))).filter(Me=>Me);let R=T[0]||Gt(mn);const j=nr(w,h.config.apiKey,h.name);let J=null;for(const Me of g)try{const Xe=yield Me._get(j);if(Xe){const et=Sn._fromJSON(h,Xe);Me!==R&&(J=et),R=Me;break}}catch(Xe){}const Pe=T.filter(Me=>Me._shouldAllowMigration);return R._shouldAllowMigration&&Pe.length?(R=Pe[0],J&&(yield R._set(j,J.toJSON())),yield Promise.all(g.map(function(){var Me=(0,f.Z)(function*(Xe){if(Xe!==R)try{yield Xe._remove(j)}catch(et){}});return function(Xe){return Me.apply(this,arguments)}}())),new on(R,h,w)):new on(R,h,w)})()}}function jn(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ls(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ho(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Xr(h))return"Blackberry";if(yr(h))return"Webos";if(yt(h))return"Safari";if((h.includes("chrome/")||Ra(h))&&!h.includes("edge/"))return"Chrome";if(_o(h))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ho(_=(0,k.z$)()){return/firefox\//i.test(_)}function yt(_=(0,k.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ra(_=(0,k.z$)()){return/crios\//i.test(_)}function Ls(_=(0,k.z$)()){return/iemobile/i.test(_)}function _o(_=(0,k.z$)()){return/android/i.test(_)}function Xr(_=(0,k.z$)()){return/blackberry/i.test(_)}function yr(_=(0,k.z$)()){return/webos/i.test(_)}function us(_=(0,k.z$)()){return/iphone|ipad|ipod/i.test(_)}function $o(_=(0,k.z$)()){return us(_)||_o(_)||yr(_)||Xr(_)||/windows phone/i.test(_)||Ls(_)}function ji(_,h=[]){let g;switch(_){case"Browser":g=jn((0,k.z$)());break;case"Worker":g=`${jn((0,k.z$)())}-${_}`;break;default:g=_}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${w}`}class Hi{constructor(h,g){this.app=h,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ls(this),this.idTokenSubscription=new ls(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=Gt(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,R;if(!w._deleted&&(w.persistenceManager=yield on.create(w,h),!w._deleted)){if(null===(T=w._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var w;let T=yield g.assertedPersistence.getCurrentUser();if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,j=null==T?void 0:T._redirectEventId,J=yield g.tryRedirectSignIn(h);(!R||R===j)&&(null==J?void 0:J.user)&&(T=J.user)}return T?T._redirectEventId?(Te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===T._redirectEventId?g.directlySetCurrentUser(T):g.reloadAndSetCurrentUserOrClear(T)):g.reloadAndSetCurrentUserOrClear(T):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(T){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield os(h)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const w=h?(0,k.m9)(h):null;return w&&Te(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){if(!g._deleted)return h&&Te(g.tenantId===h.tenantId,g,"tenant-id-mismatch"),g.queue((0,f.Z)(function*(){yield g.directlySetCurrentUser(h),g.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(Gt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,f.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(g);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&Gt(h)||g._popupRedirectResolver;Te(w,g,"argument-error"),g.redirectPersistenceManager=yield on.create(g,[Gt(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var w,T;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(j,this,"internal-error"),j.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,w,T):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ji(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){const g={"X-Client-Version":h.clientVersion};return h.app.options.appId&&(g["X-Firebase-gmpid"]=h.app.options.appId),g})()}}function zn(_){return(0,k.m9)(_)}class ls{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ei(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function vg(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class Go{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return tr("not implemented")}_getIdTokenResponse(h){return tr("not implemented")}_linkToIdToken(h,g){return tr("not implemented")}_getReauthenticationResolver(h){return tr("not implemented")}}function Gh(_,h){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:resetPassword",Kt(_,h))})).apply(this,arguments)}function Wh(_,h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wg(_,h){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:update",Kt(_,h))})).apply(this,arguments)}function Xc(){return(Xc=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signInWithPassword",Kt(_,h))})).apply(this,arguments)}function Al(_,h){return ed.apply(this,arguments)}function ed(){return(ed=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:sendOobCode",Kt(_,h))})).apply(this,arguments)}function Eg(_,h){return td.apply(this,arguments)}function td(){return(td=(0,f.Z)(function*(_,h){return Al(_,h)})).apply(this,arguments)}function Cg(_,h){return qh.apply(this,arguments)}function qh(){return(qh=(0,f.Z)(function*(_,h){return Al(_,h)})).apply(this,arguments)}function Mu(_,h){return Na.apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(_,h){return Al(_,h)})).apply(this,arguments)}function Sl(_,h){return xl.apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(_,h){return Al(_,h)})).apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signInWithEmailLink",Kt(_,h))})).apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signInWithEmailLink",Kt(_,h))})).apply(this,arguments)}class qo extends Go{constructor(h,g,w,T=null){super("password",w),this._email=h,this._password=g,this._tenantId=T}static _fromEmailAndPassword(h,g){return new qo(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new qo(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function(_,h){return Xc.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(_,h){return $i.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:$t(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return Wh(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(_,h){return Vs.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:$t(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Us(_,h){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signInWithIdp",Kt(_,h))})).apply(this,arguments)}class lr extends Go{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new lr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):$t("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:T}=g,R=se(g,["providerId","signInMethod"]);if(!w||!T)return null;const j=new lr(w,T);return j.idToken=R.idToken||void 0,j.accessToken=R.accessToken||void 0,j.secret=R.secret,j.nonce=R.nonce,j.pendingToken=R.pendingToken||null,j}_getIdTokenResponse(h){return Us(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Us(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Us(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function cs(_,h){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:sendVerificationCode",Kt(_,h))})).apply(this,arguments)}function vr(){return(vr=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signInWithPhoneNumber",Kt(_,h))})).apply(this,arguments)}function Ml(){return(Ml=(0,f.Z)(function*(_,h){const g=yield B(_,"POST","/v1/accounts:signInWithPhoneNumber",Kt(_,h));if(g.temporaryProof)throw Ze(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Pu={USER_NOT_FOUND:"user-not-found"};function Oa(){return(Oa=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signInWithPhoneNumber",Kt(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Pu)})).apply(this,arguments)}class yo extends Go{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new yo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new yo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function(_,h){return vr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function(_,h){return Ml.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(_,h){return Oa.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:T}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:R}=h;return w||g||T||R?new yo({verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:R}):null}}class Bs{constructor(h){var g,w,T,R,j,J;const Pe=(0,k.zd)((0,k.pd)(h)),Me=null!==(g=Pe.apiKey)&&void 0!==g?g:null,Xe=null!==(w=Pe.oobCode)&&void 0!==w?w:null,et=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Pe.mode)&&void 0!==T?T:null);Te(Me&&Xe&&et,"argument-error"),this.apiKey=Me,this.operation=et,this.code=Xe,this.continueUrl=null!==(R=Pe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(j=Pe.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(J=Pe.tenantId)&&void 0!==J?J:null}static parseLink(h){const g=function(_){const h=(0,k.zd)((0,k.pd)(_)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(_)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||g||h||_}(h);try{return new Bs(g)}catch(w){return null}}}let vo=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,w){return qo._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const T=Bs.parseLink(w);return Te(T,"argument-error"),qo._fromEmailAndCode(g,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Mr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class yi extends Mr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Pn extends yi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return Te("providerId"in g&&"signInMethod"in g,"argument-error"),lr._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Te(h.idToken||h.accessToken,"argument-error"),lr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Pn.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Pn.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:R,nonce:j,providerId:J}=h;if(!w&&!T&&!g&&!R||!J)return null;try{return new Pn(J)._credential({idToken:g,accessToken:w,nonce:j,pendingToken:R})}catch(Pe){return null}}}let Ou=(()=>{class _ extends yi{constructor(){super("facebook.com")}static credential(g){return lr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),wo=(()=>{class _ extends yi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return lr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:T}=g;if(!w&&!T)return null;try{return _.credential(w,T)}catch(R){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Eo=(()=>{class _ extends yi{constructor(){super("github.com")}static credential(g){return lr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class ds extends Go{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Us(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Us(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Us(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:T,pendingToken:R}=g;return w&&T&&R&&w===T?new ds(w,R):null}static _create(h,g){return new ds(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Co extends Mr{constructor(h){Te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Co.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Co.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=ds.fromJSON(h);return Te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return ds._create(w,g)}catch(T){return null}}}let Nr=(()=>{class _ extends yi{constructor(){super("twitter.com")}static credential(g,w){return lr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=g;if(!w||!T)return null;try{return _.credential(w,T)}catch(R){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Fa(_,h){return js.apply(this,arguments)}function js(){return(js=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signUp",Kt(_,h))})).apply(this,arguments)}class Ye{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,T=!1){return(0,f.Z)(function*(){const R=yield Sn._fromIdTokenResponse(h,w,T),j=ku(w);return new Ye({user:R,providerId:j,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const T=ku(w);return new Ye({user:h,providerId:T,_tokenResponse:w,operationType:g})})()}}function ku(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function zo(){return(zo=(0,f.Z)(function*(_){var h;const g=zn(_);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new Ye({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Fa(g,{returnSecureToken:!0}),T=yield Ye._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Va extends k.ZR{constructor(h,g,w,T){var R;super(g.code,g.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,Va.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,T){return new Va(h,g,w,T)}}function Fu(_,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Va._fromErrorAndOperation(_,R,h,w):R})}function Lu(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function be(){return(be=(0,f.Z)(function*(_,h){const g=(0,k.m9)(_);yield _n(!0,g,h);const{providerUserInfo:w}=yield or(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),T=Lu(w||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Pt(_,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(_,h,g=!1){const w=yield dn(_,h._linkToIdToken(_.auth,yield _.getIdToken()),g);return Ye._forOperation(_,"link",w)})).apply(this,arguments)}function _n(_,h,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(_,h,g){yield os(h);const T=!1===_?"provider-already-linked":"no-such-provider";Te(Lu(h.providerData).has(g)===_,h.auth,T)})).apply(this,arguments)}function Hs(_,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(_,h,g=!1){const{auth:w}=_,T="reauthenticate";try{const R=yield dn(_,Fu(w,T,h,_),g);Te(R.idToken,w,"internal-error");const j=go(R.idToken);Te(j,w,"internal-error");const{sub:J}=j;return Te(_.uid===J,w,"user-mismatch"),Ye._forOperation(_,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&$t(w,"user-mismatch"),R}})).apply(this,arguments)}function Vu(_,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(_,h,g=!1){const w="signIn",T=yield Fu(_,w,h),R=yield Ye._fromIdTokenResponse(_,w,T);return g||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Pl(_,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,f.Z)(function*(_,h){return Vu(zn(_),h)})).apply(this,arguments)}function Ba(_,h){return bo.apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(_,h){const g=(0,k.m9)(_);return yield _n(!1,g,h.providerId),Pt(g,h)})).apply(this,arguments)}function rr(_,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,f.Z)(function*(_,h){return Hs((0,k.m9)(_),h)})).apply(this,arguments)}function ja(_,h){return $s.apply(this,arguments)}function $s(){return($s=(0,f.Z)(function*(_,h){return B(_,"POST","/v1/accounts:signInWithCustomToken",Kt(_,h))})).apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(_,h){const g=zn(_),w=yield ja(g,{token:h,returnSecureToken:!0}),T=yield Ye._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class $a{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Ga._fromServerResponse(h,g):$t(h,"internal-error")}}class Ga extends $a{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Ga(g)}}function Uu(_,h,g){var w;Te((null===(w=g.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),Te(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Te(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(Te(g.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Zo(){return(Zo=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_),T={requestType:"PASSWORD_RESET",email:h};g&&Uu(w,T,g),yield Cg(w,T)})).apply(this,arguments)}function qa(){return(qa=(0,f.Z)(function*(_,h,g){yield Gh((0,k.m9)(_),{oobCode:h,newPassword:g})})).apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(_,h){yield wg((0,k.m9)(_),{oobCode:h})})).apply(this,arguments)}function Hu(_,h){return za.apply(this,arguments)}function za(){return(za=(0,f.Z)(function*(_,h){const g=(0,k.m9)(_),w=yield Gh(g,{oobCode:h}),T=w.requestType;switch(Te(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(w.mfaInfo,g,"internal-error");default:Te(w.email,g,"internal-error")}let R=null;return w.mfaInfo&&(R=$a._fromServerResponse(zn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Za(){return(Za=(0,f.Z)(function*(_,h){const{data:g}=yield Hu((0,k.m9)(_),h);return g.email})).apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(_,h,g){const w=zn(_),T=yield Fa(w,{returnSecureToken:!0,email:h,password:g}),R=yield Ye._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_),T={requestType:"EMAIL_SIGNIN",email:h};Te(g.handleCodeInApp,w,"argument-error"),g&&Uu(w,T,g),yield Mu(w,T)})).apply(this,arguments)}function Ya(){return(Ya=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_),T=vo.credentialWithLink(h,g||it());return Te(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Pl(w,T)})).apply(this,arguments)}function Zh(_,h){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:createAuthUri",Kt(_,h))})).apply(this,arguments)}function Yh(){return(Yh=(0,f.Z)(function*(_,h){const w={identifier:h,continueUri:ft()?it():"http://localhost"},{signinMethods:T}=yield Zh((0,k.m9)(_),w);return T||[]})).apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(_,h){const g=(0,k.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Uu(g.auth,T,h);const{email:R}=yield Eg(g.auth,T);R!==_.email&&(yield _.reload())})).apply(this,arguments)}function Qa(){return(Qa=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};g&&Uu(w.auth,R,g);const{email:j}=yield Sl(w.auth,R);j!==_.email&&(yield _.reload())})).apply(this,arguments)}function ld(_,h){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,f.Z)(function*(_,h){return mt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(_,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,k.m9)(_),R={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},j=yield dn(w,ld(w.auth,R));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const J=w.providerData.find(({providerId:Pe})=>"password"===Pe);J&&(J.displayName=w.displayName,J.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function Qh(_,h,g){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,f.Z)(function*(_,h,g){const{auth:w}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const j=yield dn(_,Wh(w,R));yield _._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Xa{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class Vl extends Xa{constructor(h,g,w,T){super(h,g,w),this.username=T}}class Ag extends Xa{constructor(h,g){super(h,"facebook.com",g)}}class cy extends Vl{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Wu extends Xa{constructor(h,g){super(h,"google.com",g)}}class dd extends Vl{constructor(h,g,w){super(h,"twitter.com",g,w)}}function wr(_){const{user:h,_tokenResponse:g}=_;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(_){var h,g;if(!_)return null;const{providerId:w}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const j=null===(g=null===(h=go(_.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Xa(R,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new Ag(R,T);case"github.com":return new cy(R,T);case"google.com":return new Wu(R,T);case"twitter.com":return new dd(R,T,_.screenName||null);case"custom":case"anonymous":return new Xa(R,null);default:return new Xa(R,w,T)}}(g)}class qs{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new qs("enroll",h)}static _fromMfaPendingCredential(h){return new qs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return qs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(w=h.multiFactorSession)||void 0===w?void 0:w.idToken)return qs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class tu{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=zn(h),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(J=>$a._fromServerResponse(w,J));Te(T.mfaPendingCredential,w,"internal-error");const j=qs._fromMfaPendingCredential(T.mfaPendingCredential);return new tu(j,R,function(){var J=(0,f.Z)(function*(Pe){const Me=yield Pe._process(w,j);delete T.mfaInfo,delete T.mfaPendingCredential;const Xe=Object.assign(Object.assign({},T),{idToken:Me.idToken,refreshToken:Me.refreshToken});switch(g.operationType){case"signIn":const et=yield Ye._fromIdTokenResponse(w,g.operationType,Xe);return yield w._updateCurrentUser(et.user),et;case"reauthenticate":return Te(g.user,w,"internal-error"),Ye._forOperation(g.user,g.operationType,Xe);default:$t(w,"internal-error")}});return function(Pe){return J.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function hd(_,h){return mt(_,"POST","/v2/accounts/mfaEnrollment:start",Kt(_,h))}class dr{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>$a._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new dr(h)}getSession(){var h=this;return(0,f.Z)(function*(){return qs._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var w=this;return(0,f.Z)(function*(){const T=h,R=yield w.getSession(),j=yield dn(w.user,T._process(w.user.auth,R,g));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const w="string"==typeof h?h:h.uid,T=yield g.user.getIdToken(),R=yield dn(g.user,function(_,h){return mt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(_,h))}(g.user.auth,{idToken:T,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==w),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const xn=new WeakMap,qi="__sak";class Jo{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(qi,"1"),this.storage.removeItem(qi),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const wi=(()=>{class _ extends Jo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,k.z$)();return yt(_)||us(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=$o(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),R=this.localCache[w];T!==R&&g(w,R,T)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((J,Pe,Me)=>{this.notifyListeners(J,Me)});const T=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(T);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!w)return}const R=()=>{const J=this.storage.getItem(T);!w&&this.localCache[T]===J||this.notifyListeners(T,J)},j=this.storage.getItem(T);(0,k.w1)()&&10===document.documentMode&&j!==g.newValue&&g.newValue!==g.oldValue?setTimeout(R,10):R()}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var T=()=>super._set,R=this;return(0,f.Z)(function*(){yield T().call(R,g,w),R.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,T=this;return(0,f.Z)(function*(){const R=yield w().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var w=()=>super._remove,T=this;return(0,f.Z)(function*(){yield w().call(T,g),delete T.localCache[g]})()}}return _.type="LOCAL",_})(),Qe=(()=>{class _ extends Jo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return _.type="SESSION",_})();let Er=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(R=>R.isListeningto(g));if(w)return w;const T=new _(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,f.Z)(function*(){const T=g,{eventId:R,eventType:j,data:J}=T.data,Pe=w.handlersMap[j];if(!(null==Pe?void 0:Pe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:j});const Me=Array.from(Pe).map(function(){var et=(0,f.Z)(function*(Mt){return Mt(T.origin,J)});return function(Mt){return et.apply(this,arguments)}}()),Xe=yield function(_){return Promise.all(_.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(Me);T.ports[0].postMessage({status:"done",eventId:R,eventType:j,response:Xe})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Do(_="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return _+g}class To{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var T=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let j,J;return new Promise((Pe,Me)=>{const Xe=Do("",20);R.port1.start();const et=setTimeout(()=>{Me(new Error("unsupported_event"))},w);J={messageChannel:R,onMessage(Mt){const Qn=Mt;if(Qn.data.eventId===Xe)switch(Qn.data.status){case"ack":clearTimeout(et),j=setTimeout(()=>{Me(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Pe(Qn.data.response);break;default:clearTimeout(et),clearTimeout(j),Me(new Error("invalid_response"))}}},T.handlers.add(J),R.port1.addEventListener("message",J.onMessage),T.target.postMessage({eventType:h,eventId:Xe,data:g},[R.port2])}).finally(()=>{J&&T.removeMessageHandler(J)})})()}}function At(){return window}function Or(){return void 0!==At().WorkerGlobalScope&&"function"==typeof At().importScripts}function fs(){return(fs=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const ru="firebaseLocalStorageDb",Ei="firebaseLocalStorage",pd="fbase_key";class Xo{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function fn(_,h){return _.transaction([Ei],h?"readwrite":"readonly").objectStore(Ei)}function Rg(){const _=indexedDB.open(ru,1);return new Promise((h,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Ei,{keyPath:pd})}catch(T){g(T)}}),_.addEventListener("success",(0,f.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Ei)?h(w):(w.close(),yield function(){const _=indexedDB.deleteDatabase(ru);return new Xo(_).toPromise()}(),h(yield Rg()))}))})}function Mg(_,h,g){return ef.apply(this,arguments)}function ef(){return(ef=(0,f.Z)(function*(_,h,g){const w=fn(_,!0).put({[pd]:h,value:g});return new Xo(w).toPromise()})).apply(this,arguments)}function Hl(){return(Hl=(0,f.Z)(function*(_,h){const g=fn(_,!1).get(h),w=yield new Xo(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function $l(_,h){const g=fn(_,!0).delete(h);return new Xo(g).toPromise()}const gs=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Rg()),g.db})()}_withRetries(g){var w=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const R=yield w._openDb();return yield g(R)}catch(R){if(T++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Or()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Er._getInstance(Or()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var w,T;if(g.activeServiceWorker=yield function(){return fs.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new To(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Rg();return yield Mg(g,qi,"1"),yield $l(g,qi),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(R=>Mg(R,g,w)),T.localCache[g]=w,T.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,f.Z)(function*(){const T=yield w._withRetries(R=>function(_,h){return Hl.apply(this,arguments)}(R,g));return w.localCache[g]=T,T})()}_remove(g){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(T=>$l(T,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const w=yield g._withRetries(j=>{const J=fn(j,!1).getAll();return new Xo(J).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:j,value:J}of w)R.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(J)&&(g.notifyListeners(j,J),T.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!R.has(j)&&(g.notifyListeners(j,null),T.push(j));return T})()}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Ao(_,h){return mt(_,"POST","/v2/accounts/mfaSignIn:start",Kt(_,h))}function Cr(){return(Cr=(0,f.Z)(function*(_){return(yield mt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Yu(_){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=h,w.onerror=T=>{const R=bn("internal-error");R.customData=T,g(R)},w.type="text/javascript",w.charset="UTF-8",function(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(w)})}function ta(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Qu=1e12;class md{constructor(h){this.auth=h,this.counter=Qu,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new Pg(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||Qu;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Qu))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var w;return null===(w=g._widgets.get(h||Qu))||void 0===w||w.execute(),""})()}}class Pg{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;Te(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}();const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ju=ta("rcb"),Fr=new qt(3e4,6e4);class ou{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!At().grecaptcha}load(h,g=""){return Te((_=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(At().grecaptcha):new Promise((w,T)=>{const R=At().setTimeout(()=>{T(bn(h,"network-request-failed"))},Fr.get());At()[Ju]=()=>{At().clearTimeout(R),delete At()[Ju];const J=At().grecaptcha;if(!J)return void T(bn(h,"internal-error"));const Pe=J.render;J.render=(Me,Xe)=>{const et=Pe(Me,Xe);return this.counter++,et},this.hostLanguage=g,w(J)},Yu(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Ju,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(bn(h,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!At().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wl{load(h){return(0,f.Z)(function*(){return new md(h)})()}clearedOneInstance(){}}const Xu="recaptcha",_d={theme:"light",type:"image"};class na{constructor(h,g=Object.assign({},_d),w){this.parameters=g,this.type=Xu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zn(w),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;Te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wl:new ou,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(R=>{const j=J=>{!J||(h.tokenChangeListeners.delete(j),R(J))};h.tokenChangeListeners.add(j),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=At()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){Te(ft()&&!Or(),h.auth,"internal-error"),yield function(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function(_){return Cr.apply(this,arguments)}(h.auth);Te(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ql{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=yo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Zi(){return(Zi=(0,f.Z)(function*(_,h,g){const w=zn(_),T=yield Ir(w,h,(0,k.m9)(g));return new ql(T,R=>Pl(w,R))})).apply(this,arguments)}function zs(){return(zs=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_);yield _n(!1,w,"phone");const T=yield Ir(w.auth,h,(0,k.m9)(g));return new ql(T,R=>Ba(w,R))})).apply(this,arguments)}function Zl(){return(Zl=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_),T=yield Ir(w.auth,h,(0,k.m9)(g));return new ql(T,R=>rr(w,R))})).apply(this,arguments)}function Ir(_,h,g){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(_,h,g){var w;const T=yield g.verify();try{let R;if(Te("string"==typeof T,_,"argument-error"),Te(g.type===Xu,_,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const j=R.session;if("phoneNumber"in R)return Te("enroll"===j.type,_,"internal-error"),(yield hd(_,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Te("signin"===j.type,_,"internal-error");const J=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return Te(J,_,"missing-multi-factor-info"),(yield Ao(_,{mfaPendingCredential:j.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield cs(_,{phoneNumber:R.phoneNumber,recaptchaToken:T});return j}}finally{g._reset()}})).apply(this,arguments)}function yd(){return(yd=(0,f.Z)(function*(_,h){yield Pt((0,k.m9)(_),h)})).apply(this,arguments)}let b=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=zn(g)}verifyPhoneNumber(g,w){return Ir(this.auth,g,(0,k.m9)(w))}static credential(g,w){return yo._fromVerification(g,w)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:T}=g;return w&&T?yo._fromTokenResponse(w,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function D(_,h){return h?Gt(h):(Te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class N extends Go{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Us(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Us(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Us(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function U(_){return Vu(_.auth,new N(_),_.bypassAuthState)}function Z(_){const{auth:h,user:g}=_;return Te(g,h,"internal-error"),Hs(g,new N(_),_.bypassAuthState)}function ne(_){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(_){const{auth:h,user:g}=_;return Te(g,h,"internal-error"),Pt(g,new N(_),_.bypassAuthState)})).apply(this,arguments)}class Ke{constructor(h,g,w,T,R=!1){this.auth=h,this.resolver=w,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(w,T){h.pendingPromise={resolve:w,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(w,T){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:R,tenantId:j,error:J,type:Pe}=h;if(J)return void g.reject(J);const Me={auth:g.auth,requestUri:w,sessionId:T,tenantId:j||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Pe)(Me))}catch(Xe){g.reject(Xe)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return U;case"linkViaPopup":case"linkViaRedirect":return ne;case"reauthViaPopup":case"reauthViaRedirect":return Z;default:$t(this.auth,"internal-error")}}resolve(h){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const We=new qt(2e3,1e4);function tn(){return(tn=(0,f.Z)(function*(_,h,g){const w=zn(_);fi(_,h,Mr);const T=D(w,g);return new ms(w,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function br(){return(br=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_);fi(w.auth,h,Mr);const T=D(w.auth,g);return new ms(w.auth,"reauthViaPopup",h,T,w).executeNotNull()})).apply(this,arguments)}function Dr(){return(Dr=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_);fi(w.auth,h,Mr);const T=D(w.auth,g);return new ms(w.auth,"linkViaPopup",h,T,w).executeNotNull()})).apply(this,arguments)}let ms=(()=>{class _ extends Ke{constructor(g,w,T,R,j){super(g,w,R,j),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const w=yield g.execute();return Te(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,f.Z)(function*(){Bn(1===g.filter.length,"Popup operations only handle one event");const w=Do();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(bn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,T;this.pollId=(null===(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,We.get())};g()}}return _.currentPopupAction=null,_})();const ni=new Map;class Ci extends Ke{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let w=ni.get(g.auth._key());if(!w){try{const R=(yield function(_,h){return _s.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(R)}catch(T){w=()=>Promise.reject(T)}ni.set(g.auth._key(),w)}return g.bypassAuthState||ni.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const T=yield w.auth._redirectUserForId(h.eventId);if(T)return w.user=T,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function _s(){return(_s=(0,f.Z)(function*(_,h){const g=ra(h),w=Fn(_);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(g));return yield w._remove(g),T})).apply(this,arguments)}function Kl(_,h){return vd.apply(this,arguments)}function vd(){return(vd=(0,f.Z)(function*(_,h){return Fn(_)._set(ra(h),"true")})).apply(this,arguments)}function Fn(_){return Gt(_._redirectPersistence)}function ra(_){return nr("pendingRedirect",_.config.apiKey,_.name)}function Zs(){return(Zs=(0,f.Z)(function*(_,h,g){const w=zn(_);fi(_,h,Mr);const T=D(w,g);return yield Kl(T,w),T._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function Ed(){return(Ed=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_);fi(w.auth,h,Mr);const T=D(w.auth,g);yield Kl(T,w.auth);const R=yield of(w);return T._openRedirect(w.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(_,h,g){const w=(0,k.m9)(_);fi(w.auth,h,Mr);const T=D(w.auth,g);yield _n(!1,w,h.providerId),yield Kl(T,w.auth);const R=yield of(w);return T._openRedirect(w.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(_,h){return yield zn(_)._initializationPromise,Cd(_,h,!1)})).apply(this,arguments)}function Cd(_,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,f.Z)(function*(_,h,g=!1){const w=zn(_),T=D(w,h),j=yield new Ci(w,T,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,h)),j})).apply(this,arguments)}function of(_){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(_){const h=Do(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class af{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lf(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!lf(h)){const T=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(bn(this.auth,T))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uf(h))}saveEventToCache(h){this.cachedEventUids.add(uf(h)),this.lastProcessedEventTime=Date.now()}}function uf(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function lf({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Vg(_){return cf.apply(this,arguments)}function cf(){return(cf=(0,f.Z)(function*(_,h={}){return mt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const Ug=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bg=/^https?/;function Ys(){return(Ys=(0,f.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Vg(_);for(const g of h)try{if(Yl(g))return}catch(w){}$t(_,"unauthorized-domain")})).apply(this,arguments)}function Yl(_){const h=it(),{protocol:g,hostname:w}=new URL(h);if(_.startsWith("chrome-extension://")){const j=new URL(_);return""===j.hostname&&""===w?"chrome-extension:"===g&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===w}if(!Bg.test(g))return!1;if(Ug.test(_))return w===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const py=new qt(3e4,6e4);function jg(){const _=At().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let df=null;function Ql(_){return df=df||function(_){return new Promise((h,g)=>{var w,T,R;function j(){jg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{jg(),g(bn(_,"network-request-failed"))},timeout:py.get()})}if(null===(T=null===(w=At().gapi)||void 0===w?void 0:w.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=At().gapi)||void 0===R?void 0:R.load)){const J=ta("iframefcb");return At()[J]=()=>{gapi.load?j():g(bn(_,"network-request-failed"))},Yu(`https://apis.google.com/js/api.js?onload=${J}`).catch(Pe=>g(Pe))}j()}}).catch(h=>{throw df=null,h})}(_),df}const gy=new qt(5e3,15e3),_y={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qs(_){const h=_.config;Te(h.authDomain,_,"auth-domain-config-required");const g=h.emulator?ze(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:_.name,v:ue.SDK_VERSION},T=yy.get(_.config.apiHost);T&&(w.eid=T);const R=_._getFrameworks();return R.length&&(w.fw=R.join(",")),`${g}?${(0,k.xO)(w).slice(1)}`}function Dd(){return Dd=(0,f.Z)(function*(_){const h=yield Ql(_),g=At().gapi;return Te(g,_,"internal-error"),h.open({where:document.body,url:Qs(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_y,dontclear:!0},w=>new Promise(function(){var T=(0,f.Z)(function*(R,j){yield w.restyle({setHideOnLeave:!1});const J=bn(_,"network-request-failed"),Pe=At().setTimeout(()=>{j(J)},gy.get());function Me(){At().clearTimeout(Pe),R(w)}w.ping(Me).then(Me,()=>{j(J)})});return function(R,j){return T.apply(this,arguments)}}()))}),Dd.apply(this,arguments)}const Jl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hf{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Xl(_,h,g,w,T,R){Te(_.config.authDomain,_,"auth-domain-config-required"),Te(_.config.apiKey,_,"invalid-api-key");const j={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:w,v:ue.SDK_VERSION,eventId:T};if(h instanceof Mr){h.setDefaultLanguage(_.languageCode),j.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(j.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Pe,Me]of Object.entries(R||{}))j[Pe]=Me}if(h instanceof yi){const Pe=h.getScopes().filter(Me=>""!==Me);Pe.length>0&&(j.scopes=Pe.join(","))}_.tenantId&&(j.tid=_.tenantId);const J=j;for(const Pe of Object.keys(J))void 0===J[Pe]&&delete J[Pe];return`${function({config:_}){return _.emulator?ze(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,k.xO)(J).slice(1)}`}const rl="webStorageSupport";class lu extends class{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return tr("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new lu(h)}_finalizeEnroll(h,g,w){return function(_,h){return mt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(_,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function(_,h){return mt(_,"POST","/v2/accounts/mfaSignIn:finalize",Kt(_,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Iy=(()=>{class _{constructor(){}static assertion(g){return lu._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var _,sa="@firebase/auth";class gf{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var T;h((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vs(){return window}function mf(){return mf=(0,f.Z)(function*(_,h,g){var w;const{BuildInfo:T}=vs();Bn(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Ty(h.sessionId),j={};return us()?j.ibi=T.packageName:_o()?j.apn=T.packageName:$t(_,"operation-not-supported-in-this-environment"),T.displayName&&(j.appDisplayName=T.displayName),j.sessionId=R,Xl(_,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,j)}),mf.apply(this,arguments)}function cu(){return cu=(0,f.Z)(function*(_){const{BuildInfo:h}=vs(),g={};us()?g.iosBundleId=h.packageName:_o()?g.androidPackageName=h.packageName:$t(_,"operation-not-supported-in-this-environment"),yield Vg(_,g)}),cu.apply(this,arguments)}function _f(){return _f=(0,f.Z)(function*(_,h,g){const{cordova:w}=vs();let T=()=>{};try{yield new Promise((R,j)=>{let J=null;function Pe(){var et;R();const Mt=null===(et=w.plugins.browsertab)||void 0===et?void 0:et.close;"function"==typeof Mt&&Mt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Me(){J||(J=window.setTimeout(()=>{j(bn(_,"redirect-cancelled-by-user"))},2e3))}function Xe(){"visible"===(null==document?void 0:document.visibilityState)&&Me()}h.addPassiveListener(Pe),document.addEventListener("resume",Me,!1),_o()&&document.addEventListener("visibilitychange",Xe,!1),T=()=>{h.removePassiveListener(Pe),document.removeEventListener("resume",Me,!1),document.removeEventListener("visibilitychange",Xe,!1),J&&window.clearTimeout(J)}})}finally{T()}}),_f.apply(this,arguments)}function Ty(_){return rc.apply(this,arguments)}function rc(){return rc=(0,f.Z)(function*(_){const h=_E(_),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")}),rc.apply(this,arguments)}function _E(_){if(Bn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),g=new Uint8Array(h);for(let w=0;w<_.length;w++)g[w]=_.charCodeAt(w);return g}_="Browser",(0,ue._registerComponent)(new de.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),{apiKey:T,authDomain:R}=w.options;return(j=>{Te(T&&!T.includes(":"),"invalid-api-key",{appName:j.name}),Te(!(null==R?void 0:R.includes(":")),"argument-error",{appName:j.name});const J={apiKey:T,authDomain:R,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ji(_)},Pe=new Hi(j,J);return function(_,h){const g=(null==h?void 0:h.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Gt);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(w,null==h?void 0:h.popupRedirectResolver)}(Pe,g),Pe})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new de.wA("auth-internal",h=>{const g=zn(h.getProvider("auth").getImmediate());return new gf(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(sa,"0.19.4",void 0),(0,ue.registerVersion)(sa,"0.19.4","esm2017");class zr extends af{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Sd(_){return Kn.apply(this,arguments)}function Kn(){return Kn=(0,f.Z)(function*(_){const h=yield oa()._get(xd(_));return h&&(yield oa()._remove(xd(_))),h}),Kn.apply(this,arguments)}function ws(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*h.length);_.push(h.charAt(w))}return _.join("")}function oa(){return Gt(wi)}function xd(_){return nr("authEvent",_.config.apiKey,_.name)}function Js(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...g]=_.split("?");return(0,k.zd)(g.join("?"))}function wf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:bn("no-auth-event")}}function bf(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function Kg(_=(0,k.z$)()){return!("file:"!==bf()&&"ionic:"!==bf()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pd(){try{const _=self.localStorage,h=Do();if(_)return _.setItem(h,"1"),_.removeItem(h),!function(_=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,k.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,k.hl)()}catch(_){return Od()&&(0,k.hl)()}return!1}function Od(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function kd(){return("http:"===bf()||"https:"===bf()||(0,k.ru)()||Kg())&&!((0,k.b$)()||(0,k.UG)())&&Pd()&&!Od()}function Df(){return Kg()&&"undefined"!=typeof document}function Af(){return Af=(0,f.Z)(function*(){return!!Df()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})}),Af.apply(this,arguments)}const Ii={LOCAL:"local",NONE:"none",SESSION:"session"},ac=Te,Fd="persistence";function Sf(_){return uc.apply(this,arguments)}function uc(){return uc=(0,f.Z)(function*(_){yield _._initializationPromise;const h=Yi(),g=nr(Fd,_.config.apiKey,_.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(g,_._getPersistence())}),uc.apply(this,arguments)}function Yi(){return"undefined"!=typeof window?window:null}const xy=Te;class fu{constructor(){this.browserResolver=Gt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qe,this._completeRedirectFn=Cd}_openPopup(h,g,w,T){var R=this;return(0,f.Z)(function*(){var j;Bn(null===(j=R.eventManagers[h._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const J=Xl(h,g,w,it(),T);return function(_,h,g,w=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let J="";const Pe=Object.assign(Object.assign({},Jl),{width:w.toString(),height:T.toString(),top:R,left:j}),Me=(0,k.z$)().toLowerCase();g&&(J=Ra(Me)?"_blank":g),Ho(Me)&&(h=h||"http://localhost",Pe.scrollbars="yes");const Xe=Object.entries(Pe).reduce((Mt,[Qn,to])=>`${Mt}${Qn}=${to},`,"");if(function(_=(0,k.z$)()){var h;return us(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Me)&&"_self"!==J)return function(_,h){const g=document.createElement("a");g.href=_,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",J),new hf(null);const et=window.open(h||"",J,Xe);Te(et,_,"popup-blocked");try{et.focus()}catch(Mt){}return new hf(et)}(h,J,Do())})()}_openRedirect(h,g,w,T){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),_=Xl(h,g,w,it(),T),At().location.href=_,new Promise(()=>{});var _})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(Bn(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const w=yield function(_){return Dd.apply(this,arguments)}(h),T=new af(h);return w.register("authEvent",R=>(Te(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:T},g.iframes[h._key()]=w,T})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(rl,{type:rl},T=>{var R;const j=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[rl];void 0!==j&&g(!!j),$t(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return Ys.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return $o()||yt()||us()}}),this.cordovaResolver=Gt(class{constructor(){this._redirectPersistence=Qe,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cd}_initialize(h){var g=this;return(0,f.Z)(function*(){const w=h._key();let T=g.eventManagers.get(w);return T||(T=new zr(h),g.eventManagers.set(w,T),g.attachCallbackListeners(h,T)),T})()}_openPopup(h){$t(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,T){var R=this;return(0,f.Z)(function*(){!function(_){var h,g,w,T,R,j,J,Pe,Me,Xe;const et=vs();Te("function"==typeof(null===(h=null==et?void 0:et.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(g=null==et?void 0:et.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(R=null===(T=null===(w=null==et?void 0:et.cordova)||void 0===w?void 0:w.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Pe=null===(J=null===(j=null==et?void 0:et.cordova)||void 0===j?void 0:j.plugins)||void 0===J?void 0:J.browsertab)||void 0===Pe?void 0:Pe.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Xe=null===(Me=null==et?void 0:et.cordova)||void 0===Me?void 0:Me.InAppBrowser)||void 0===Xe?void 0:Xe.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const j=yield R._initialize(h);yield j.initialized(),j.resetRedirect(),ni.clear(),yield R._originValidation(h);const J=function(_,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:ws(),postBody:null,tenantId:_.tenantId,error:bn(_,"no-auth-event")}}(h,w,T);yield function(_,h){return oa()._set(xd(_),h)}(h,J);const Pe=yield function(_,h,g){return mf.apply(this,arguments)}(h,J,g),Me=yield function(_){const{cordova:h}=vs();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let T=null;w?h.plugins.browsertab.openUrl(_):T=h.InAppBrowser.open(_,function(_=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(T)})})}(Pe);return function(_,h,g){return _f.apply(this,arguments)}(h,j,Me)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return cu.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:T,BuildInfo:R}=vs(),j=setTimeout((0,f.Z)(function*(){yield Sd(h),g.onEvent(wf())}),500),J=function(){var Xe=(0,f.Z)(function*(et){clearTimeout(j);const Mt=yield Sd(h);let Qn=null;Mt&&(null==et?void 0:et.url)&&(Qn=function(_,h){var g,w;const T=function(_){const h=Js(_),g=h.link?decodeURIComponent(h.link):void 0,w=Js(g).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Js(T).link||T||w||g||_}(h);if(T.includes("/__/auth/callback")){const R=Js(T),j=R.firebaseError?function(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,J=null===(w=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Pe=J?bn(J):null;return Pe?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Mt,et.url)),g.onEvent(Qn||wf())});return function(Mt){return Xe.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,J);const Pe=T,Me=`${R.packageName.toLowerCase()}://`;vs().handleOpenURL=function(){var Xe=(0,f.Z)(function*(et){if(et.toLowerCase().startsWith(Me)&&J({url:et}),"function"==typeof Pe)try{Pe(et)}catch(Mt){console.error(Mt)}});return function(et){return Xe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qe,this._completeRedirectFn=Cd}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,w,T)})()}_openRedirect(h,g,w,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,w,T)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Df()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function(){return Af.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function xf(_){return _.unwrap()}function Qi(_){return Vd(_)}function Vd(_){const{_tokenResponse:h}=_ instanceof k.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return b.credentialFromResult(_);const g=h.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=wo;break;case"facebook.com":w=Ou;break;case"github.com":w=Eo;break;case"twitter.com":w=Nr;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:j,pendingToken:J,nonce:Pe}=h;return R||j||T||J?J?g.startsWith("saml.")?ds._create(g,J):lr._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:T,accessToken:R}):new Pn(g).credential({idToken:T,accessToken:R,rawNonce:Pe}):null}return _ instanceof k.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function Yn(_,h){return h.catch(g=>{throw g instanceof k.ZR&&function(_,h){var g;const w=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Yg(_,function(_,h){var g;const w=(0,k.m9)(_),T=h;return Te(h.customData.operationType,w,"argument-error"),Te(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),tu._fromError(w,T)}(_,h));else if(w){const T=Vd(h),R=h;T&&(R.credential=T,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(_,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Qi(g),additionalUserInfo:wr(g),user:eo.getOrCreate(T)}})}function Ud(_,h){return pu.apply(this,arguments)}function pu(){return pu=(0,f.Z)(function*(_,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>Yn(_,g.confirm(w))}}),pu.apply(this,arguments)}class Yg{constructor(h,g){this.resolver=g,this.auth=function(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Yn(xf(this.auth),this.resolver.resolveSignIn(h))}}class eo{constructor(h){this._delegate=h,this.multiFactor=function(_){const h=(0,k.m9)(_);return xn.has(h)||xn.set(h,dr._fromUser(h)),xn.get(h)}(h)}static getOrCreate(h){return eo.USER_MAP.has(h)||eo.USER_MAP.set(h,new eo(h)),eo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return Yn(g.auth,Ba(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,f.Z)(function*(){return Ud(w.auth,function(_,h,g){return zs.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return Yn(g.auth,function(_,h,g){return Dr.apply(this,arguments)}(g._delegate,h,fu))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Sf(zn(g.auth)),function(_,h,g){return function(_,h,g){return nl.apply(this,arguments)}(_,h,g)}(g._delegate,h,fu)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return Yn(g.auth,rr(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Ud(this.auth,function(_,h,g){return Zl.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return Yn(this.auth,function(_,h,g){return br.apply(this,arguments)}(this._delegate,h,fu))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Sf(zn(g.auth)),function(_,h,g){return function(_,h,g){return Ed.apply(this,arguments)}(_,h,g)}(g._delegate,h,fu)})()}sendEmailVerification(h){return function(_,h){return Ws.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function(_,h){return be.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function(_,h){return Qh((0,k.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function(_,h){return Qh((0,k.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(_,h){return yd.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(_,h){return pn.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function(_,h,g){return Qa.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}eo.USER_MAP=new WeakMap;const Es=Te;let aa=(()=>{class _{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Es(T,"invalid-api-key",{appName:g.name});let R=[mn];if("undefined"!=typeof window){R=function(_,h){const g=Yi();if(!(null==g?void 0:g.sessionStorage))return[];const w=nr(Fd,_,h);switch(g.sessionStorage.getItem(w)){case Ii.NONE:return[mn];case Ii.LOCAL:return[gs,Qe];case Ii.SESSION:return[Qe];default:return[]}}(T,g.name);for(const J of[gs,wi,Qe])R.includes(J)||R.push(J)}Es(T,"invalid-api-key",{appName:g.name});const j="undefined"!=typeof window?fu:void 0;this._delegate=w.initialize({options:{persistence:R,popupRedirectResolver:j}}),this._delegate._updateErrorMap(_r),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(_,h,g){const w=zn(_);Te(w._canInitEmulator,w,"emulator-config-failed"),Te(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=ei(h),{host:j,port:J}=function(_){const h=ei(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const R=T[1];return{host:R,port:vg(w.substr(R.length+1))}}{const[R,j]=w.split(":");return{host:R,port:vg(j)}}}(h);w.config.emulator={url:`${R}//${j}${null===J?"":`:${J}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:J,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function _(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,w)}applyActionCode(g){return function(_,h){return ju.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Hu(this._delegate,g)}confirmPasswordReset(g,w){return function(_,h,g){return qa.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var T=this;return(0,f.Z)(function*(){return Yn(T._delegate,function(_,h,g){return Ka.apply(this,arguments)}(T._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(_,h){return Yh.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(_,h){const g=Bs.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Es(kd(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(_,h){return Zn.apply(this,arguments)}(g._delegate,fu);return w?Yn(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(_,h){zn(_)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,T){const{next:R,error:j,complete:J}=Rf(g,w,T);return this._delegate.onAuthStateChanged(R,j,J)}onIdTokenChanged(g,w,T){const{next:R,error:j,complete:J}=Rf(g,w,T);return this._delegate.onIdTokenChanged(R,j,J)}sendSignInLinkToEmail(g,w){return function(_,h,g){return hn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(_,h,g){return Zo.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,f.Z)(function*(){let T;switch(function(_,h){ac(Object.values(Ii).includes(h),_,"invalid-persistence-type"),(0,k.b$)()?ac(h!==Ii.SESSION,_,"unsupported-persistence-type"):(0,k.UG)()?ac(h===Ii.NONE,_,"unsupported-persistence-type"):Od()?ac(h===Ii.NONE||h===Ii.LOCAL&&(0,k.hl)(),_,"unsupported-persistence-type"):ac(h===Ii.NONE||Pd(),_,"unsupported-persistence-type")}(w._delegate,g),g){case Ii.SESSION:T=Qe;break;case Ii.LOCAL:T=(yield Gt(gs)._isAvailable())?gs:wi;break;case Ii.NONE:T=mn;break;default:return $t("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Yn(this._delegate,function(_){return zo.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Yn(this._delegate,Pl(this._delegate,g))}signInWithCustomToken(g){return Yn(this._delegate,function(_,h){return Ha.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Yn(this._delegate,function(_,h,g){return Pl((0,k.m9)(_),vo.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Yn(this._delegate,function(_,h,g){return Ya.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Ud(this._delegate,function(_,h,g){return Zi.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,f.Z)(function*(){return Es(kd(),w._delegate,"operation-not-supported-in-this-environment"),Yn(w._delegate,function(_,h,g){return tn.apply(this,arguments)}(w._delegate,g,fu))})()}signInWithRedirect(g){var w=this;return(0,f.Z)(function*(){return Es(kd(),w._delegate,"operation-not-supported-in-this-environment"),yield Sf(w._delegate),function(_,h,g){return function(_,h,g){return Zs.apply(this,arguments)}(_,h,g)}(w._delegate,g,fu)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(_,h){return Za.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Ii,_})();function Rf(_,h,g){let w=_;"function"!=typeof _&&({next:w,error:h,complete:g}=_);const T=w;return{next:j=>T(j&&eo.getOrCreate(j)),error:h,complete:g}}class sl{constructor(){this.providerId="phone",this._delegate=new b(xf(Q.Z.auth()))}static credential(h,g){return b.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}sl.PHONE_SIGN_IN_METHOD=b.PHONE_SIGN_IN_METHOD,sl.PROVIDER_ID=b.PROVIDER_ID;const ua=Te;class Mf{constructor(h,g,w=Q.Z.app()){var T;ua(null===(T=w.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new na(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new de.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new aa(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:vo,FacebookAuthProvider:Ou,GithubAuthProvider:Eo,GoogleAuthProvider:wo,OAuthProvider:Pn,SAMLAuthProvider:Co,PhoneAuthProvider:sl,PhoneMultiFactorGenerator:Iy,RecaptchaVerifier:Mf,TwitterAuthProvider:Nr,Auth:aa,AuthCredential:Go,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.4")}(Q.Z)},2940:function(nt,Ee){!function(F){"use strict";function f(oe){return Array.prototype.slice.call(oe)}function Q(oe){return new Promise(function(K,ae){oe.onsuccess=function(){K(oe.result)},oe.onerror=function(){ae(oe.error)}})}function k(oe,K,ae){var Ce,ge=new Promise(function($e,xe){Q(Ce=oe[K].apply(oe,ae)).then($e,xe)});return ge.request=Ce,ge}function ue(oe,K,ae){var Ce=k(oe,K,ae);return Ce.then(function(ge){if(ge)return new $(ge,Ce.request)})}function re(oe,K,ae){ae.forEach(function(Ce){Object.defineProperty(oe.prototype,Ce,{get:function(){return this[K][Ce]},set:function(ge){this[K][Ce]=ge}})})}function fe(oe,K,ae,Ce){Ce.forEach(function(ge){ge in ae.prototype&&(oe.prototype[ge]=function(){return k(this[K],ge,arguments)})})}function ie(oe,K,ae,Ce){Ce.forEach(function(ge){ge in ae.prototype&&(oe.prototype[ge]=function(){return this[K][ge].apply(this[K],arguments)})})}function se(oe,K,ae,Ce){Ce.forEach(function(ge){ge in ae.prototype&&(oe.prototype[ge]=function(){return ue(this[K],ge,arguments)})})}function le(oe){this._index=oe}function $(oe,K){this._cursor=oe,this._request=K}function H(oe){this._store=oe}function X(oe){this._tx=oe,this.complete=new Promise(function(K,ae){oe.oncomplete=function(){K()},oe.onerror=function(){ae(oe.error)},oe.onabort=function(){ae(oe.error)}})}function Ve(oe,K,ae){this._db=oe,this.oldVersion=K,this.transaction=new X(ae)}function Ie(oe){this._db=oe}re(le,"_index",["name","keyPath","multiEntry","unique"]),fe(le,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),se(le,"_index",IDBIndex,["openCursor","openKeyCursor"]),re($,"_cursor",["direction","key","primaryKey","value"]),fe($,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(oe){oe in IDBCursor.prototype&&($.prototype[oe]=function(){var K=this,ae=arguments;return Promise.resolve().then(function(){return K._cursor[oe].apply(K._cursor,ae),Q(K._request).then(function(Ce){if(Ce)return new $(Ce,K._request)})})})}),H.prototype.createIndex=function(){return new le(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new le(this._store.index.apply(this._store,arguments))},re(H,"_store",["name","keyPath","indexNames","autoIncrement"]),fe(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),se(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ie(H,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},re(X,"_tx",["objectStoreNames","mode"]),ie(X,"_tx",IDBTransaction,["abort"]),Ve.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},re(Ve,"_db",["name","version","objectStoreNames"]),ie(Ve,"_db",IDBDatabase,["deleteObjectStore","close"]),Ie.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},re(Ie,"_db",["name","version","objectStoreNames"]),ie(Ie,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(oe){[H,le].forEach(function(K){oe in K.prototype&&(K.prototype[oe.replace("open","iterate")]=function(){var ae=f(arguments),Ce=ae[ae.length-1],ge=this._store||this._index,$e=ge[oe].apply(ge,ae.slice(0,-1));$e.onsuccess=function(){Ce($e.result)}})})}),[le,H].forEach(function(oe){oe.prototype.getAll||(oe.prototype.getAll=function(K,ae){var Ce=this,ge=[];return new Promise(function($e){Ce.iterateCursor(K,function(xe){xe?(ge.push(xe.value),void 0===ae||ge.length!=ae?xe.continue():$e(ge)):$e(ge)})})})}),F.openDb=function(oe,K,ae){var Ce=k(indexedDB,"open",[oe,K]),ge=Ce.request;return ge&&(ge.onupgradeneeded=function($e){ae&&ae(new Ve(ge.result,$e.oldVersion,ge.transaction))}),Ce.then(function($e){return new Ie($e)})},F.deleteDb=function(oe){return k(indexedDB,"deleteDatabase",[oe])},Object.defineProperty(F,"__esModule",{value:!0})}(Ee)},8306:(nt,Ee,F)=>{"use strict";F.d(Ee,{y:()=>$});var f=F(930),Q=F(727),k=F(8822),ue=F(4671);var ie=F(2416),se=F(576),le=F(2806);let $=(()=>{class Ie{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const oe=new Ie;return oe.source=this,oe.operator=Le,oe}subscribe(Le,oe,K){const ae=function(Ie){return Ie&&Ie instanceof f.Lv||function(Ie){return Ie&&(0,se.m)(Ie.next)&&(0,se.m)(Ie.error)&&(0,se.m)(Ie.complete)}(Ie)&&(0,Q.Nn)(Ie)}(Le)?Le:new f.Hp(Le,oe,K);return(0,le.x)(()=>{const{operator:Ce,source:ge}=this;ae.add(Ce?Ce.call(ae,ge):ge?this._subscribe(ae):this._trySubscribe(ae))}),ae}_trySubscribe(Le){try{return this._subscribe(Le)}catch(oe){Le.error(oe)}}forEach(Le,oe){return new(oe=H(oe))((K,ae)=>{let Ce;Ce=this.subscribe(ge=>{try{Le(ge)}catch($e){ae($e),null==Ce||Ce.unsubscribe()}},ae,K)})}_subscribe(Le){var oe;return null===(oe=this.source)||void 0===oe?void 0:oe.subscribe(Le)}[k.L](){return this}pipe(...Le){return function(Ie){return 0===Ie.length?ue.y:1===Ie.length?Ie[0]:function(Le){return Ie.reduce((oe,K)=>K(oe),Le)}}(Le)(this)}toPromise(Le){return new(Le=H(Le))((oe,K)=>{let ae;this.subscribe(Ce=>ae=Ce,Ce=>K(Ce),()=>oe(ae))})}}return Ie.create=Ue=>new Ie(Ue),Ie})();function H(Ie){var Ue;return null!==(Ue=null!=Ie?Ie:ie.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(nt,Ee,F)=>{"use strict";F.d(Ee,{x:()=>ie});var f=F(8306),Q=F(727);const ue=(0,F(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=F(8737),fe=F(2806);let ie=(()=>{class le extends f.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const X=new se(this,this);return X.operator=H,X}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const Ve of X)Ve.next(H)}})}error(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:X}=this;for(;X.length;)X.shift().error(H)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:X,isStopped:Ve,observers:Ie}=this;return X||Ve?Q.Lc:(Ie.push(H),new Q.w0(()=>(0,re.P)(Ie,H)))}_checkFinalizedStatuses(H){const{hasError:X,thrownError:Ve,isStopped:Ie}=this;X?H.error(Ve):Ie&&H.complete()}asObservable(){const H=new f.y;return H.source=this,H}}return le.create=($,H)=>new se($,H),le})();class se extends ie{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===X||X.call(H,$)}error($){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===X||X.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,X;return null!==(X=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==X?X:Q.Lc}}},930:(nt,Ee,F)=>{"use strict";F.d(Ee,{Hp:()=>Ve,Lv:()=>X});var f=F(576),Q=F(727),k=F(2416),ue=F(7849),re=F(5032);const fe=le("C",void 0,void 0);function le(K,ae,Ce){return{kind:K,value:ae,error:Ce}}var $=F(3410),H=F(2806);class X extends Q.w0{constructor(ae){super(),this.isStopped=!1,ae?(this.destination=ae,(0,Q.Nn)(ae)&&ae.add(this)):this.destination=oe}static create(ae,Ce,ge){return new Ve(ae,Ce,ge)}next(ae){this.isStopped?Le(le("N",ae,void 0),this):this._next(ae)}error(ae){this.isStopped?Le(le("E",void 0,ae),this):(this.isStopped=!0,this._error(ae))}complete(){this.isStopped?Le(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ae){this.destination.next(ae)}_error(ae){try{this.destination.error(ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ve extends X{constructor(ae,Ce,ge){let $e;if(super(),(0,f.m)(ae))$e=ae;else if(ae){let xe;({next:$e,error:Ce,complete:ge}=ae),this&&k.v.useDeprecatedNextContext?(xe=Object.create(ae),xe.unsubscribe=()=>this.unsubscribe()):xe=ae,$e=null==$e?void 0:$e.bind(xe),Ce=null==Ce?void 0:Ce.bind(xe),ge=null==ge?void 0:ge.bind(xe)}this.destination={next:$e?Ie($e):re.Z,error:Ie(null!=Ce?Ce:Ue),complete:ge?Ie(ge):re.Z}}}function Ie(K,ae){return(...Ce)=>{try{K(...Ce)}catch(ge){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(ge):(0,ue.h)(ge)}}}function Ue(K){throw K}function Le(K,ae){const{onStoppedNotification:Ce}=k.v;Ce&&$.z.setTimeout(()=>Ce(K,ae))}const oe={closed:!0,next:re.Z,error:Ue,complete:re.Z}},727:(nt,Ee,F)=>{"use strict";F.d(Ee,{Lc:()=>fe,w0:()=>re,Nn:()=>ie});var f=F(576);const k=(0,F(3888).d)(le=>function(H){le(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((X,Ve)=>`${Ve+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=F(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ie of H)Ie.remove(this);else H.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(Ie){$=Ie instanceof k?Ie.errors:[Ie]}const{_teardowns:Ve}=this;if(Ve){this._teardowns=null;for(const Ie of Ve)try{se(Ie)}catch(Ue){$=null!=$?$:[],Ue instanceof k?$=[...$,...Ue.errors]:$.push(Ue)}}if($)throw new k($)}}add($){var H;if($&&$!==this)if(this.closed)se($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(H=this._teardowns)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,$)}remove($){const{_teardowns:H}=this;H&&(0,ue.P)(H,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const le=new re;return le.closed=!0,le})();const fe=re.EMPTY;function ie(le){return le instanceof re||le&&"closed"in le&&(0,f.m)(le.remove)&&(0,f.m)(le.add)&&(0,f.m)(le.unsubscribe)}function se(le){(0,f.m)(le)?le():le.unsubscribe()}},2416:(nt,Ee,F)=>{"use strict";F.d(Ee,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ee,F)=>{"use strict";F.d(Ee,{E:()=>Q});const Q=new(F(8306).y)(re=>re.complete())},8996:(nt,Ee,F)=>{"use strict";F.d(Ee,{D:()=>$e});var f=F(8421),Q=F(5363),k=F(9468),fe=F(8306),se=F(2202),le=F(576),$=F(9672);function X(xe,He){if(!xe)throw new Error("Iterable cannot be null");return new fe.y(qe=>{(0,$.f)(qe,He,()=>{const ut=xe[Symbol.asyncIterator]();(0,$.f)(qe,He,()=>{ut.next().then(ee=>{ee.done?qe.complete():qe.next(ee.value)})},0,!0)})})}var Ve=F(3670),Ie=F(8239),Ue=F(1144),Le=F(6495),oe=F(2206),K=F(4532),ae=F(3260);function $e(xe,He){return He?function(xe,He){if(null!=xe){if((0,Ve.c)(xe))return function(xe,He){return(0,f.Xf)(xe).pipe((0,k.R)(He),(0,Q.Q)(He))}(xe,He);if((0,Ue.z)(xe))return function(xe,He){return new fe.y(qe=>{let ut=0;return He.schedule(function(){ut===xe.length?qe.complete():(qe.next(xe[ut++]),qe.closed||this.schedule())})})}(xe,He);if((0,Ie.t)(xe))return function(xe,He){return(0,f.Xf)(xe).pipe((0,k.R)(He),(0,Q.Q)(He))}(xe,He);if((0,oe.D)(xe))return X(xe,He);if((0,Le.T)(xe))return function(xe,He){return new fe.y(qe=>{let ut;return(0,$.f)(qe,He,()=>{ut=xe[se.h](),(0,$.f)(qe,He,()=>{let ee,ce;try{({value:ee,done:ce}=ut.next())}catch(_e){return void qe.error(_e)}ce?qe.complete():qe.next(ee)},0,!0)}),()=>(0,le.m)(null==ut?void 0:ut.return)&&ut.return()})}(xe,He);if((0,ae.L)(xe))return function(xe,He){return X((0,ae.Q)(xe),He)}(xe,He)}throw(0,K.z)(xe)}(xe,He):(0,f.Xf)(xe)}},8421:(nt,Ee,F)=>{"use strict";F.d(Ee,{Xf:()=>Ve});var f=F(5987),Q=F(1144),k=F(8239),ue=F(8306),re=F(3670),fe=F(2206),ie=F(4532),se=F(6495),le=F(3260),$=F(576),H=F(7849),X=F(8822);function Ve(ge){if(ge instanceof ue.y)return ge;if(null!=ge){if((0,re.c)(ge))return function(ge){return new ue.y($e=>{const xe=ge[X.L]();if((0,$.m)(xe.subscribe))return xe.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,Q.z)(ge))return function(ge){return new ue.y($e=>{for(let xe=0;xe<ge.length&&!$e.closed;xe++)$e.next(ge[xe]);$e.complete()})}(ge);if((0,k.t)(ge))return function(ge){return new ue.y($e=>{ge.then(xe=>{$e.closed||($e.next(xe),$e.complete())},xe=>$e.error(xe)).then(null,H.h)})}(ge);if((0,fe.D)(ge))return K(ge);if((0,se.T)(ge))return function(ge){return new ue.y($e=>{for(const xe of ge)if($e.next(xe),$e.closed)return;$e.complete()})}(ge);if((0,le.L)(ge))return function(ge){return K((0,le.Q)(ge))}(ge)}throw(0,ie.z)(ge)}function K(ge){return new ue.y($e=>{(function(ge,$e){var xe,He,qe,ut;return(0,f.mG)(this,void 0,void 0,function*(){try{for(xe=(0,f.KL)(ge);!(He=yield xe.next()).done;)if($e.next(He.value),$e.closed)return}catch(ee){qe={error:ee}}finally{try{He&&!He.done&&(ut=xe.return)&&(yield ut.call(xe))}finally{if(qe)throw qe.error}}$e.complete()})})(ge,$e).catch(xe=>$e.error(xe))})}},6451:(nt,Ee,F)=>{"use strict";F.d(Ee,{T:()=>fe});var f=F(8189),Q=F(8421),k=F(515),ue=F(7669),re=F(8996);function fe(...ie){const se=(0,ue.yG)(ie),le=(0,ue._6)(ie,1/0),$=ie;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,f.J)(le)((0,re.D)($,se)):k.E}},5403:(nt,Ee,F)=>{"use strict";F.d(Ee,{Q:()=>Q});var f=F(930);class Q extends f.Lv{constructor(ue,re,fe,ie,se){super(ue),this.onFinalize=se,this._next=re?function(le){try{re(le)}catch($){ue.error($)}}:super._next,this._error=ie?function(le){try{ie(le)}catch($){ue.error($)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(le){ue.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;const{closed:re}=this;super.unsubscribe(),!re&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}},4004:(nt,Ee,F)=>{"use strict";F.d(Ee,{U:()=>k});var f=F(4482),Q=F(5403);function k(ue,re){return(0,f.e)((fe,ie)=>{let se=0;fe.subscribe(new Q.Q(ie,le=>{ie.next(ue.call(re,le,se++))}))})}},8189:(nt,Ee,F)=>{"use strict";F.d(Ee,{J:()=>k});var f=F(5577),Q=F(4671);function k(ue=1/0){return(0,f.z)(Q.y,ue)}},5577:(nt,Ee,F)=>{"use strict";F.d(Ee,{z:()=>se});var f=F(4004),Q=F(8421),k=F(4482),re=(F(9672),F(5403)),ie=F(576);function se(le,$,H=1/0){return(0,ie.m)($)?se((X,Ve)=>(0,f.U)((Ie,Ue)=>$(X,Ie,Ve,Ue))((0,Q.Xf)(le(X,Ve))),H):("number"==typeof $&&(H=$),(0,k.e)((X,Ve)=>function(le,$,H,X,Ve,Ie,Ue,Le){const oe=[];let K=0,ae=0,Ce=!1;const ge=()=>{Ce&&!oe.length&&!K&&$.complete()},$e=He=>K<X?xe(He):oe.push(He),xe=He=>{K++;let qe=!1;(0,Q.Xf)(H(He,ae++)).subscribe(new re.Q($,ut=>{$.next(ut)},()=>{qe=!0},void 0,()=>{if(qe)try{for(K--;oe.length&&K<X;){const ut=oe.shift();xe(ut)}ge()}catch(ut){$.error(ut)}}))};return le.subscribe(new re.Q($,$e,()=>{Ce=!0,ge()})),()=>{}}(X,Ve,le,H)))}},5363:(nt,Ee,F)=>{"use strict";F.d(Ee,{Q:()=>ue});var f=F(9672),Q=F(4482),k=F(5403);function ue(re,fe=0){return(0,Q.e)((ie,se)=>{ie.subscribe(new k.Q(se,le=>(0,f.f)(se,re,()=>se.next(le),fe),()=>(0,f.f)(se,re,()=>se.complete(),fe),le=>(0,f.f)(se,re,()=>se.error(le),fe)))})}},3099:(nt,Ee,F)=>{"use strict";F.d(Ee,{B:()=>fe});var f=F(8996),Q=F(5698),k=F(7579),ue=F(930),re=F(4482);function fe(se={}){const{connector:le=(()=>new k.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:X=!0}=se;return Ve=>{let Ie=null,Ue=null,Le=null,oe=0,K=!1,ae=!1;const Ce=()=>{null==Ue||Ue.unsubscribe(),Ue=null},ge=()=>{Ce(),Ie=Le=null,K=ae=!1},$e=()=>{const xe=Ie;ge(),null==xe||xe.unsubscribe()};return(0,re.e)((xe,He)=>{oe++,!ae&&!K&&Ce();const qe=Le=null!=Le?Le:le();He.add(()=>{oe--,0===oe&&!ae&&!K&&(Ue=ie($e,X))}),qe.subscribe(He),Ie||(Ie=new ue.Hp({next:ut=>qe.next(ut),error:ut=>{ae=!0,Ce(),Ue=ie(ge,$,ut),qe.error(ut)},complete:()=>{K=!0,Ce(),Ue=ie(ge,H),qe.complete()}}),(0,f.D)(xe).subscribe(Ie))})(Ve)}}function ie(se,le,...$){return!0===le?(se(),null):!1===le?null:le(...$).pipe((0,Q.q)(1)).subscribe(()=>se())}},9468:(nt,Ee,F)=>{"use strict";F.d(Ee,{R:()=>Q});var f=F(4482);function Q(k,ue=0){return(0,f.e)((re,fe)=>{fe.add(k.schedule(()=>re.subscribe(fe),ue))})}},5698:(nt,Ee,F)=>{"use strict";F.d(Ee,{q:()=>ue});var f=F(515),Q=F(4482),k=F(5403);function ue(re){return re<=0?()=>f.E:(0,Q.e)((fe,ie)=>{let se=0;fe.subscribe(new k.Q(ie,le=>{++se<=re&&(ie.next(le),re<=se&&ie.complete())}))})}},8505:(nt,Ee,F)=>{"use strict";F.d(Ee,{b:()=>re});var f=F(576),Q=F(4482),k=F(5403),ue=F(4671);function re(fe,ie,se){const le=(0,f.m)(fe)||ie||se?{next:fe,error:ie,complete:se}:fe;return le?(0,Q.e)(($,H)=>{var X;null===(X=le.subscribe)||void 0===X||X.call(le);let Ve=!0;$.subscribe(new k.Q(H,Ie=>{var Ue;null===(Ue=le.next)||void 0===Ue||Ue.call(le,Ie),H.next(Ie)},()=>{var Ie;Ve=!1,null===(Ie=le.complete)||void 0===Ie||Ie.call(le),H.complete()},Ie=>{var Ue;Ve=!1,null===(Ue=le.error)||void 0===Ue||Ue.call(le,Ie),H.error(Ie)},()=>{var Ie,Ue;Ve&&(null===(Ie=le.unsubscribe)||void 0===Ie||Ie.call(le)),null===(Ue=le.finalize)||void 0===Ue||Ue.call(le)}))}):ue.y}},4408:(nt,Ee,F)=>{"use strict";F.d(Ee,{o:()=>re});var f=F(727);class Q extends f.w0{constructor(ie,se){super()}schedule(ie,se=0){return this}}const k={setInterval(...fe){const{delegate:ie}=k;return((null==ie?void 0:ie.setInterval)||setInterval)(...fe)},clearInterval(fe){const{delegate:ie}=k;return((null==ie?void 0:ie.clearInterval)||clearInterval)(fe)},delegate:void 0};var ue=F(8737);class re extends Q{constructor(ie,se){super(ie,se),this.scheduler=ie,this.work=se,this.pending=!1}schedule(ie,se=0){if(this.closed)return this;this.state=ie;const le=this.id,$=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId($,le,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId($,this.id,se),this}requestAsyncId(ie,se,le=0){return k.setInterval(ie.flush.bind(ie,this),le)}recycleAsyncId(ie,se,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return se;k.clearInterval(se)}execute(ie,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ie,se);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,se){let $,le=!1;try{this.work(ie)}catch(H){le=!0,$=H||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ie,scheduler:se}=this,{actions:le}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(le,this),null!=ie&&(this.id=this.recycleAsyncId(se,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ee,F)=>{"use strict";F.d(Ee,{v:()=>k});var f=F(6063);class Q{constructor(re,fe=Q.now){this.schedulerActionCtor=re,this.now=fe}schedule(re,fe=0,ie){return new this.schedulerActionCtor(this,re).schedule(ie,fe)}}Q.now=f.l.now;class k extends Q{constructor(re,fe=Q.now){super(re,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:fe}=this;if(this._active)return void fe.push(re);let ie;this._active=!0;do{if(ie=re.execute(re.state,re.delay))break}while(re=fe.shift());if(this._active=!1,ie){for(;re=fe.shift();)re.unsubscribe();throw ie}}}},4986:(nt,Ee,F)=>{"use strict";F.d(Ee,{z:()=>k});var f=F(4408);const k=new(F(7565).v)(f.o)},6063:(nt,Ee,F)=>{"use strict";F.d(Ee,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(nt,Ee,F)=>{"use strict";F.d(Ee,{z:()=>f});const f={setTimeout(...Q){const{delegate:k}=f;return((null==k?void 0:k.setTimeout)||setTimeout)(...Q)},clearTimeout(Q){const{delegate:k}=f;return((null==k?void 0:k.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(nt,Ee,F)=>{"use strict";F.d(Ee,{h:()=>Q});const Q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},8822:(nt,Ee,F)=>{"use strict";F.d(Ee,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Ee,F)=>{"use strict";F.d(Ee,{_6:()=>fe,jO:()=>ue,yG:()=>re});var f=F(576);function k(ie){return ie[ie.length-1]}function ue(ie){return(0,f.m)(k(ie))?ie.pop():void 0}function re(ie){return function(ie){return ie&&(0,f.m)(ie.schedule)}(k(ie))?ie.pop():void 0}function fe(ie,se){return"number"==typeof k(ie)?ie.pop():se}},8737:(nt,Ee,F)=>{"use strict";function f(Q,k){if(Q){const ue=Q.indexOf(k);0<=ue&&Q.splice(ue,1)}}F.d(Ee,{P:()=>f})},3888:(nt,Ee,F)=>{"use strict";function f(Q){const ue=Q(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}F.d(Ee,{d:()=>f})},2806:(nt,Ee,F)=>{"use strict";F.d(Ee,{x:()=>k,O:()=>ue});var f=F(2416);let Q=null;function k(re){if(f.v.useDeprecatedSynchronousErrorHandling){const fe=!Q;if(fe&&(Q={errorThrown:!1,error:null}),re(),fe){const{errorThrown:ie,error:se}=Q;if(Q=null,ie)throw se}}else re()}function ue(re){f.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=re)}},9672:(nt,Ee,F)=>{"use strict";function f(Q,k,ue,re=0,fe=!1){const ie=k.schedule(function(){ue(),fe?Q.add(this.schedule(null,re)):this.unsubscribe()},re);if(Q.add(ie),!fe)return ie}F.d(Ee,{f:()=>f})},4671:(nt,Ee,F)=>{"use strict";function f(Q){return Q}F.d(Ee,{y:()=>f})},1144:(nt,Ee,F)=>{"use strict";F.d(Ee,{z:()=>f});const f=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(nt,Ee,F)=>{"use strict";F.d(Ee,{D:()=>Q});var f=F(576);function Q(k){return Symbol.asyncIterator&&(0,f.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(nt,Ee,F)=>{"use strict";function f(Q){return"function"==typeof Q}F.d(Ee,{m:()=>f})},3670:(nt,Ee,F)=>{"use strict";F.d(Ee,{c:()=>k});var f=F(8822),Q=F(576);function k(ue){return(0,Q.m)(ue[f.L])}},6495:(nt,Ee,F)=>{"use strict";F.d(Ee,{T:()=>k});var f=F(2202),Q=F(576);function k(ue){return(0,Q.m)(null==ue?void 0:ue[f.h])}},8239:(nt,Ee,F)=>{"use strict";F.d(Ee,{t:()=>Q});var f=F(576);function Q(k){return(0,f.m)(null==k?void 0:k.then)}},3260:(nt,Ee,F)=>{"use strict";F.d(Ee,{Q:()=>k,L:()=>ue});var f=F(5987),Q=F(576);function k(re){return(0,f.FC)(this,arguments,function*(){const ie=re.getReader();try{for(;;){const{value:se,done:le}=yield(0,f.qq)(ie.read());if(le)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(se)}}finally{ie.releaseLock()}})}function ue(re){return(0,Q.m)(null==re?void 0:re.getReader)}},4482:(nt,Ee,F)=>{"use strict";F.d(Ee,{A:()=>Q,e:()=>k});var f=F(576);function Q(ue){return(0,f.m)(null==ue?void 0:ue.lift)}function k(ue){return re=>{if(Q(re))return re.lift(function(fe){try{return ue(fe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(nt,Ee,F)=>{"use strict";function f(){}F.d(Ee,{Z:()=>f})},7849:(nt,Ee,F)=>{"use strict";F.d(Ee,{h:()=>k});var f=F(2416),Q=F(3410);function k(ue){Q.z.setTimeout(()=>{const{onUnhandledError:re}=f.v;if(!re)throw ue;re(ue)})}},4532:(nt,Ee,F)=>{"use strict";function f(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ee,{z:()=>f})},5987:(nt,Ee,F)=>{"use strict";function se(ee,ce,_e,we){return new(_e||(_e=Promise))(function(de,Et){function Wt(gt){try{wt(we.next(gt))}catch(bt){Et(bt)}}function Un(gt){try{wt(we.throw(gt))}catch(bt){Et(bt)}}function wt(gt){gt.done?de(gt.value):function(de){return de instanceof _e?de:new _e(function(Et){Et(de)})}(gt.value).then(Wt,Un)}wt((we=we.apply(ee,ce||[])).next())})}function oe(ee){return this instanceof oe?(this.v=ee,this):new oe(ee)}function K(ee,ce,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,we=_e.apply(ee,ce||[]),de=[];return Oe={},Et("next"),Et("throw"),Et("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Et(ln){we[ln]&&(Oe[ln]=function(_r){return new Promise(function(Ar,cn){de.push([ln,_r,Ar,cn])>1||Wt(ln,_r)})})}function Wt(ln,_r){try{!function(ln){ln.value instanceof oe?Promise.resolve(ln.value.v).then(wt,gt):bt(de[0][2],ln)}(we[ln](_r))}catch(Ar){bt(de[0][3],Ar)}}function wt(ln){Wt("next",ln)}function gt(ln){Wt("throw",ln)}function bt(ln,_r){ln(_r),de.shift(),de.length&&Wt(de[0][0],de[0][1])}}function Ce(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ce=ee[Symbol.asyncIterator];return ce?ce.call(ee):(ee=function(ee){var ce="function"==typeof Symbol&&Symbol.iterator,_e=ce&&ee[ce],we=0;if(_e)return _e.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&we>=ee.length&&(ee=void 0),{value:ee&&ee[we++],done:!ee}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),_e={},we("next"),we("throw"),we("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function we(de){_e[de]=ee[de]&&function(Et){return new Promise(function(Wt,Un){!function(de,Et,Wt,Un){Promise.resolve(Un).then(function(wt){de({value:wt,done:Wt})},Et)}(Wt,Un,(Et=ee[de](Et)).done,Et.value)})}}}F.d(Ee,{mG:()=>se,qq:()=>oe,FC:()=>K,KL:()=>Ce})},5e3:(nt,Ee,F)=>{"use strict";F.d(Ee,{deG:()=>zi,tb:()=>g_,AFp:()=>Oc,ip1:()=>Ih,CZH:()=>bh,hGG:()=>GN,z2F:()=>zp,sBO:()=>uS,Sil:()=>y_,_Vd:()=>Rp,EJc:()=>__,SBq:()=>Mp,qLn:()=>sc,vpe:()=>es,tBr:()=>Rn,XFs:()=>ht,OlP:()=>fn,zs3:()=>ro,IIB:()=>ew,ZZ4:()=>C_,aQg:()=>Lc,soG:()=>m_,YKP:()=>II,h0i:()=>gl,PXZ:()=>nb,R0b:()=>Tr,FiY:()=>Dr,r_U:()=>GI,Lbi:()=>qp,g9A:()=>tw,Qsj:()=>yI,FYo:()=>Jm,JOm:()=>Qi,tp0:()=>Ki,Rgc:()=>Pp,dDg:()=>JI,q4F:()=>C0,GfV:()=>E0,s_b:()=>Rc,ifc:()=>ze,eFA:()=>lo,G48:()=>aS,Gpc:()=>H,X6Q:()=>oS,_c5:()=>Db,VLi:()=>E_,c2e:()=>ZI,zSh:()=>_c,wAp:()=>pt,vHH:()=>Ue,cg1:()=>o0,kL8:()=>XC,dqk:()=>mt,sIi:()=>Qf,CqO:()=>Nv,QGY:()=>Mv,F4k:()=>xC,RDi:()=>zh,AaK:()=>se,qOj:()=>Em,TTD:()=>Vs,_Bn:()=>mI,xp6:()=>ME,uIk:()=>pv,ekj:()=>Nm,Suo:()=>a_,Xpm:()=>Dn,lG2:()=>go,Yz7:()=>cn,cJS:()=>An,oAB:()=>xa,Yjl:()=>Dl,Y36:()=>op,_UZ:()=>th,BQk:()=>Am,ynx:()=>pr,qZA:()=>Rv,TgZ:()=>yu,EpF:()=>SC,n5z:()=>kn,LFG:()=>ne,$8M:()=>ct,$Z:()=>ap,NdJ:()=>up,CRH:()=>u_,oxw:()=>MC,ALo:()=>Iu,xi3:()=>RI,Q6J:()=>xv,MGl:()=>dp,DdM:()=>T0,WLB:()=>A0,iGM:()=>PI,MAs:()=>wC,CHM:()=>hs,LSH:()=>nc,kYT:()=>jo,YNc:()=>vC,_uU:()=>Kv,Oqu:()=>Yv,hij:()=>gp,AsE:()=>Pm});var f=F(7579),Q=F(727),k=F(8306),ue=F(6451),re=F(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=fe({__forward_ref__:fe});function H(s){return s.__forward_ref__=H,s.toString=function(){return se(this())},s}function X(s){return Ve(s)?s():s}function Ve(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}class Ue extends Error{constructor(o,a){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,a)),this.code=o}}function K(s){return"string"==typeof s?s:null==s?"":String(s)}function ae(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():K(s)}function xe(s,o){const a=o?` in ${o}`:"";throw new Ue("201",`No provider for ${ae(s)} found${a}`)}function gt(s,o){null==s&&function(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function cn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function An(s){return{providers:s.providers||[],imports:s.imports||[]}}function Yr(s){return $t(s,Ui)||$t(s,tr)}function $t(s,o){return s.hasOwnProperty(o)?s[o]:null}function fi(s){return s&&(s.hasOwnProperty(Te)||s.hasOwnProperty(Bn))?s[Te]:null}const Ui=fe({\u0275prov:fe}),Te=fe({\u0275inj:fe}),tr=fe({ngInjectableDef:fe}),Bn=fe({ngInjectorDef:fe});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Gt;function Sr(s){const o=Gt;return Gt=s,o}function it(s,o,a){const l=Yr(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ht.Optional?null:void 0!==o?o:void xe(se(s),"Injector")}function xt(s){return{toString:s}.toString()}var Nt=(()=>((Nt=Nt||{})[Nt.OnPush=0]="OnPush",Nt[Nt.Default=1]="Default",Nt))(),ze=(()=>{return(s=ze||(ze={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ze;var s})();const st="undefined"!=typeof globalThis&&globalThis,Il="undefined"!=typeof window&&window,ks="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,mt=st||"undefined"!=typeof global&&global||Il||ks,W={},B=[],q=fe({\u0275cmp:fe}),ye=fe({\u0275dir:fe}),te=fe({\u0275pipe:fe}),Ze=fe({\u0275mod:fe}),lt=fe({\u0275fac:fe}),Yt=fe({__NG_ELEMENT_ID__:fe});let or=0;function Dn(s){return xt(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||B,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ze.Emulated,id:"c",styles:s.styles||B,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,m=s.features,v=s.pipes;return l.id+=or++,l.inputs=Su(s.inputs,a),l.outputs=Su(s.outputs),m&&m.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(Vt):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(ar):null,l})}function Vt(s){return dn(s)||function(s){return s[ye]||null}(s)}function ar(s){return function(s){return s[te]||null}(s)}const po={};function xa(s){return xt(()=>{const o={type:s.type,bootstrap:s.bootstrap||B,declarations:s.declarations||B,imports:s.imports||B,exports:s.exports||B,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(po[s.id]=s.type),o})}function jo(s,o){return xt(()=>{const a=ur(s,!0);a.declarations=o.declarations||B,a.imports=o.imports||B,a.exports=o.exports||B})}function Su(s,o){if(null==s)return W;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),a[d]=l,o&&(o[d]=m)}return a}const go=Dn;function Dl(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function dn(s){return s[q]||null}function ur(s,o){const a=s[Ze]||null;if(!a&&!0===o)throw new Error(`Type ${se(s)} does not have '\u0275mod' property.`);return a}function ji(s){return Array.isArray(s)&&"object"==typeof s[1]}function Hi(s){return Array.isArray(s)&&!0===s[1]}function zn(s){return 0!=(8&s.flags)}function ls(s){return 2==(2&s.flags)}function Tl(s){return 1==(1&s.flags)}function ei(s){return null!==s.template}function $h(s){return 0!=(512&s[2])}function $i(s,o){return s.hasOwnProperty(lt)?s[lt]:null}class Rl{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Vs(){return qo}function qo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Nu),Us}function Us(){const s=lr(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===W)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Nu(s,o,a,l){const d=lr(s)||function(s,o){return s[nd]=o}(s,{previous:W,current:null}),m=d.current||(d.current={}),v=d.previous,E=this.declaredInputs[a],I=v[E];m[E]=new Rl(I&&I.currentValue,o,v===W),s[l]=o}Vs.ngInherit=!0;const nd="__ngSimpleChanges__";function lr(s){return s[nd]||null}let Pu;function zh(s){Pu=s}function en(s){return!!s.listen}const Nl={createRenderer:(s,o)=>void 0!==Pu?Pu:"undefined"!=typeof document?document:void 0};function Nn(s){for(;Array.isArray(s);)s=s[0];return s}function yi(s,o){return Nn(o[s])}function Pn(s,o){return Nn(o[s.index])}function wo(s,o){return s.data[o]}function Eo(s,o){return s[o]}function Qt(s,o){const a=o[s];return ji(a)?a:a[0]}function ds(s){return 4==(4&s[2])}function ka(s){return 128==(128&s[2])}function Nr(s,o){return null==o?null:s[o]}function Fa(s){s[18]=0}function js(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Ye={lFrame:kl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fu(){return Ye.bindingsEnabled}function be(){return Ye.lFrame.lView}function Pt(){return Ye.lFrame.tView}function hs(s){return Ye.lFrame.contextLView=s,s[8]}function _n(){let s=Ua();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ua(){return Ye.lFrame.currentTNode}function cr(s,o){const a=Ye.lFrame;a.currentTNode=s,a.isParent=o}function Vu(){return Ye.lFrame.isParent}function Io(){Ye.lFrame.isParent=!1}function Ba(){return Ye.isInCheckNoChangesMode}function bo(s){Ye.isInCheckNoChangesMode=s}function rr(){const s=Ye.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function $s(){return Ye.lFrame.bindingIndex++}function Gi(s){const o=Ye.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Ga(s,o){const a=Ye.lFrame;a.bindingIndex=a.bindingRootIndex=s,Wa(o)}function Wa(s){Ye.lFrame.currentDirectiveIndex=s}function Bu(){return Ye.lFrame.currentQueryIndex}function qa(s){Ye.lFrame.currentQueryIndex=s}function od(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ju(s,o,a){if(a&ht.SkipSelf){let d=o,m=s;for(;!(d=d.parent,null!==d||a&ht.Host||(d=od(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;o=d,s=m}const l=Ye.lFrame=za();return l.currentTNode=o,l.lView=s,!0}function Hu(s){const o=za(),a=s[1];Ye.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function za(){const s=Ye.lFrame,o=null===s?null:s.child;return null===o?kl(s):o}function kl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Za(){const s=Ye.lFrame;return Ye.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ad=Za;function Ka(){const s=Za();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function hn(){return Ye.lFrame.selectedIndex}function Gs(s){Ye.lFrame.selectedIndex=s}function yn(){const s=Ye.lFrame;return wo(s.tView,s.selectedIndex)}function Ws(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const m=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:M}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(a,M)}}function $u(s,o,a){Ll(s,o,3,a)}function Qa(s,o,a,l){(3&s[2])===a&&Ll(s,o,a,l)}function ld(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Ll(s,o,a,l){const m=null!=l?l:-1,v=o.length-1;let E=0;for(let I=void 0!==l?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(s[18]+=65536),(E<m||-1==m)&&(cd(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function cd(s,o,a,l){const d=a[l]<0,m=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class Ja{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Wu(s,o,a){const l=en(s);let d=0;for(;d<a.length;){const m=a[d];if("number"==typeof m){if(0!==m)break;d++;const v=a[d++],E=a[d++],I=a[d++];l?s.setAttribute(o,E,I,v):o.setAttributeNS(v,E,I)}else{const v=m,E=a[++d];wr(v)?l&&s.setProperty(o,v,E):l?s.setAttribute(o,v,E):o.setAttribute(v,E),d++}}return d}function dd(s){return 3===s||4===s||6===s}function wr(s){return 64===s.charCodeAt(0)}function Ul(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Jh(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Jh(s,o,a,l,d){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const E=s[m++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=m-1;break}}}for(;m<s.length;){const E=s[m];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[m+1]=d));if(l===s[m+1])return void(s[m+2]=d)}m++,null!==l&&m++,null!==d&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,a),null!==l&&s.splice(m++,0,l),null!==d&&s.splice(m++,0,d)}function Xh(s){return-1!==s}function Yo(s){return 32767&s}function eu(s,o){let a=function(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let qu=!0;function Wi(s){const o=qu;return qu=s,o}let hd=0;function Zu(s,o){const a=xn(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,dr(l.data,s),dr(o,null),dr(l.blueprint,null));const d=Qo(s,o),m=s.injectorIndex;if(Xh(d)){const v=Yo(d),E=eu(d,o),I=E[1].data;for(let S=0;S<8;S++)o[m+S]=E[v+S]|I[v+S]}return o[m+8]=d,m}function dr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function xn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Qo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const m=d[1],v=m.type;if(l=2===v?m.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function qi(s,o,a){!function(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Yt)&&(l=a[Yt]),null==l&&(l=a[Yt]=hd++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Pr(s,o,a){if(a&ht.Optional)return s;xe(o,"NodeInjector")}function Bl(s,o,a,l){if(a&ht.Optional&&void 0===l&&(l=null),0==(a&(ht.Self|ht.Host))){const d=s[9],m=Sr(void 0);try{return d?d.get(o,l,a&ht.Optional):it(o,l,a&ht.Optional)}finally{Sr(m)}}return Pr(l,o,a)}function fd(s,o,a,l=ht.Default,d){if(null!==s){const m=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Yt)?s[Yt]:void 0;return"number"==typeof o?o>=0?255&o:wi:o}(a);if("function"==typeof m){if(!ju(o,s,l))return l&ht.Host?Pr(d,a,l):Bl(o,a,l,d);try{const v=m(l);if(null!=v||l&ht.Optional)return v;xe(a)}finally{ad()}}else if("number"==typeof m){let v=null,E=xn(s,o),I=-1,S=l&ht.Host?o[16][6]:null;for((-1===E||l&ht.SkipSelf)&&(I=-1===E?Qo(s,o):o[E+8],-1!==I&&To(l,!1)?(v=o[1],E=Yo(I),o=eu(I,o)):E=-1);-1!==E;){const M=o[1];if(Do(m,E,M.data)){const L=Tn(E,o,a,v,l,S);if(L!==nu)return L}I=o[E+8],-1!==I&&To(l,o[1].data[E+8]===S)&&Do(m,E,o)?(v=M,E=Yo(I),o=eu(I,o)):E=-1}}}return Bl(o,a,l,d)}const nu={};function wi(){return new At(_n(),be())}function Tn(s,o,a,l,d,m){const v=o[1],E=v.data[s+8],M=Qe(E,v,a,null==l?ls(E)&&qu:l!=v&&0!=(3&E.type),d&ht.Host&&m===E);return null!==M?On(o,v,M,E):nu}function Qe(s,o,a,l,d){const m=s.providerIndexes,v=o.data,E=1048575&m,I=s.directiveStart,M=m>>20,G=d?E+M:s.directiveEnd;for(let Y=l?E:E+M;Y<G;Y++){const pe=v[Y];if(Y<I&&a===pe||Y>=I&&pe.type===a)return Y}if(d){const Y=v[I];if(Y&&ei(Y)&&Y.type===a)return I}return null}function On(s,o,a,l){let d=s[a];const m=o.data;if(function(s){return s instanceof Ja}(d)){const v=d;v.resolving&&function(s,o){throw new Ue("200",`Circular dependency in DI detected for ${s}`)}(ae(m[a]));const E=Wi(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Sr(v.injectImpl):null;ju(s,l,ht.Default);try{d=s[a]=v.factory(void 0,m,s,l),o.firstCreatePass&&a>=l.directiveStart&&function(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:m}=o.type.prototype;if(l){const v=qo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),m&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,m))}(a,m[a],o)}finally{null!==I&&Sr(I),Wi(E),v.resolving=!1,ad()}}return d}function Do(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function To(s,o){return!(s&ht.Self||s&ht.Host&&o)}class At{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return fd(this._tNode,this._lView,o,l,a)}}function kn(s){return xt(()=>{const o=s.prototype.constructor,a=o[lt]||Or(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const m=d[lt]||Or(d);if(m&&m!==a)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Or(s){return Ve(s)?()=>{const o=Or(X(s));return o&&o()}:$i(s)}function ct(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const m=a[d];if(dd(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(m===o)return a[d+1];d+=2}}}return null}(_n(),s)}const ps="__parameters__",kr="__prop__metadata__";function jl(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}function Ei(s,o,a){return xt(()=>{const l=jl(o);function d(...m){if(this instanceof d)return l.apply(this,m),this;const v=new d(...m);return E.annotation=v,E;function E(I,S,M){const L=I.hasOwnProperty(ps)?I[ps]:Object.defineProperty(I,ps,{value:[]})[ps];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function pd(s,o,a,l){return xt(()=>{const d=jl(o);function m(...v){if(this instanceof m)return d.apply(this,v),this;const E=new m(...v);return function(S,M){const L=S.constructor,G=L.hasOwnProperty(kr)?L[kr]:Object.defineProperty(L,kr,{value:{}})[kr];G[M]=G.hasOwnProperty(M)&&G[M]||[],G[M].unshift(E),l&&l(S,M,...v)}}return a&&(m.prototype=Object.create(a.prototype)),m.prototype.ngMetadataName=s,m.annotationCls=m,m})}class fn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=cn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zi=new fn("AnalyzeForEntryComponents");function Cr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Cr(l,o)):o!==s&&o.push(l)}return o}function ti(s,o){s.forEach(a=>Array.isArray(a)?ti(a,o):o(a))}function Yu(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ta(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Fr(s,o,a){let l=ou(s,o);return l>=0?s[1|l]=a:(l=~l,function(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function su(s,o){const a=ou(s,o);if(a>=0)return s[1|a]}function ou(s,o){return function(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const m=l+(d-l>>1),v=s[m<<a];if(o===v)return m<<a;v>o?d=m:l=m+1}return~(d<<a)}(s,o,1)}const zl={},Zl="__NG_DI_FLAG__",Ir="ngTempTokenPath",sf=/\n/gm,b="__source",D=fe({provide:String,useValue:fe});let N;function U(s){const o=N;return N=s,o}function Z(s,o=ht.Default){if(void 0===N)throw new Error("inject() must be called from an injection context");return null===N?it(s,void 0,o):N.get(s,o&ht.Optional?null:void 0,o)}function ne(s,o=ht.Default){return(Gt||Z)(X(s),o)}function We(s){const o=[];for(let a=0;a<s.length;a++){const l=X(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,m=ht.Default;for(let v=0;v<l.length;v++){const E=l[v],I=tn(E);"number"==typeof I?-1===I?d=E.token:m|=I:d=E}o.push(ne(d,m))}else o.push(ne(l))}return o}function Ot(s,o){return s[Zl]=o,s.prototype[Zl]=o,s}function tn(s){return s[Zl]}const Rn=Ot(Ei("Inject",s=>({token:s})),-1),Dr=Ot(Ei("Optional"),8),Ki=Ot(Ei("SkipSelf"),4);class Lg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ys(s){return s instanceof Lg?s.changingThisBreaksApplicationSecurity:s}const Qs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Dd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Hn=(()=>((Hn=Hn||{})[Hn.NONE=0]="NONE",Hn[Hn.HTML=1]="HTML",Hn[Hn.STYLE=2]="STYLE",Hn[Hn.SCRIPT=3]="SCRIPT",Hn[Hn.URL=4]="URL",Hn[Hn.RESOURCE_URL=5]="RESOURCE_URL",Hn))();function nc(s){const o=function(){const s=be();return s&&s[12]}();return o?o.sanitize(Hn.URL,s)||"":function(s,o){const a=function(s){return s instanceof Lg&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?Ys(s):function(s){return(s=String(s)).match(Qs)||s.match(Dd)?s:"unsafe:"+s}(K(s))}const Sd="__ngContext__";function Kn(s,o){s[Sd]=o}function ws(s){const o=function(s){return s[Sd]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function hu(s){return s.ngOriginalError}function Sy(s,...o){s.error(...o)}class sc{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=(s=o)&&s.ngErrorLogger||Sy;var s;l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&hu(o);for(;a&&hu(a);)a=hu(a);return a||null}}const Fd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(mt))();function Yi(s){return s instanceof Function?s():s}var Qi=(()=>((Qi=Qi||{})[Qi.Important=1]="Important",Qi[Qi.DashCase=2]="DashCase",Qi))();function Vd(s,o){return undefined(s,o)}function pu(s){const o=s[3];return Hi(o)?o[3]:o}function Es(s){return Rf(s[13])}function aa(s){return Rf(s[4])}function Rf(s){for(;null!==s&&!Hi(s);)s=s[4];return s}function ua(s,o,a,l,d){if(null!=l){let m,v=!1;Hi(l)?m=l:ji(l)&&(v=!0,l=l[0]);const E=Nn(l);0===s&&null!==a?null==d?lc(o,a,E):ii(o,a,E,d||null,!0):1===s&&null!==a?ii(o,a,E,d||null,!0):2===s?function(s,o,a){const l=al(s,o);l&&function(s,o,a,l){en(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,E,v):3===s&&o.destroyNode(E),null!=m&&function(s,o,a,l,d){const m=a[7];m!==Nn(a)&&ua(o,s,l,m,d);for(let E=10;E<a.length;E++){const I=a[E];gu(I[1],I,s,o,l,m)}}(o,s,m,a,d)}}function _(s,o,a){return en(s)?s.createElement(o,a):null===a?s.createElement(o):s.createElementNS(a,o)}function J(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,js(d,-1)),a.splice(l,1)}function Pe(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&J(d,l),o>0&&(s[a-1][4]=l[4]);const m=ta(s,10+o);!function(s,o){gu(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=m[19];null!==v&&v.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Me(s,o){if(!(256&o[2])){const a=o[11];en(a)&&a.destroyNode&&gu(s,o,a,3,null,null),function(s){let o=s[13];if(!o)return Xe(s[1],s);for(;o;){let a=null;if(ji(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)ji(o)&&Xe(o[1],o),o=o[3];null===o&&(o=s),ji(o)&&Xe(o[1],o),a=o&&o[4]}o=a}}(o)}}function Xe(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Ja)){const m=a[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=d[m[v]],I=m[v+1];try{I.call(E)}finally{}}else try{m.call(d)}finally{}}}}(s,o),function(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let m=0;m<a.length-1;m+=2)if("string"==typeof a[m]){const v=a[m+1],E="function"==typeof v?v(o):Nn(o[v]),I=l[d=a[m+2]],S=a[m+3];"boolean"==typeof S?E.removeEventListener(a[m],I,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),m+=2}else{const v=l[d=a[m+1]];a[m].call(v)}if(null!==l){for(let m=d+1;m<l.length;m++)l[m]();o[7]=null}}(s,o),1===o[1].type&&en(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Hi(o[3])){a!==o[3]&&J(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function Qn(s,o,a){return function(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===ze.None||d===ze.Emulated)return null}return Pn(l,a)}(s,o.parent,a)}function ii(s,o,a,l,d){en(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function lc(s,o,a){en(s)?s.appendChild(o,a):o.appendChild(a)}function ol(s,o,a,l,d){null!==l?ii(s,o,a,l,d):lc(s,o,a)}function al(s,o){return en(s)?s.parentNode(o):o.parentNode}let kf=function(s,o,a){return 40&s.type?Pn(s,a):null};function dc(s,o,a,l){const d=Qn(s,l,o),m=o[11],E=function(s,o,a){return kf(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)ol(m,d,a[I],E,!1);else ol(m,d,a,E,!1)}function hc(s,o){if(null!==o){const a=o.type;if(3&a)return Pn(o,s);if(4&a)return Ry(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return hc(s,l);{const d=s[o.index];return Hi(d)?Ry(-1,d):Nn(d)}}if(32&a)return Vd(o,s)()||Nn(s[o.index]);{const l=vE(s,o);return null!==l?Array.isArray(l)?l[0]:hc(pu(s[16]),l):hc(s,o.next)}}return null}function vE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ry(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return hc(l,d)}return o[7]}function My(s,o,a,l,d,m,v){for(;null!=a;){const E=l[a.index],I=a.type;if(v&&0===o&&(E&&Kn(Nn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)My(s,o,a.child,l,d,m,!1),ua(o,s,d,E,m);else if(32&I){const S=Vd(a,l);let M;for(;M=S();)ua(o,s,d,M,m);ua(o,s,d,E,m)}else 16&I?wE(s,o,l,a,d,m):ua(o,s,d,E,m);a=v?a.projectionNext:a.next}}function gu(s,o,a,l,d,m){My(a,l,s.firstChild,o,d,m,!1)}function wE(s,o,a,l,d,m){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)ua(o,s,d,I[S],m);else My(s,o,I,v[3],d,m,!0)}function EE(s,o,a){en(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function Ny(s,o,a){en(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function CE(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const m=o.length;if(d+m===l||s.charCodeAt(d+m)<=32)return d}a=d+1}}const IE="ng-template";function $D(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==CE(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function bE(s){return 4===s.type&&s.value!==IE}function GD(s,o,a){return o===(4!==s.type||a?s.value:IE)}function DE(s,o,a){let l=4;const d=s.attrs||[],m=function(s){for(let o=0;o<s.length;o++)if(dd(s[o]))return o;return s.length}(d);let v=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!GD(s,I,a)||""===I&&1===o.length){if(xo(l))return!1;v=!0}}else{const S=8&l?I:o[++E];if(8&l&&null!==s.attrs){if(!$D(s.attrs,S,a)){if(xo(l))return!1;v=!0}continue}const L=WD(8&l?"class":I,d,bE(s),a);if(-1===L){if(xo(l))return!1;v=!0;continue}if(""!==S){let G;G=L>m?"":d[L+1].toLowerCase();const Y=8&l?G:null;if(Y&&-1!==CE(Y,S,0)||2&l&&S!==G){if(xo(l))return!1;v=!0}}}}else{if(!v&&!xo(l)&&!xo(I))return!1;if(v&&xo(I))continue;v=!1,l=I|1&l}}return xo(l)||v}function xo(s){return 0==(1&s)}function WD(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let m=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=m?1:2}return-1}return function(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function TE(s,o,a=!1){for(let l=0;l<o.length;l++)if(DE(s,o[l],a))return!0;return!1}function Py(s,o){return s?":not("+o.trim()+")":o}function SE(s){let o=s[0],a=1,l=2,d="",m=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const E=s[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!xo(v)&&(o+=Py(m,d),d=""),l=v,m=m||!xo(l);a++}return""!==d&&(o+=Py(m,d)),o}const Ct={};function ME(s){NE(Pt(),be(),hn()+s,Ba())}function NE(s,o,a,l){if(!l)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&$u(o,m,a)}else{const m=s.preOrderHooks;null!==m&&Qa(o,m,0,a)}Gs(a)}function Xg(s,o){return s<<17|o<<2}function Cs(s){return s>>17&32767}function Oy(s){return 2|s}function Ro(s){return(131068&s)>>2}function em(s,o){return-131069&s|o<<2}function ky(s){return 1|s}function Hy(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],m=a[l+1];if(-1!==m){const v=s.data[m];qa(d),v.contentQueries(2,o[m],m)}}}function Uf(s,o,a,l,d,m,v,E,I,S){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,Fa(M),M[3]=M[15]=s,M[8]=a,M[10]=v||s&&s[10],M[11]=E||s&&s[11],M[12]=I||s&&s[12]||null,M[9]=S||s&&s[9]||null,M[6]=m,M[16]=2==o.type?s[16]:M,M}function ca(s,o,a,l,d){let m=s.data[o];if(null===m)m=function(s,o,a,l,d){const m=Ua(),v=Vu(),I=s.data[o]=function(s,o,a,l,d,m){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=I),null!==m&&(v?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(s,o,a,l,d),Ye.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=a,m.value=l,m.attrs=d;const v=function(){const s=Ye.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return cr(m,!0),m}function gc(s,o,a,l){if(0===a)return-1;const d=o.length;for(let m=0;m<a;m++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function hr(s,o,a){Hu(o);try{const l=s.viewQuery;null!==l&&hm(1,l,a);const d=s.template;null!==d&&uT(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Hy(s,o),s.staticViewQueries&&hm(2,s.viewQuery,a);const m=s.components;null!==m&&function(s,o){for(let a=0;a<o.length;a++)gT(s,o[a])}(o,m)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Ka()}}function Is(s,o,a,l){const d=o[2];if(256==(256&d))return;Hu(o);const m=Ba();try{Fa(o),function(s){Ye.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&uT(s,o,a,2,l);const v=3==(3&d);if(!m)if(v){const S=s.preOrderCheckHooks;null!==S&&$u(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Qa(o,S,0,null),ld(o,0)}if(function(s){for(let o=Es(s);null!==o;o=aa(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],m=d[3];0==(1024&d[2])&&js(m,1),d[2]|=1024}}}(o),function(s){for(let o=Es(s);null!==o;o=aa(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ka(l)&&Is(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&Hy(s,o),!m)if(v){const S=s.contentCheckHooks;null!==S&&$u(o,S)}else{const S=s.contentHooks;null!==S&&Qa(o,S,1),ld(o,1)}!function(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Gs(~d);else{const m=d,v=a[++l],E=a[++l];Ga(v,m),E(2,o[m])}}}finally{Gs(-1)}}(s,o);const E=s.components;null!==E&&function(s,o){for(let a=0;a<o.length;a++)sN(s,o[a])}(o,E);const I=s.viewQuery;if(null!==I&&hm(2,I,l),!m)if(v){const S=s.viewCheckHooks;null!==S&&$u(o,S)}else{const S=s.viewHooks;null!==S&&Qa(o,S,2),ld(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,js(o[3],-1))}finally{Ka()}}function aT(s,o,a,l){const d=o[10],m=!Ba(),v=ds(o);try{m&&!v&&d.begin&&d.begin(),v&&hr(s,o,l),Is(s,o,a,l)}finally{m&&!v&&d.end&&d.end()}}function uT(s,o,a,l,d){const m=hn(),v=2&l;try{Gs(-1),v&&o.length>20&&NE(s,o,20,Ba()),a(l,d)}finally{Gs(m)}}function $y(s,o,a){if(zn(o)){const d=o.directiveEnd;for(let m=o.directiveStart;m<d;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,a[m],m)}}}function am(s,o,a){!Fu()||(function(s,o,a,l){const d=a.directiveStart,m=a.directiveEnd;s.firstCreatePass||Zu(a,o),Kn(l,o);const v=a.initialInputs;for(let E=d;E<m;E++){const I=s.data[E],S=ei(I);S&&Jy(o,a,I);const M=On(o,s,E,a);Kn(M,o),null!==v&&ev(0,E-d,M,I,0,v),S&&(Qt(a.index,o)[8]=M)}}(s,o,a,Pn(a,o)),128==(128&a.flags)&&function(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,E=Ye.lFrame.currentDirectiveIndex;try{Gs(v);for(let I=l;I<d;I++){const S=s.data[I],M=o[I];Wa(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&mu(S,M)}}finally{Gs(-1),Wa(E)}}(s,o,a))}function um(s,o,a=Pn){const l=o.localNames;if(null!==l){let d=o.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],E=-1===v?a(o,s):s[v];s[d++]=E}}}function Gy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Bf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Bf(s,o,a,l,d,m,v,E,I,S){const M=20+l,L=M+d,G=function(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ct);return a}(M,L),Y="function"==typeof S?S():S;return G[1]={type:s,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function qy(s,o,a,l){const d=YE(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&yT(s).push(l,d.length-1))}function zy(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Ji(s,o,a,l,d,m,v,E){const I=Pn(o,a);let M,S=o.inputs;!E&&null!=S&&(M=S[l])?(JE(s,a,M,l,d),ls(o)&&function(s,o){const a=Qt(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,en(m)?m.setProperty(I,l,d):wr(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}function jf(s,o,a,l){let d=!1;if(Fu()){const m=function(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let m=0;m<l.length;m++){const v=l[m];TE(a,v.selectors,!1)&&(d||(d=[]),qi(Zu(a,o),s,v.type),ei(v)?(Yy(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==m){d=!0,lm(a,s.data.length,m.length);for(let M=0;M<m.length;M++){const L=m[M];L.providersResolver&&L.providersResolver(L)}let E=!1,I=!1,S=gc(s,o,m.length,null);for(let M=0;M<m.length;M++){const L=m[M];a.mergedAttrs=Ul(a.mergedAttrs,L.hostAttrs),Qy(s,a,o,S,L),nN(S,L,v),null!==L.contentQueries&&(a.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(a.flags|=128);const G=L.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),I=!0),S++}!function(s,o){const l=o.directiveEnd,d=s.data,m=o.attrs,v=[];let E=null,I=null;for(let S=o.directiveStart;S<l;S++){const M=d[S],L=M.inputs,G=null===m||bE(o)?null:fT(L,m);v.push(G),E=zy(L,S,E),I=zy(M.outputs,S,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=I}(s,a)}v&&function(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const m=a[o[d+1]];if(null==m)throw new Ue("301",`Export of name '${o[d+1]}' not found!`);l.push(o[d],m)}}}(a,l,v)}return a.mergedAttrs=Ul(a.mergedAttrs,a.attrs),d}function Hf(s,o,a,l,d,m){const v=m.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,d,v)}}function mu(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Yy(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function nN(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;ei(o)&&(a[""]=s)}}function lm(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Qy(s,o,a,l,d){s.data[l]=d;const m=d.factory||(d.factory=$i(d.type)),v=new Ja(m,ei(d),null);s.blueprint[l]=v,a[l]=v,Hf(s,o,0,l,gc(s,a,d.hostVars,Ct),d)}function Jy(s,o,a){const l=Pn(o,s),d=Gy(a),m=s[10],v=ll(s,Uf(s,d,null,a.onPush?64:16,l,o,m,m.createRenderer(l,a),null,null));s[o.index]=v}function bs(s,o,a,l,d,m){const v=Pn(s,o);!function(s,o,a,l,d,m,v){if(null==m)en(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const E=null==v?K(m):v(m,l||"",d);en(s)?s.setAttribute(o,d,E,a):a?o.setAttributeNS(a,d,E):o.setAttribute(d,E)}}(o[11],v,m,s.value,a,l,d)}function ev(s,o,a,l,d,m){const v=m[o];if(null!==v){const E=l.setInput;for(let I=0;I<v.length;){const S=v[I++],M=v[I++],L=v[I++];null!==E?l.setInput(a,L,S,M):a[M]=L}}}function fT(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function pT(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function sN(s,o){const a=Qt(o,s);if(ka(a)){const l=a[1];80&a[2]?Is(l,a,l.template,a[8]):a[5]>0&&ZE(a)}}function ZE(s){for(let l=Es(s);null!==l;l=aa(l))for(let d=10;d<l.length;d++){const m=l[d];if(1024&m[2]){const v=m[1];Is(v,m,v.template,m[8])}else m[5]>0&&ZE(m)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Qt(a[l],s);ka(d)&&d[5]>0&&ZE(d)}}function gT(s,o){const a=Qt(o,s),l=a[1];(function(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),hr(l,a,a[8])}function ll(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Wd(s){for(;s;){s[2]|=64;const o=pu(s);if($h(s)&&!o)return s;s=o}return null}function $f(s,o,a){const l=o[10];l.begin&&l.begin();try{Is(s,o,s.template,a)}catch(d){throw fm(o,d),d}finally{l.end&&l.end()}}function Gf(s){!function(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=ws(a),d=l[1];aT(d,l,d.template,a)}}(s[8])}function hm(s,o,a){qa(0),o(s,a)}const KE=(()=>Promise.resolve(null))();function YE(s){return s[7]||(s[7]=[])}function yT(s){return s.cleanup||(s.cleanup=[])}function fm(s,o){const a=s[9],l=a?a.get(sc,null):null;l&&l.handleError(o)}function JE(s,o,a,l,d){for(let m=0;m<a.length;){const v=a[m++],E=a[m++],I=o[v],S=s.data[v];null!==S.setInput?S.setInput(I,d,l,E):I[E]=d}}function ha(s,o,a){const l=yi(o,s);!function(s,o,a){en(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function qd(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?m=E:1==m?d=le(d,E):2==m&&(l=le(l,E+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const zd=new fn("INJECTOR",-1);class mc{get(o,a=zl){if(a===zl){const l=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw l.name="NullInjectorError",l}return a}}const _c=new fn("Set Injector scope."),Wf={},nv={};let mm;function _m(){return void 0===mm&&(mm=new mc),mm}function rv(s,o=null,a=null,l){const d=ym(s,o,a,l);return d._resolveInjectorDefTypes(),d}function ym(s,o=null,a=null,l){return new iv(s,a,o||_m(),l)}class iv{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];a&&ti(a,E=>this.processProvider(E,o,a)),ti([o],E=>this.processInjectorType(E,[],m)),this.records.set(zd,fa(void 0,this));const v=this.records.get(_c);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=zl,l=ht.Default){this.assertNotDestroyed();const d=U(this),m=Sr(void 0);try{if(!(l&ht.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=("function"==typeof(s=o)||"object"==typeof s&&s instanceof fn)&&Yr(o);E=I&&this.injectableDefInScope(I)?fa(Zd(o),Wf):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&ht.Self?_m():this.parent).get(o,a=l&ht.Optional&&a===zl?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ir]=v[Ir]||[]).unshift(se(o)),d)throw v;return function(s,o,a,l){const d=s[Ir];throw o[b]&&d.unshift(o[b]),s.message=function(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=se(o);if(Array.isArray(o))d=o.map(se).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):se(E)))}d=`{${m.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(sf,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Ir]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Sr(m),U(d)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(se(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,a,l){if(!(o=X(o)))return!1;let d=fi(o);const m=null==d&&o.ngModule||void 0,v=void 0===m?o:m,E=-1!==l.indexOf(v);if(void 0!==m&&(d=fi(m)),null==d)return!1;if(null!=d.imports&&!E){let M;l.push(v);try{ti(d.imports,L=>{this.processInjectorType(L,a,l)&&(void 0===M&&(M=[]),M.push(L))})}finally{}if(void 0!==M)for(let L=0;L<M.length;L++){const{ngModule:G,providers:Y}=M[L];ti(Y,pe=>this.processProvider(pe,G,Y||B))}}this.injectorDefTypes.add(v);const I=$i(v)||(()=>new v);this.records.set(v,fa(I,Wf));const S=d.providers;if(null!=S&&!E){const M=o;ti(S,L=>this.processProvider(L,M,S))}return void 0!==m&&void 0!==o.providers}processProvider(o,a,l){let d=zf(o=X(o))?o:X(o&&o.provide);const m=(s=o,qf(s)?fa(void 0,s.useValue):fa(XE(s),Wf));var s;if(zf(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=fa(void 0,Wf,!0),v.factory=()=>We(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,m)}hydrate(o,a){return a.value===Wf&&(a.value=nv,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(s=a.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const a=X(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Zd(s){const o=Yr(s),a=null!==o?o.factory:$i(s);if(null!==a)return a;if(s instanceof fn)throw new Error(`Token ${se(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const l=function(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?");throw new Error(`Can't resolve all parameters for ${se(s)}: (${l.join(", ")}).`)}const a=function(s){const o=s&&(s[Ui]||s[tr]);if(o){const a=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Error("unreachable")}function XE(s,o,a){let l;if(zf(s)){const d=X(s);return $i(d)||Zd(d)}if(qf(s))l=()=>X(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...We(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))l=()=>ne(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return $i(d)||Zd(d);l=()=>new d(...We(s.deps))}return l}function fa(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function qf(s){return null!==s&&"object"==typeof s&&D in s}function zf(s){return"function"==typeof s}let ro=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return rv({name:""},l,a,"");{const m=null!==(d=a.name)&&void 0!==d?d:"";return rv({name:m},a.parent,a.providers,m)}}}return s.THROW_IF_NOT_FOUND=zl,s.NULL=new mc,s.\u0275prov=cn({token:s,providedIn:"any",factory:()=>ne(zd)}),s.__NG_ELEMENT_ID__=-1,s})();function dv(s,o){Ws(ws(s)[1],_n())}function Em(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(ei(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=cC(s.inputs),v.declaredInputs=cC(s.declaredInputs),v.outputs=cC(s.outputs);const E=d.hostBindings;E&&dC(s,E);const I=d.viewQuery,S=d.contentQueries;if(I&&hv(s,I),S&&ST(s,S),ie(s.inputs,d.inputs),ie(s.declaredInputs,d.declaredInputs),ie(s.outputs,d.outputs),ei(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(s),E===Em&&(a=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Ul(d.hostAttrs,a=Ul(a,d.hostAttrs))}}(l)}function cC(s){return s===W?{}:s===B?[]:s}function hv(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function ST(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,m)=>{o(l,d,m),a(l,d,m)}:o}function dC(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Yf=null;function Kd(){if(!Yf){const s=mt.Symbol;if(s&&s.iterator)Yf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Yf=l)}}}return Yf}function Qf(s){return!!Im(s)&&(Array.isArray(s)||!(s instanceof Map)&&Kd()in s)}function Im(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function pa(s,o,a){return s[o]=a}function si(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function cl(s,o,a,l){const d=si(s,o,a);return si(s,o+1,l)||d}function pv(s,o,a,l){const d=be();return si(d,$s(),o)&&(Pt(),bs(yn(),d,s,o,a,l)),pv}function Jf(s,o,a,l){return si(s,$s(),a)?o+K(a)+l:Ct}function Xf(s,o,a,l,d,m){const E=cl(s,Ye.lFrame.bindingIndex,a,d);return Gi(2),E?o+K(a)+l+K(d)+m:Ct}function vC(s,o,a,l,d,m,v,E){const I=be(),S=Pt(),M=s+20,L=S.firstCreatePass?function(s,o,a,l,d,m,v,E,I){const S=o.consts,M=ca(o,s,4,v||null,Nr(S,E));jf(o,a,M,Nr(S,I)),Ws(o,M);const L=M.tViews=Bf(2,M,l,d,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,S,I,o,a,l,d,m,v):S.data[M];cr(L,!1);const G=I[11].createComment("");dc(S,I,G,L),Kn(G,I),ll(I,I[M]=pT(G,I,G,L)),Tl(L)&&am(S,I,L),null!=v&&um(I,L,E)}function wC(s){return Eo(Ye.lFrame.contextLView,20+s)}function op(s,o=ht.Default){const a=be();return null===a?ne(s,o):fd(_n(),a,X(s),o)}function ap(){throw new Error("invalid")}function xv(s,o,a){const l=be();return si(l,$s(),o)&&Ji(Pt(),yn(),l,s,o,l[11],a,!1),xv}function Mo(s,o,a,l,d){const v=d?"class":"style";JE(s,a,o.inputs[v],v,l)}function yu(s,o,a,l){const d=be(),m=Pt(),v=20+s,E=d[11],I=d[v]=_(E,o,Ye.lFrame.currentNamespace),S=m.firstCreatePass?function(s,o,a,l,d,m,v){const E=o.consts,S=ca(o,s,2,d,Nr(E,m));return jf(o,a,S,Nr(E,v)),null!==S.attrs&&qd(S,S.attrs,!1),null!==S.mergedAttrs&&qd(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,m,d,0,o,a,l):m.data[v];cr(S,!0);const M=S.mergedAttrs;null!==M&&Wu(E,I,M);const L=S.classes;null!==L&&Ny(E,I,L);const G=S.styles;null!==G&&EE(E,I,G),64!=(64&S.flags)&&dc(m,d,I,S),0===Ye.lFrame.elementDepthCount&&Kn(I,d),Ye.lFrame.elementDepthCount++,Tl(S)&&(am(m,d,S),$y(m,S,d)),null!==l&&um(d,S)}function Rv(){let s=_n();Vu()?Io():(s=s.parent,cr(s,!1));const o=s;Ye.lFrame.elementDepthCount--;const a=Pt();a.firstCreatePass&&(Ws(a,s),zn(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Mo(a,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Mo(a,o,be(),o.stylesWithoutHost,!1)}function th(s,o,a,l){yu(s,o,a,l),Rv()}function pr(s,o,a){const l=be(),d=Pt(),m=s+20,v=d.firstCreatePass?function(s,o,a,l,d){const m=o.consts,v=Nr(m,l),E=ca(o,s,8,"ng-container",v);return null!==v&&qd(E,v,!0),jf(o,a,E,Nr(m,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(m,d,l,o,a):d.data[m];cr(v,!0);const E=l[m]=l[11].createComment("");dc(d,l,E,v),Kn(E,l),Tl(v)&&(am(d,l,v),$y(d,v,l)),null!=a&&um(l,v)}function Am(){let s=_n();const o=Pt();Vu()?Io():(s=s.parent,cr(s,!1)),o.firstCreatePass&&(Ws(o,s),zn(s)&&o.queries.elementEnd(s))}function SC(){return be()}function Mv(s){return!!s&&"function"==typeof s.then}function xC(s){return!!s&&"function"==typeof s.subscribe}const Nv=xC;function up(s,o,a,l){const d=be(),m=Pt(),v=_n();return function(s,o,a,l,d,m,v,E){const I=Tl(l),M=s.firstCreatePass&&yT(s),L=o[8],G=YE(o);let Y=!0;if(3&l.type||E){const Be=Pn(l,o),Je=E?E(Be):Be,De=G.length,at=E?Ft=>E(Nn(Ft[l.index])):l.index;if(en(a)){let Ft=null;if(!E&&I&&(Ft=function(s,o,a,l){const d=s.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const v=d[m];if(v===a&&d[m+1]===l){const E=o[7],I=d[m+2];return E.length>I?E[I]:null}"string"==typeof v&&(m+=2)}return null}(s,o,d,l.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=m,Ft.__ngLastListenerFn__=m,Y=!1;else{m=Pv(l,o,L,m,!1);const nn=a.listen(Je,d,m);G.push(m,nn),M&&M.push(d,at,De,De+1)}}else m=Pv(l,o,L,m,!0),Je.addEventListener(d,m,v),G.push(m),M&&M.push(d,at,De,v)}else m=Pv(l,o,L,m,!1);const pe=l.outputs;let Se;if(Y&&null!==pe&&(Se=pe[d])){const Be=Se.length;if(Be)for(let Je=0;Je<Be;Je+=2){const Mi=o[Se[Je]][Se[Je+1]].subscribe(m),Vc=G.length;G.push(m,Mi),M&&M.push(d,l.index,Vc,-(Vc+1))}}}(m,d,d[11],v,s,o,!!a,l),up}function rh(s,o,a,l){try{return!1!==a(l)}catch(d){return fm(s,d),!1}}function Pv(s,o,a,l,d){return function m(v){if(v===Function)return l;const E=2&s.flags?Qt(s.index,o):o;0==(32&o[2])&&Wd(E);let I=rh(o,0,l,v),S=m.__ngNextListenerFn__;for(;S;)I=rh(o,0,S,v)&&I,S=S.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function MC(s=1){return function(s){return(Ye.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ye.lFrame.contextLView))[8]}(s)}function dp(s,o,a,l,d){const m=be(),v=Jf(m,o,a,l);return v!==Ct&&Ji(Pt(),yn(),m,s,v,m[11],d,!1),dp}function Mm(s,o,a,l,d){const m=s[a+1],v=null===o;let E=l?Cs(m):Ro(m),I=!1;for(;0!==E&&(!1===I||v);){const M=s[E+1];Bv(s[E],o)&&(I=!0,s[E+1]=l?ky(M):Oy(M)),E=l?Cs(M):Ro(M)}I&&(s[a+1]=l?Oy(m):ky(m))}function Bv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ou(s,o)>=0}function Nm(s,o){return function(s,o,a,l){const d=be(),m=Pt(),v=Gi(2);m.firstUpdatePass&&function(s,o,a,l){const d=s.data;if(null===d[a+1]){const m=d[hn()],v=function(s,o){return o>=s.expandoStartIndex}(s,a);(function(s,o){return 0!=(s.flags&(o?16:32))})(m,l)&&null===o&&!v&&(o=!1),o=function(s,o,a,l){const d=function(s){const o=Ye.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=fp(a=Gv(null,s,o,a,l),o.attrs,l),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=Gv(d,s,o,a,l),null===m){let I=function(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ro(l))return s[Cs(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=Gv(null,s,o,I[1],l),I=fp(I,o.attrs,l),function(s,o,a,l){s[Cs(a?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else m=function(s,o,a){let l;const d=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<d;m++)l=fp(l,s[m].hostAttrs,a);return fp(l,o.attrs,a)}(s,o,l)}return void 0!==m&&(l?o.residualClasses=m:o.residualStyles=m),a}(d,m,o,l),function(s,o,a,l,d,m){let v=m?o.classBindings:o.styleBindings,E=Cs(v),I=Ro(v);s[l]=a;let M,S=!1;if(Array.isArray(a)){const L=a;M=L[1],(null===M||ou(L,M)>0)&&(S=!0)}else M=a;if(d)if(0!==I){const G=Cs(s[E+1]);s[l+1]=Xg(G,E),0!==G&&(s[G+1]=em(s[G+1],l)),s[E+1]=function(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=Xg(E,0),0!==E&&(s[E+1]=em(s[E+1],l)),E=l;else s[l+1]=Xg(I,0),0===E?E=l:s[I+1]=em(s[I+1],l),I=l;S&&(s[l+1]=Oy(s[l+1])),Mm(s,M,l,!0),Mm(s,M,l,!1),function(s,o,a,l,d){const m=d?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ou(m,o)>=0&&(a[l+1]=ky(a[l+1]))}(o,M,s,l,m),v=Xg(E,I),m?o.classBindings=v:o.styleBindings=v}(d,m,o,a,v,l)}}(m,s,v,l),o!==Ct&&si(d,v,o)&&function(s,o,a,l,d,m,v,E){if(!(3&o.type))return;const I=s.data,S=I[E+1];pp(function(s){return 1==(1&s)}(S)?$C(I,o,a,d,Ro(S),v):void 0)||(pp(m)||function(s){return 2==(2&s)}(S)&&(m=$C(I,null,a,d,E,v)),function(s,o,a,l,d){const m=en(s);if(o)d?m?s.addClass(a,l):a.classList.add(l):m?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:Qi.DashCase;if(null==d)m?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),v|=Qi.Important),m?s.setStyle(a,l,d,v):a.style.setProperty(l,d,E?"important":"")}}}(l,v,yi(hn(),a),d,m))}(m,m.data[hn()],d,d[11],s,d[v+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=se(Ys(s)))),s}(o,a),l,v)}(s,o,null,!0),Nm}function Gv(s,o,a,l,d){let m=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(m=o[E],l=fp(l,m.hostAttrs,d),m!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function fp(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Fr(s,v,!!a||o[++m]))}return void 0===s?null:s}function $C(s,o,a,l,d,m){const v=null===o;let E;for(;d>0;){const I=s[d],S=Array.isArray(I),M=S?I[1]:I,L=null===M;let G=a[d+1];G===Ct&&(G=L?B:void 0);let Y=L?su(G,l):M===l?G:void 0;if(S&&!pp(Y)&&(Y=su(I,l)),pp(Y)&&(E=Y,v))return E;const pe=s[d+1];d=v?Cs(pe):Ro(pe)}if(null!==o){let I=m?o.residualClasses:o.residualStyles;null!=I&&(E=su(I,l))}return E}function pp(s){return void 0!==s}function Kv(s,o=""){const a=be(),l=Pt(),d=s+20,m=l.firstCreatePass?ca(l,d,1,o,null):l.data[d],v=a[d]=function(s,o){return en(s)?s.createText(o):s.createTextNode(o)}(a[11],o);dc(l,a,v,m),cr(m,!1)}function Yv(s){return gp("",s,""),Yv}function gp(s,o,a){const l=be(),d=Jf(l,s,o,a);return d!==Ct&&ha(l,hn(),d),gp}function Pm(s,o,a,l,d){const m=be(),v=Xf(m,s,o,a,l,d);return v!==Ct&&ha(m,hn(),v),Pm}const va=void 0;var wa=["en",[["a","p"],["AM","PM"],va],[["AM","PM"],va,va],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",va,"{1} 'at' {0}",va],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let vu={};function o0(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Om(o);if(a)return a;const l=o.split("-")[0];if(a=Om(l),a)return a;if("en"===l)return wa;throw new Error(`Missing locale data for the locale "${s}".`)}function XC(s){return o0(s)[pt.PluralCase]}function Om(s){return s in vu||(vu[s]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[s]),vu[s]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const wu="en-US";let En=wu;function Ia(s,o,a,l,d){if(s=X(s),Array.isArray(s))for(let m=0;m<s.length;m++)Ia(s[m],o,a,l,d);else{const m=Pt(),v=be();let E=zf(s)?s:X(s.provide),I=XE(s);const S=_n(),M=1048575&S.providerIndexes,L=S.directiveStart,G=S.providerIndexes>>20;if(zf(s)||!s.multi){const Y=new Ja(I,d,op),pe=Ym(E,o,d?M:M+G,L);-1===pe?(qi(Zu(S,v),m,E),xp(m,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Y),v.push(Y)):(a[pe]=Y,v[pe]=Y)}else{const Y=Ym(E,o,M+G,L),pe=Ym(E,o,M,M+G),Se=Y>=0&&a[Y],Be=pe>=0&&a[pe];if(d&&!Be||!d&&!Se){qi(Zu(S,v),m,E);const Je=function(s,o,a,l,d){const m=new Ja(s,a,op);return m.multi=[],m.index=o,m.componentProviders=0,Sc(m,d,l&&!a),m}(d?gA:Qm,a.length,d,l,I);!d&&Be&&(a[pe].providerFactory=Je),xp(m,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Je),v.push(Je)}else xp(m,s,Y>-1?Y:pe,Sc(a[d?pe:Y],I,!d&&l));!d&&l&&Be&&a[pe].componentProviders++}}}function xp(s,o,a,l){const d=zf(o),m=function(s){return!!s.useClass}(o);if(d||m){const I=(m?X(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=S.indexOf(a);-1===M?S.push(a,[l,I]):S[M+1].push(l,I)}else S.push(a,I)}}}function Sc(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Ym(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Qm(s,o,a,l){return _0(this.multi,[])}function gA(s,o,a,l){const d=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=On(a,a[1],this.providerFactory.index,l);m=E.slice(0,v),_0(d,m);for(let I=v;I<E.length;I++)m.push(E[I])}else m=[],_0(d,m);return m}function _0(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function mI(s,o=[]){return a=>{a.providersResolver=(l,d)=>function(s,o,a){const l=Pt();if(l.firstCreatePass){const d=ei(s);Ia(a,l.data,l.blueprint,d,!0),Ia(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class _I{}class wA{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${se(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Rp=(()=>{class s{}return s.NULL=new wA,s})();function EA(){return ph(_n(),be())}function ph(s,o){return new Mp(Pn(s,o))}let Mp=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=EA,s})();function CA(s){return s instanceof Mp?s.nativeElement:s}class Jm{}let yI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function(){const s=be(),a=Qt(_n().index,s);return function(s){return s[11]}(ji(a)?a:s)}(),s})(),w0=(()=>{class s{}return s.\u0275prov=cn({token:s,providedIn:"root",factory:()=>null}),s})();class E0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const C0=new E0("13.1.0"),I0={};function e_(s,o,a,l,d=!1){for(;null!==a;){const m=o[a.index];if(null!==m&&l.push(Nn(m)),Hi(m))for(let E=10;E<m.length;E++){const I=m[E],S=I[1].firstChild;null!==S&&e_(I[1],I,S,l)}const v=a.type;if(8&v)e_(s,o,a.child,l);else if(32&v){const E=Vd(a,o);let I;for(;I=E();)l.push(I)}else if(16&v){const E=vE(o,a);if(Array.isArray(E))l.push(...E);else{const I=pu(o[16]);e_(I[1],I,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class gh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return e_(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Hi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Pe(o,l),ta(a,l))}this._attachedToViewContainer=!1}Me(this._lView[1],this._lView)}onDestroy(o){qy(this._lView[1],this._lView,null,o)}markForCheck(){Wd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$f(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,a){bo(!0);try{$f(s,o,a)}finally{bo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,gu(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class b0 extends gh{constructor(o){super(o),this._view=o}detectChanges(){Gf(this._view)}checkNoChanges(){!function(s){bo(!0);try{Gf(s)}finally{bo(!1)}}(this._view)}get context(){return null}}class vI extends Rp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=dn(o);return new mh(a,this.ngModule)}}function wI(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}const DA=new fn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Fd});class mh extends _I{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=o.selectors.map(SE).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return wI(this.componentDef.inputs)}get outputs(){return wI(this.componentDef.outputs)}create(o,a,l,d){const m=(d=d||this.ngModule)?function(s,o){return{get:(a,l,d)=>{const m=s.get(a,I0,d);return m!==I0||l===I0?m:o.get(a,l,d)}}}(o,d.injector):o,v=m.get(Jm,Nl),E=m.get(w0,null),I=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=l?function(s,o,a){if(en(s))return s.selectRootElement(o,a===ze.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):_(v.createRenderer(null,this.componentDef),S,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(S)),L=this.componentDef.onPush?576:528,G=function(s,o){return{components:[],scheduler:s||Fd,clean:KE,playerHandler:o||null,flags:0}}(),Y=Bf(0,null,null,1,0,null,null,null,null,null),pe=Uf(null,Y,G,L,null,null,v,I,E,m);let Se,Be;Hu(pe);try{const Je=function(s,o,a,l,d,m){const v=a[1];a[20]=s;const I=ca(v,20,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(qd(I,S,!0),null!==s&&(Wu(d,s,S),null!==I.classes&&Ny(d,s,I.classes),null!==I.styles&&EE(d,s,I.styles)));const M=l.createRenderer(s,o),L=Uf(a,Gy(o),null,o.onPush?64:16,a[20],I,l,M,m||null,null);return v.firstCreatePass&&(qi(Zu(I,a),v,o.type),Yy(v,I),lm(I,a.length,1)),ll(a,L),a[20]=L}(M,this.componentDef,pe,v,I);if(M)if(l)Wu(I,M,["ng-version",C0.full]);else{const{attrs:De,classes:at}=function(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let m=s[l];if("string"==typeof m)2===d?""!==m&&o.push(m,s[++l]):8===d&&a.push(m);else{if(!xo(d))break;d=m}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);De&&Wu(I,M,De),at&&at.length>0&&Ny(I,M,at.join(" "))}if(Be=wo(Y,20),void 0!==a){const De=Be.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Ft=a[at];De.push(null!=Ft?Array.from(Ft):null)}}Se=function(s,o,a,l,d){const m=a[1],v=function(s,o,a){const l=_n();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Qy(s,l,o,gc(s,o,1,null),a));const d=On(o,s,l.directiveStart,l);Kn(d,o);const m=Pn(l,o);return m&&Kn(m,o),d}(m,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=_n();o.contentQueries(1,v,I.directiveStart)}const E=_n();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Gs(E.index),Hf(a[1],E,0,E.directiveStart,E.directiveEnd,o),mu(o,v)),v}(Je,this.componentDef,pe,G,[dv]),hr(Y,pe,null)}finally{Ka()}return new AA(this.componentType,Se,ph(Be,pe),pe,Be)}}class AA extends class{}{constructor(o,a,l,d,m){super(),this.location=l,this._rootLView=d,this._tNode=m,this.instance=a,this.hostView=this.changeDetectorRef=new b0(d),this.componentType=o}get injector(){return new At(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class gl{}class II{}const _h=new Map;class TI extends gl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vI(this);const l=ur(o);this._bootstrapComponents=Yi(l.bootstrap),this._r3Injector=ym(o,a,[{provide:gl,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver}],se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=ro.THROW_IF_NOT_FOUND,l=ht.Default){return o===ro||o===gl||o===zd?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class t_ extends II{constructor(o){super(),this.moduleType=o,null!==ur(o)&&function(s){const o=new Set;!function a(l){const d=ur(l,!0),m=d.id;null!==m&&(function(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${se(o)} vs ${se(o.name)}`)}(m,_h.get(m),l),_h.set(m,l));const v=Yi(d.imports);for(const E of v)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new TI(this.moduleType,o)}}function T0(s,o,a){const l=rr()+s,d=be();return d[l]===Ct?pa(d,l,a?o.call(a):o()):function(s,o){return s[o]}(d,l)}function A0(s,o,a,l,d){return x0(be(),rr(),s,o,a,l,d)}function x0(s,o,a,l,d,m,v){const E=o+a;return cl(s,E,d,m)?pa(s,E+2,v?l.call(v,d,m):l(d,m)):function(s,o){const a=s[o];return a===Ct?void 0:a}(s,E+2)}function Iu(s,o){const a=Pt();let l;const d=s+20;a.firstCreatePass?(l=function(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const m=l.factory||(l.factory=$i(l.type)),v=Sr(op);try{const E=Wi(!1),I=m();return Wi(E),function(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,be(),d,I),I}finally{Sr(v)}}function RI(s,o,a,l){const d=s+20,m=be(),v=Eo(m,d);return function(s,o){return s[1].data[o].pure}(m,d)?x0(m,rr(),o,v.transform,a,l,v):v.transform(a,l)}function ba(s){return o=>{setTimeout(s,void 0,o)}}const es=class extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,m,v;let E=o,I=a||(()=>null),S=l;if(o&&"object"==typeof o){const L=o;E=null===(d=L.next)||void 0===d?void 0:d.bind(L),I=null===(m=L.error)||void 0===m?void 0:m.bind(L),S=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(I=ba(I),E&&(E=ba(E)),S&&(S=ba(S)));const M=super.subscribe({next:E,error:I,complete:S});return o instanceof Q.w0&&o.add(M),M}};function LA(){return this._results[Kd()]()}class N0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Kd(),l=N0.prototype;l[a]||(l[a]=LA)}get changes(){return this._changes||(this._changes=new es)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Cr(o);(this._changesDetected=!function(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],m=o[l];if(a&&(d=a(d),m=a(m)),m!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Pp=(()=>{class s{}return s.__NG_ELEMENT_ID__=UA,s})();const P0=Pp,VA=class extends P0{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Uf(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(a)),hr(a,l,o),new gh(l)}};function UA(){return Op(_n(),be())}function Op(s,o){return 4&s.type?new VA(o,s,ph(s,o)):null}let Rc=(()=>{class s{}return s.__NG_ELEMENT_ID__=BA,s})();function BA(){return kp(_n(),be())}const yh=Rc,O0=class extends yh{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return ph(this._hostTNode,this._hostLView)}get injector(){return new At(this._hostTNode,this._hostLView)}get parentInjector(){const o=Qo(this._hostTNode,this._hostLView);if(Xh(o)){const a=eu(o,this._hostLView),l=Yo(o);return new At(a[1].data[l+8],a)}return new At(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=k0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,m){const v=o&&!("function"==typeof o);let E;if(v)E=a;else{const L=a||{};E=L.index,l=L.injector,d=L.projectableNodes,m=L.ngModuleRef}const I=v?o:new mh(dn(o)),S=l||this.parentInjector;if(!m&&null==I.ngModule&&S){const L=S.get(gl,null);L&&(m=L)}const M=I.create(S,d,void 0,m);return this.insert(M.hostView,E),M}insert(o,a){const l=o._lView,d=l[1];if(Hi(l[3])){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=l[3],G=new O0(L,L[6],L[3]);G.detach(G.indexOf(o))}}const m=this._adjustIndex(a),v=this._lContainer;!function(s,o,a,l){const d=10+l,m=a.length;l>0&&(a[d-1][4]=o),l<m-10?(o[4]=a[d],Yu(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,l,v,m);const E=Ry(m,v),I=l[11],S=al(I,v[7]);return null!==S&&function(s,o,a,l,d,m){l[0]=d,l[6]=o,gu(s,l,a,1,d,m)}(d,v[6],I,l,S,E),o.attachToViewContainerRef(),Yu(s_(v),m,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=k0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Pe(this._lContainer,a);l&&(ta(s_(this._lContainer),a),Me(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Pe(this._lContainer,a);return l&&null!=ta(s_(this._lContainer),a)?new gh(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function k0(s){return s[8]}function s_(s){return s[8]||(s[8]=[])}function kp(s,o){let a;const l=o[s.index];if(Hi(l))a=l;else{let d;if(8&s.type)d=Nn(l);else{const m=o[11];d=m.createComment("");const v=Pn(s,o);ii(m,al(m,v),d,function(s,o){return en(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=a=pT(l,o,d,s),ll(o,a)}return new O0(a,s,o)}class Fp{constructor(o){this.queryList=o,this.matches=null}clone(){return new Fp(this.queryList)}setDirty(){this.queryList.setDirty()}}class L0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let m=0;m<l;m++){const v=a.getByIndex(m);d.push(this.queries[v.indexInDeclarationView].clone())}return new L0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==q0(o,a).matches&&this.queries[a].setDirty()}}class vh{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class V0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,m=this.getByIndex(l).embeddedTView(o,d);m&&(m.indexInDeclarationView=l,null!==a?a.push(m):a=[m])}return null!==a?new V0(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class U0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new U0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const m=l[d];this.matchTNodeWithReadOption(o,a,jA(a,m)),this.matchTNodeWithReadOption(o,a,Qe(a,o,m,!1,!1))}else l===Pp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Qe(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Mp||d===Rc||d===Pp&&4&a.type)this.addMatch(a.index,-2);else{const m=Qe(a,o,d,!1,!1);null!==m&&this.addMatch(a.index,m)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function jA(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function j0(s,o,a,l){return-1===a?function(s,o){return 11&s.type?ph(s,o):4&s.type?Op(s,o):null}(o,s):-2===a?function(s,o,a){return a===Mp?ph(o,s):a===Pp?Op(o,s):a===Rc?kp(o,s):void 0}(s,o,l):On(s,s[1],a,o)}function H0(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const m=s.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const S=v[I];E.push(S<0?null:j0(o,m[S],v[I+1],a.metadata.read))}d.matches=E}return d.matches}function $0(s,o,a,l){const d=s.queries.getByIndex(a),m=d.matches;if(null!==m){const v=H0(s,o,d,a);for(let E=0;E<m.length;E+=2){const I=m[E];if(I>0)l.push(v[E/2]);else{const S=m[E+1],M=o[-I];for(let L=10;L<M.length;L++){const G=M[L];G[17]===G[3]&&$0(G[1],G,S,l)}if(null!==M[9]){const L=M[9];for(let G=0;G<L.length;G++){const Y=L[G];$0(Y[1],Y,S,l)}}}}}return l}function PI(s){const o=be(),a=Pt(),l=Bu();qa(l+1);const d=q0(a,l);if(s.dirty&&ds(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const m=d.crossesNgTemplate?$0(a,o,l,[]):H0(a,o,d,l);s.reset(m,CA),s.notifyOnChanges()}return!0}return!1}function a_(s,o,a,l){const d=Pt();if(d.firstCreatePass){const m=_n();(function(s,o,a){null===s.queries&&(s.queries=new V0),s.queries.track(new U0(o,a))})(d,new vh(o,a,l),m.index),function(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function(s,o,a){const l=new N0(4==(4&a));qy(s,o,l,l.destroy),null===o[19]&&(o[19]=new L0),o[19].queries.push(new Fp(l))}(d,be(),a)}function u_(){return s=be(),o=Bu(),s[19].queries[o].queryList;var s,o}function q0(s,o){return s.queries.getByIndex(o)}const ew=pd("Input",s=>({bindingPropertyName:s})),GI=pd("Output",s=>({bindingPropertyName:s}));function f_(...s){}const Ih=new fn("Application Initializer");let bh=(()=>{class s{constructor(a){this.appInits=a,this.resolve=f_,this.reject=f_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(Mv(m))a.push(m);else if(Nv(m)){const v=new Promise((E,I)=>{m.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(ne(Ih,8))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();const Oc=new fn("AppId"),qI={provide:Oc,useFactory:function(){return`${p_()}${p_()}${p_()}`},deps:[]};function p_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tw=new fn("Platform Initializer"),qp=new fn("Platform ID"),g_=new fn("appBootstrapListener");let ZI=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();const m_=new fn("LocaleId"),__=new fn("DefaultCurrencyCode");class KI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let y_=(()=>{class s{compileModuleSync(a){return new t_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),m=Yi(ur(a).declarations).reduce((v,E)=>{const I=dn(E);return I&&v.push(new mh(I)),v},[]);return new KI(l,m)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();const _l=(()=>Promise.resolve(0))();function Dh(s){"undefined"==typeof Zone?_l.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Tr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new es(!1),this.onMicrotaskEmpty=new es(!1),this.onStable=new es(!1),this.onError=new es(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let s=mt.requestAnimationFrame,o=mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(mt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,rw(s),s.isCheckStableRunning=!0,v_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),rw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,m,v,E)=>{try{return QI(s),a.invokeTask(d,m,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),w_(s)}},onInvoke:(a,l,d,m,v,E,I)=>{try{return QI(s),a.invoke(d,m,v,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),w_(s)}},onHasTask:(a,l,d,m)=>{a.hasTask(d,m),l===d&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,rw(s),v_(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(a,l,d,m)=>(a.handleError(d,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Tr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+d,o,YI,f_,f_);try{return m.runTask(v,a,l)}finally{m.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const YI={};function v_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function rw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function QI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function w_(s){s._nesting--,v_(s)}class nS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new es,this.onMicrotaskEmpty=new es,this.onStable=new es,this.onError=new es}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let JI=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tr.assertNotInAngularZone(),Dh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dh(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:m,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(ne(Tr))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})(),XI=(()=>{class s{constructor(){this._applications=new Map,Th.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Th.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();class rS{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function E_(s){Th=s}let Ri,Th=new rS;const sw=new fn("AllowMultipleToken");class nb{constructor(o,a){this.name=o,this.token=a}}function lo(s,o,a=[]){const l=`Platform: ${o}`,d=new fn(l);return(m=[])=>{let v=sb();if(!v||v.injector.get(sw,!1))if(s)s(a.concat(m).concat({provide:d,useValue:!0}));else{const E=a.concat(m).concat({provide:d,useValue:!0},{provide:_c,useValue:"platform"});!function(s){if(Ri&&!Ri.destroyed&&!Ri.injector.get(sw,!1))throw new Ue("400","");Ri=s.get(ob);const o=s.get(tw,null);o&&o.forEach(a=>a())}(ro.create({providers:E,name:l}))}return function(s){const o=sb();if(!o)throw new Ue("401","");return o}()}}function sb(){return Ri&&!Ri.destroyed?Ri:null}let ob=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function(s,o){let a;return a="noop"===s?new nS:("zone.js"===s?void 0:s)||new Tr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Tr,useValue:E}];return E.run(()=>{const S=ro.create({providers:I,parent:this.injector,name:a.moduleType.name}),M=a.create(S),L=M.injector.get(sc,null);if(!L)throw new Ue("402","");return E.runOutsideAngular(()=>{const G=E.onError.subscribe({next:Y=>{L.handleError(Y)}});M.onDestroy(()=>{ow(this._modules,M),G.unsubscribe()})}),function(s,o,a){try{const l=a();return Mv(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(L,E,()=>{const G=M.injector.get(bh);return G.runInitializers(),G.donePromise.then(()=>(function(s){gt(s,"Expected localeId to be defined"),"string"==typeof s&&(En=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(m_,wu)||wu),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=ub({},l);return function(s,o,a){const l=new t_(a);return Promise.resolve(l)}(0,0,a).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(a){const l=a.injector.get(zp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ue("403","");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue("404","");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(ne(ro))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();function ub(s,o){return Array.isArray(o)?o.reduce(ub,s):Object.assign(Object.assign({},s),o)}let zp=(()=>{class s{constructor(a,l,d,m,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new k.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),I=new k.y(S=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Tr.assertNotInAngularZone(),Dh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Tr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{M.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ue.T)(E,I.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ue("405","");let d;d=a instanceof _I?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const m=function(s){return s.isBoundToModule}(d)?void 0:this._injector.get(gl),E=d.create(ro.NULL,[],l||d.selector,m),I=E.location.nativeElement,S=E.injector.get(JI,null),M=S&&E.injector.get(XI);return S&&M&&M.registerApplication(I,S),E.onDestroy(()=>{this.detachView(E.hostView),ow(this.components,E),M&&M.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ue("101","");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;ow(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(g_,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(ne(Tr),ne(ro),ne(sc),ne(Rp),ne(bh))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();function ow(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let cb=!0,db=!1;function oS(){return db=!0,cb}function aS(){if(db)throw new Error("Cannot enable prod mode after platform setup.");cb=!1}let uS=(()=>{class s{}return s.__NG_ELEMENT_ID__=lS,s})();function lS(s){return function(s,o,a){if(ls(s)&&!a){const l=Qt(s.index,o);return new gh(l,l)}return 47&s.type?new gh(o[16],o):null}(_n(),be(),16==(16&s))}class _b{constructor(){}supports(o){return Qf(o)}create(o){return new _S(o)}}const yb=(s,o)=>o;class _S{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||yb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,m=null;for(;a||l;){const v=!l||a&&a.currentIndex<bu(l,d,m)?a:l,E=bu(v,d,m),I=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{m||(m=[]);const S=E-d,M=I-d;if(S!=M){for(let G=0;G<S;G++){const Y=G<m.length?m[G]:m[G]=0,pe=Y+G;M<=pe&&pe<S&&(m[G]=Y+1)}m[v.previousIndex]=M-S}}E!==I&&o(v,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Qf(o))throw new Error(`Error trying to diff '${se(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,m,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)m=o[E],v=this._trackByFn(E,m),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,m,v,E)),Object.is(a.item,m)||this._addIdentityChange(a,m)):(a=this._mismatch(a,m,v,E),l=!0),a=a._next}else d=0,function(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Kd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,m,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,m,d)):o=this._addAfter(new yS(a,l),m,d),o}_verifyReinsertion(o,a,l,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?o=this._reinsertAfter(m,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,m=o._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new vb),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class yS{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class vb{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new vS,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bu(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Vr{constructor(){}supports(o){return o instanceof Map||Im(o)}create(){return new Ss}}class Ss{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Im(o)))throw new Error(`Error trying to diff '${se(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const m=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,m)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const m=d._prev,v=d._next;return m&&(m._next=v),v&&(v._prev=m),d._next=null,d._prev=null,d}const l=new Kp(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Kp{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wb(){return new C_([new _b])}let C_=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||wb()),deps:[[s,new Ki,new Dr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(s){return s.name||typeof s}(a)}'`)}}return s.\u0275prov=cn({token:s,providedIn:"root",factory:wb}),s})();function Eb(){return new Lc([new Vr])}let Lc=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Eb()),deps:[[s,new Ki,new Dr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return s.\u0275prov=cn({token:s,providedIn:"root",factory:Eb}),s})();const ES=[new Vr],Cb=new C_([new _b]),Ib=new Lc(ES),Db=lo(null,"core",[{provide:qp,useValue:"unknown"},{provide:ob,deps:[ro]},{provide:XI,deps:[]},{provide:ZI,deps:[]}]),dw=[{provide:zp,useClass:zp,deps:[Tr,ro,sc,Rp,bh]},{provide:DA,deps:[Tr],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(a){o.push(a)}}},{provide:bh,useClass:bh,deps:[[new Dr,Ih]]},{provide:y_,useClass:y_,deps:[]},qI,{provide:C_,useFactory:function(){return Cb},deps:[]},{provide:Lc,useFactory:function(){return Ib},deps:[]},{provide:m_,useFactory:function(s){return s||"undefined"!=typeof $localize&&$localize.locale||wu},deps:[[new Rn(m_),new Dr,new Ki]]},{provide:__,useValue:"USD"}];let GN=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(ne(zp))},s.\u0275mod=xa({type:s}),s.\u0275inj=An({providers:dw}),s})()},3942:(nt,Ee,F)=>{"use strict";F.d(Ee,{Z:()=>Ue});var f=F(2090),Q=F(4859),k=F(9681),ue=F(1877);class re{constructor(oe,K){this._delegate=oe,this.firebase=K,(0,k._addComponent)(oe,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this._delegate.automaticDataCollectionEnabled=oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(oe=>{this._delegate.checkDestroyed(),oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(oe,K=k._DEFAULT_ENTRY_NAME){var ae;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(oe);return!Ce.isInitialized()&&"EXPLICIT"===(null===(ae=Ce.getComponent())||void 0===ae?void 0:ae.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:K})}_removeServiceInstance(oe,K=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(oe).clearInstance(K)}_addComponent(oe){(0,k._addComponent)(this._delegate,oe)}_addOrOverwriteComponent(oe){(0,k._addOrOverwriteComponent)(this._delegate,oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function le(){const Le=function(Le){const oe={},K={__esModule:!0,initializeApp:function(qe,ut={}){const ee=k.initializeApp(qe,ut);if((0,f.r3)(oe,ee.name))return oe[ee.name];const ce=new Le(ee,K);return oe[ee.name]=ce,ce},app:Ce,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(qe){const ut=qe.name,ee=ut.replace("-compat","");if(k._registerComponent(qe)&&"PUBLIC"===qe.type){const ce=(_e=Ce())=>{if("function"!=typeof _e[ee])throw ie.create("invalid-app-argument",{appName:ut});return _e[ee]()};void 0!==qe.serviceProps&&(0,f.ZB)(ce,qe.serviceProps),K[ee]=ce,Le.prototype[ee]=function(..._e){return this._getService.bind(this,ut).apply(this,qe.multipleInstances?_e:[])}}return"PUBLIC"===qe.type?K[ee]:null},removeApp:function(qe){delete oe[qe]},useAsService:function(qe,ut){return"serverAuth"===ut?null:ut},modularAPIs:k}};function Ce(qe){if(!(0,f.r3)(oe,qe=qe||k._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:qe});return oe[qe]}return K.default=K,Object.defineProperty(K,"apps",{get:function(){return Object.keys(oe).map(qe=>oe[qe])}}),Ce.App=Le,K}(re);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function(K){(0,f.ZB)(Le,K)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Le}(),H=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=$;(0,k.registerVersion)("@firebase/app-compat","0.1.12",undefined)},9681:(nt,Ee,F)=>{"use strict";F.r(Ee),F.d(Ee,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Bo,_DEFAULT_ENTRY_NAME:()=>Un,_addComponent:()=>ln,_addOrOverwriteComponent:()=>_r,_apps:()=>gt,_clearComponents:()=>An,_components:()=>bt,_getProvider:()=>cn,_registerComponent:()=>Ar,_removeServiceInstance:()=>Uo,deleteApp:()=>tr,getApp:()=>Ui,getApps:()=>Te,initializeApp:()=>fi,onLog:()=>Gt,registerVersion:()=>ht,setLogLevel:()=>pi});var f=F(5861),Q=F(4859),k=F(1877),ue=F(2090);class re{constructor(ft){this.container=ft}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function(it){const ft=it.getComponent();return"VERSION"===(null==ft?void 0:ft.type)}(xt)){const Nt=xt.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(xt=>xt).join(" ")}}const ie="@firebase/app",le=new k.Yd("@firebase/app"),Un="[DEFAULT]",wt={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gt=new Map,bt=new Map;function ln(it,ft){try{it.container.addComponent(ft)}catch(xt){le.debug(`Component ${ft.name} failed to register with FirebaseApp ${it.name}`,xt)}}function _r(it,ft){it.container.addOrOverwriteComponent(ft)}function Ar(it){const ft=it.name;if(bt.has(ft))return le.debug(`There were multiple attempts to register component ${ft}.`),!1;bt.set(ft,it);for(const xt of gt.values())ln(xt,it);return!0}function cn(it,ft){return it.container.getProvider(ft)}function Uo(it,ft,xt=Un){cn(it,ft).clearInstance(xt)}function An(){bt.clear()}const $t=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class bn{constructor(ft,xt,Nt){this._isDeleted=!1,this._options=Object.assign({},ft),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this.checkDestroyed(),this._automaticDataCollectionEnabled=ft}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ft){this._isDeleted=ft}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const Bo="9.6.1";function fi(it,ft={}){"object"!=typeof ft&&(ft={name:ft});const xt=Object.assign({name:Un,automaticDataCollectionEnabled:!1},ft),Nt=xt.name;if("string"!=typeof Nt||!Nt)throw $t.create("bad-app-name",{appName:String(Nt)});const xr=gt.get(Nt);if(xr){if((0,ue.vZ)(it,xr.options)&&(0,ue.vZ)(xt,xr.config))return xr;throw $t.create("duplicate-app",{appName:Nt})}const qt=new Q.H0(Nt);for(const st of bt.values())qt.addComponent(st);const ze=new bn(it,xt,qt);return gt.set(Nt,ze),ze}function Ui(it=Un){const ft=gt.get(it);if(!ft)throw $t.create("no-app",{appName:it});return ft}function Te(){return Array.from(gt.values())}function tr(it){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(it){const ft=it.name;gt.has(ft)&&(gt.delete(ft),yield Promise.all(it.container.getProviders().map(xt=>xt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function ht(it,ft,xt){var Nt;let xr=null!==(Nt=wt[it])&&void 0!==Nt?Nt:it;xt&&(xr+=`-${xt}`);const qt=xr.match(/\s|\//),ze=ft.match(/\s|\//);if(qt||ze){const st=[`Unable to register library "${xr}" with version "${ft}":`];return qt&&st.push(`library name "${xr}" contains illegal characters (whitespace or "/")`),qt&&ze&&st.push("and"),ze&&st.push(`version name "${ft}" contains illegal characters (whitespace or "/")`),void le.warn(st.join(" "))}Ar(new Q.wA(`${xr}-version`,()=>({library:xr,version:ft}),"VERSION"))}function Gt(it,ft){if(null!==it&&"function"!=typeof it)throw $t.create("invalid-log-argument");(0,k.Am)(it,ft)}function pi(it){(0,k.Ub)(it)}Ar(new Q.wA("platform-logger",ft=>new re(ft),"PRIVATE")),ht(ie,"0.7.11",""),ht(ie,"0.7.11","esm2017"),ht("fire-js","")},4859:(nt,Ee,F)=>{"use strict";F.d(Ee,{wA:()=>k,H0:()=>se,zt:()=>re});var f=F(5861),Q=F(2090);class k{constructor($,H,X){this.name=$,this.instanceFactory=H,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class re{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const X=new Q.BH;if(this.instancesDeferred.set(H,X),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:H});Ve&&X.resolve(Ve)}catch(Ve){}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const X=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ve=null!==(H=null==$?void 0:$.optional)&&void 0!==H&&H;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ie){if(Ve)return null;throw Ie}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if("EAGER"===$.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ue})}catch(H){}for(const[H,X]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(H);try{const Ie=this.getOrInitializeService({instanceIdentifier:Ve});X.resolve(Ie)}catch(Ie){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...H.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,X=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:X,options:H});for(const[Ie,Ue]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ie)&&Ue.resolve(Ve);return Ve}onInit($,H){var X;const Ve=this.normalizeInstanceIdentifier(H),Ie=null!==(X=this.onInitCallbacks.get(Ve))&&void 0!==X?X:new Set;Ie.add($),this.onInitCallbacks.set(Ve,Ie);const Ue=this.instances.get(Ve);return Ue&&$(Ue,Ve),()=>{Ie.delete($)}}invokeOnInitCallbacks($,H){const X=this.onInitCallbacks.get(H);if(X)for(const Ve of X)try{Ve($,H)}catch(Ie){}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let X=this.instances.get($);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(le=$,le===ue?void 0:le),options:H}),this.instances.set($,X),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(X,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,X)}catch(Ve){}var le;return X||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new re($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Ee,F)=>{"use strict";F.d(Ee,{in:()=>Q,Yd:()=>ie,Ub:()=>se,Am:()=>le});const f=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const k={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ue=Q.INFO,re={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},fe=($,H,...X)=>{if(H<$.logLevel)return;const Ve=(new Date).toISOString(),Ie=re[H];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ie](`[${Ve}]  ${$.name}:`,...X)};class ie{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=fe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...H),this._logHandler(this,Q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...H),this._logHandler(this,Q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...H),this._logHandler(this,Q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...H),this._logHandler(this,Q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...H),this._logHandler(this,Q.ERROR,...H)}}function se($){f.forEach(H=>{H.setLogLevel($)})}function le($,H){for(const X of f){let Ve=null;H&&H.level&&(Ve=k[H.level]),X.userLogHandler=null===$?null:(Ie,Ue,...Le)=>{const oe=Le.map(K=>{if(null==K)return null;if("string"==typeof K)return K;if("number"==typeof K||"boolean"==typeof K)return K.toString();if(K instanceof Error)return K.message;try{return JSON.stringify(K)}catch(ae){return null}}).filter(K=>K).join(" ");Ue>=(null!=Ve?Ve:Ie.logLevel)&&$({level:Q[Ue].toLowerCase(),message:oe,args:Le,type:Ie.name})}}}},5861:(nt,Ee,F)=>{"use strict";function f(k,ue,re,fe,ie,se,le){try{var $=k[se](le),H=$.value}catch(X){return void re(X)}$.done?ue(H):Promise.resolve(H).then(fe,ie)}function Q(k){return function(){var ue=this,re=arguments;return new Promise(function(fe,ie){var se=k.apply(ue,re);function le(H){f(se,fe,ie,le,$,"next",H)}function $(H){f(se,fe,ie,le,$,"throw",H)}le(void 0)})}}F.d(Ee,{Z:()=>Q})}},nt=>{nt(nt.s=4556)}]);